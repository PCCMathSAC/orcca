<?xml version="1.0" encoding="UTF-8" ?>
<!-- *********************************************************************-->
<!-- Copyright 2016-2019                                                  -->
<!-- Portland Community College                                           -->
<!--                                                                      -->
<!-- This file is part of Open Resources for Community College Algebra    -->
<!-- (ORCCA).                                                             -->
<!--                                                                      -->
<!-- Open Resources for Community College Algebra is licensed under a     -->
<!-- Creative Commons Attribution 4.0 International License.              -->
<!--                                                                      -->
<!-- Under this license, any user of this textbook or the textbook        -->
<!-- contents must provide proper attribution as follows.                 -->
<!--                                                                      -->
<!-- If you redistribute all or part of this textbook, then you must      -->
<!-- include in every digital format page view (including but not         -->
<!-- limited to EPUB, PDF, and HTML) and on every physical printed page   -->
<!-- the following attribution:                                           -->
<!--                                                                      -->
<!-- Original source material, products with readable and accessible      -->
<!-- math content, and other information freely available at              -->
<!-- pcc.edu/orcca.                                                       -->
<!--                                                                      -->
<!-- If you redistribute all or part of this textbook, then you must      -->
<!-- reproduce any math content (such as math expressions and equations)  -->
<!-- in a readable manner, and offer math content in at least one web     -->
<!-- accessible manner.                                                   -->
<!--                                                                      -->
<!-- The Portland Community College name, Portland Community College      -->
<!-- logo, ORCCA name, Open Resources for Community College Algebra name, -->
<!-- ORCCA logo, and front and back cover designs are not subject to the  -->
<!-- Creative Commons license and may not be reproduced without the       -->
<!-- prior and express written consent of Portland Community College.     -->
<!--                                                                      -->
<!-- For questions regarding this license, please contact                 -->
<!-- orcca-group@pcc.edu.                                                 -->
<!-- *********************************************************************-->
<section xml:id="section-equations-and-inequalities-with-fractions">
  <title>Equations and Inequalities with Fractions</title>
  <objectives>
    <title>PCC Course Content and Outcome Guide</title>
    <ul>
      <li>
        <xref ref="ccog-solve-linear-equations-symbolically" text="local">MTH 60 CCOG</xref>
      </li>

      <li>
        <xref ref="ccog-create-solve-models" text="local">MTH 60 CCOG</xref>
      </li>
    </ul>
  </objectives>

  <introduction>
    <p>
      Imagine an equation with fractions present in the coefficients or terms, for example:
      <me>\frac{1}{4}x+\frac{2}{3}=\frac{1}{6}</me>
      We could solve this using the same steps from
      <xref ref="section-solving-multistep-linear-equations"/>. We'd have to do some fraction
      subtraction, followed by some fraction division. In other words, we'd use fraction arithmetic,
      which is a bit more likely to lead to human error than whole number arithmetic.
    </p>
    <p>
      An alternative is to multiply each side of the equation by a helpful number that <q>clears</q>
      the denominator(s). In the above example, the helpful number would be <m>12</m>:
      <md>
        <mrow>\frac{1}{4}x+\frac{2}{3}\amp=\frac{1}{6}</mrow>
        <mrow>\multiplyleft{12}\left(\frac{1}{4}x+\frac{2}{3}\right)\amp=\multiplyleft{12}\left(\frac{1}{6}\right)</mrow>
        <mrow>3x+8\amp=2</mrow>
      </md>
      Somehow multiplying by <m>12</m> cleared all of the fractions from the equation. We could
      solve this equation easily now. This section covers this technique, which generally makes it
      easier to solve linear equations and inequalities when fractions are present.
    </p>

    <figure>
      <caption>Alternative Video Lessons</caption>
      <video youtubeplaylist="PLmuZCPhWPt-e_QSbGeacmrdYyommPaxf4" />
    </figure>
  </introduction>

  <subsection xml:id="subsection-eliminating-denominators">
    <title>Eliminating Denominators</title>
    <example>
      <sidebyside widths="47% 47%" margins="0%">
        <stack>
          <p>
            Deshawn planted a sapling in his yard that was
            <quantity><mag>4</mag><unit base="foot"/></quantity> tall. The tree will grow
            <m>\frac{2}{3}</m> of a foot every year. How many years will it take for his tree to
            become <quantity><mag>10</mag><unit base="foot"/></quantity> tall?
          </p>

          <p>
            We can use a table to help understand the rate of growth and then write a formula that
            models the tree's growth:
          </p>
        </stack>

        <tabular>
          <col halign="center"/>
          <col halign="left"/>
          <row bottom="medium" header="yes">
            <cell>Years Passed</cell>
            <cell>Tree's Height (ft)</cell>
          </row>
          <row>
            <cell><m>0</m></cell>
            <cell><m>4</m></cell>
          </row>
          <row>
            <cell><m>1</m></cell>
            <cell><m>4+\frac{2}{3}</m></cell>
          </row>
          <row>
            <cell><m>2</m></cell>
            <cell><m>4+\frac{2}{3}\cdot2</m></cell>
          </row>
          <row>
            <cell><m>3</m></cell>
            <cell><m>4+\frac{2}{3}\cdot3</m></cell>
          </row>
          <row>
            <cell><m>\vdots</m></cell>
            <cell><m>\vdots</m></cell>
          </row>
          <row>
            <cell><m>y</m></cell>
            <cell><m>4+\frac{2}{3}y</m></cell>
          </row>
        </tabular>

      </sidebyside>

      <p>
        We find that <m>y</m> years since the tree was planted, the tree's height is
        <m>4+\frac{2}{3}y</m> feet. To find when Deshawn's tree will be <m>10</m> feet tall, we set
        up the equation
        <me>4+\frac{2}{3}y=10</me>
        Note that the equation has a fraction present as a coefficient.
      </p>

      <p>
        To solve the equation, note that the fraction's denominator is <m>3</m>. As the very first
        step, multiplying by <m>3</m> on each side of the equation will leave us with no
        fractions.
        <md>
          <mrow>4+\frac{2}{3}y\amp=10</mrow>
          <mrow>\multiplyleft{3}\left(4+\frac{2}{3}y\right)\amp=\multiplyleft{3}10</mrow>
          <mrow>3\cdot4+3\cdot\frac{2}{3}y\amp=30</mrow>
          <mrow>12+2y\amp=30\amp\text{(it's smooth sailing from here)}</mrow>
          <mrow>2y\amp=18</mrow>
          <mrow>y\amp=9</mrow>
        </md>
      </p>

      <p>
        Let's check the solution <m>9</m> to be sure:
        <md>
          <mrow>4+\frac{2}{3}y\amp=10</mrow>
          <mrow>4+\frac{2}{3}(\substitute{9})\amp\wonder{=}10</mrow>
          <mrow>4+6\amp\confirm{=}10</mrow>
        </md>
      </p>

      <p>
        In summary, it will take <m>9</m> years for Deshawn's tree to reach <m>10</m> feet tall. The
        point of this example was to demonstrate how clearing denominators can make an equation
        relatively easier to solve.
      </p>
    </example>

    <exercise label="water-evaporating">
      <webwork>
        <pg-macros>
          <macro-file>parserLinearRelation.pl</macro-file>
        </pg-macros>
        <pg-code>
          Context("LinearRelation");
          Context()->variables->are(t => "Real");
          Context()->operators->undefine("/");
          Parser::Number::NoDecimals();
          $equation = Formula("105-3t=40");
        </pg-code>
        <statement>
          <p>
            In a science lab, a container had <m>21</m> ounces of water at 9:00<nbsp/><am/>. Water
            has been evaporating at the rate of <m>3</m> ounces every <m>5</m> minutes. When will
            there be <m>8</m> ounces of water left?
          </p>
          <instruction>
            Write an equation for this scenario, using <m>t</m> as the variable. Then do what is
            needed to clear the denominators. Enter the equation with cleared denominators.
          </instruction>
          <p>
            <var name="$equation" width="16"/>
          </p>
        </statement>
        <solution>
          <p>
            Since the container has been losing <m>3</m> oz of water every <m>5</m> minutes, it
            loses <m>\frac{3}{5}</m> oz every minute. At <m>t</m> minutes past 9:00<nbsp/><am/>, the
            container will have lost <m>\frac{3}{5}t</m> oz of water. Since the intial amount was
            <m>21</m> oz, the amount of water in the container (in oz) can be modeled by
            <m>21-\frac{3}{5}t</m>.
          </p>
          <p>
            So to work out when there would be only <m>8</m> oz of water left, we write the
            following equation. Note there is a denominator of <m>5</m>, which we can clear.
            <md>
              <mrow>21-\frac{3}{5}t\amp=8</mrow>
              <mrow>\multiplyleft{5}\left(21-\frac{3}{5}t\right)\amp=\multiplyleft{5}8</mrow>
              <mrow>5\cdot21-5\cdot\frac{3}{5}t\amp=40</mrow>
              <mrow>105-3t\amp=40</mrow>
            </md>
          </p>
          <p>
            From here it is straightforward to use steps from
            <xref ref="section-solving-multistep-linear-equations"/> to solve the equation. You can
            try that on your own and you should find that it will take between <m>21</m> and
            <m>22</m> minutes for the container to only have <m>8</m> ounces of water left.
          </p>
        </solution>
      </webwork>
    </exercise>

    <p>
      The previous examples only had one fraction in the equation. What happens if there are more?
    </p>

    <example>
      <statement>
        <p>
          Solve for <m>x</m> in <m>\frac{1}{4}x+\frac{2}{3}=\frac{1}{6}</m>.
        </p>
      </statement>
      <solution>
        <p>
          Once again, we have an equation with fractions present. This time there are multiple
          denominators: <m>4</m>, <m>3</m>, and <m>6</m>. Is there <em>one</em> number we could use
          to clear all three denominators? The <q>Least Common Multiple</q> of the denominators
          (abbreviated as LCM or LCD) would work. Anything that is a multiple of all three of these
          denominators would work, and using the smallest such number is just a good habit. In this
          case, the LCD is <m>12</m>. So we will multiply each side of the equation by <m>12</m>:
        </p>

        <sidebyside widths="47% 47%" margins="0%">
          <p>
            <md>
              <mrow>\frac{1}{4}x+\frac{2}{3}\amp=\frac{1}{6}</mrow>
              <mrow>\multiplyleft{12}\left(\frac{1}{4}x+\frac{2}{3}\right)\amp=\multiplyleft{12}\frac{1}{6}</mrow>
              <mrow>12\cdot\left(\frac{1}{4}x\right)+12\cdot\left(\frac{2}{3}\right)\amp=12\cdot\frac{1}{6}</mrow>
              <mrow>3x+8\amp=2</mrow>
              <mrow>3x\amp=-6</mrow>
              <mrow>x\amp=-2</mrow>
            </md>
          </p>

          <p>
            Checking the solution <m>-2</m>:
            <md>
              <mrow>\frac{1}{4}x+\frac{2}{3}\amp=\frac{1}{6}</mrow>
              <mrow>\frac{1}{4}(\substitute{-2})+\frac{2}{3}\amp\wonder{=}\frac{1}{6}</mrow>
              <mrow>-\frac{2}{4}+\frac{2}{3}\amp\wonder{=}\frac{1}{6}</mrow>
              <mrow>-\frac{6}{12}+\frac{8}{12}\amp\wonder{=}\frac{1}{6}</mrow>
              <mrow>\frac{2}{12}\amp\confirm{=}\frac{1}{6}</mrow>
            </md>
          </p>
        </sidebyside>

        <p>
          The solution is therefore <m>-2</m> and the solution set is <m>\{-2\}</m>.
        </p>
      </solution>
    </example>

    <exercise label="solve-by-clearing-denominator">
      <webwork>
        <pg-code>
          Context("FiniteSolutionSets");
          Context()->variables->are(z=>'Real');
          $solution = Formula("{23}");
        </pg-code>
        <statement>
          <p>
            Solve for <m>z</m> in <m>-\frac{2}{5}z-\frac{3}{2}=-\frac{1}{2}z+\frac{4}{5}</m>.
          </p>
          <p>
            <var name="$solution" width="20"/>
          </p>
        </statement>
        <solution>
          <p>
            With fractions present, we decide to identify the LCD. The denominators are <m>2</m> and
            <m>5</m>, so the LCD is <m>10</m>. And so our first algebra step is to multiply each
            side of the equation by <m>10</m>:
            <md>
              <mrow>-\frac{2}{5}z-\frac{3}{2}\amp=-\frac{1}{2}z+\frac{4}{5}</mrow>
              <mrow>\multiplyleft{10}\left(-\frac{2}{5}z-\frac{3}{2}\right)\amp=\multiplyleft{10}\left(-\frac{1}{2}z+\frac{4}{5}\right)</mrow>
              <mrow>10\left(-\frac{2}{5}z\right)-10\left(\frac{3}{2}\right)\amp=10\left(-\frac{1}{2}z\right)+10\left(\frac{4}{5}\right)</mrow>
              <mrow>-4z-15\amp=-5z+8</mrow>
              <mrow>z-15\amp=8</mrow>
              <mrow>z\amp=23</mrow>
            </md>
          </p>

          <p>
            Checking the solution <m>23</m>:
            <md>
              <mrow>-\frac{2}{5}z-\frac{3}{2}\amp=-\frac{1}{2}z+\frac{4}{5}</mrow>
              <mrow>-\frac{2}{5}(\substitute{23})-\frac{3}{2}\amp\wonder{=}-\frac{1}{2}(\substitute{23})+\frac{4}{5}</mrow>
              <mrow>-\frac{46}{5}-\frac{3}{2}\amp\wonder{=}-\frac{23}{2}+\frac{4}{5}</mrow>
              <mrow>-\frac{92}{10}-\frac{15}{10}\amp\wonder{=}-\frac{115}{10}+\frac{8}{10}</mrow>
              <mrow>-\frac{107}{10}\amp\confirm{=}-\frac{107}{10}</mrow>
            </md>
          </p>

          <p>
            So the solution is <m>23</m> and so the solution set is <m>\{23\}</m>.
          </p>
        </solution>
      </webwork>
    </exercise>

    <example>
      <statement>
        <p>
          Solve for <m>a</m> in the equation <m>\frac{2}{3}(a+1)+5=\frac{1}{3}</m>.
        </p>
      </statement>
      <solution>
        <sidebyside widths="47% 47%" margins="0%">
          <p>
            There are two fractions appearing here, and both have the same denominator <m>3</m>.
            We can multiply by <m>3</m> on each side and that alone will clear the denominators.
            <md>
              <mrow>\frac{2}{3}(a+1)+5\amp=\frac{1}{3}</mrow>
              <mrow>\multiplyleft{3}\left(\frac{2}{3}(a+1)+5\right)\amp=\multiplyleft{3}\frac{1}{3}</mrow>
              <mrow>3\cdot\frac{2}{3}(a+1)+3\cdot5\amp=1</mrow>
              <mrow>2(a+1)+15\amp=1</mrow>
              <mrow>2a+2+15\amp=1</mrow>
              <mrow>2a+17\amp=1</mrow>
              <mrow>2a\amp=-16</mrow>
              <mrow>a\amp=-8</mrow>
            </md>
          </p>

          <p>
            Checking the solution <m>-8</m>:
            <md>
              <mrow>\frac{2}{3}(a+1)+5\amp=\frac{1}{3}</mrow>
              <mrow>\frac{2}{3}(\substitute{-8}+1)+5\amp\wonder{=}\frac{1}{3}</mrow>
              <mrow>\frac{2}{3}(-7)+5\amp\wonder{=}\frac{1}{3}</mrow>
              <mrow>-\frac{14}{3}+\frac{15}{3}\amp\confirm{=}\frac{1}{3}</mrow>
            </md>
          </p>
        </sidebyside>

        <p>
          The solution is therefore <m>-8</m> and the solution set is <m>\{-8\}</m>.
        </p>
      </solution>
    </example>

    <example xml:id="example-cross-multiply-showing-LCD">
      <statement>
        <p>
          Solve for <m>b</m> in the equation <m>\frac{2b+1}{3}=\frac{2}{5}</m>.
        </p>
      </statement>
      <solution>
        <sidebyside widths="47% 47%" margins="0%">
          <p>
            The structure of the equation is a little different from previous examples, but we can
            still see that there are denominators <m>3</m> and <m>5</m>, and that their LCM is
            <m>15</m>. Multiplying each side of the equation by <m>15</m> will help.
            <md>
              <mrow>\frac{2b+1}{3}\amp=\frac{2}{5}</mrow>
              <mrow>\multiplyleft{15}\frac{2b+1}{3}\amp=\multiplyleft{15}\frac{2}{5}</mrow>
              <mrow>5(2b+1)\amp=6</mrow>
              <mrow>10b+5\amp=6</mrow>
              <mrow>10b\amp=1</mrow>
              <mrow>b\amp=\frac{1}{10}</mrow>
            </md>
          </p>

          <p>
            Checking the solution <m>\frac{1}{10}</m>:
            <md>
              <mrow>\frac{2b+1}{3}\amp=\frac{2}{5}</mrow>
              <mrow>\frac{2\left(\substitute{\frac{1}{10}}\right)+1}{3}\amp\wonder{=}\frac{2}{5}</mrow>
              <mrow>\frac{\frac{1}{5}+1}{3}\amp\wonder{=}\frac{2}{5}</mrow>
              <mrow>\frac{\frac{1}{5}+\frac{5}{5}}{3}\amp\wonder{=}\frac{2}{5}</mrow>
              <mrow>\frac{\frac{6}{5}}{3}\amp\wonder{=}\frac{2}{5}</mrow>
              <mrow>\frac{6}{5}\cdot \frac{1}{3}\amp\confirm{=}\frac{2}{5}</mrow>
            </md>
          </p>
        </sidebyside>

        <p>
          The solution is <m>\frac{1}{10}</m> and the solution set is
          <m>\left\{\frac{1}{10}\right\}</m>.
        </p>
      </solution>
    </example>
  </subsection>

  <subsection>
    <title>Proportional Equations</title>
    <p>
      Proportional equations are used to solve many real-life applications where two quantities vary
      together. For example if you have more liquid Tylenol in a medicine cup, then you have more
      milligrams of the drug itself dissolved in that liquid. The two quantities (volume of liquid
      and mass of the drug) vary together.
    </p>

    <example xml:id="example-proportion-in-price">
      <p>
        Suppose we want to know the total cost for a box of cereal that weighs <m>18</m> ounces,
        assuming it costs the same per ounce as a <m>21</m>-ounce box. Letting <m>C</m> be this
        unknown cost (in dollars), we could set up a proportional equation. Whether we are dealing
        with the smaller box or the larger box, the ratio of cost to weight is supposed to be the
        same. So below on the left, we enter details for the larger box. And on the right, for the
        smaller box.
        <md>
          <mrow>\frac{\text{cost in dollars}}{\text{weight in oz}}\amp=\frac{\text{cost in dollars}}{\text{weight in oz}}</mrow>
          <mrow>\frac{\$3.99}{21\,\text{oz}}\amp=\frac{\$C}{18\,\text{oz}}</mrow>
        </md>
        We can rewrite this equation without the units:
        <me>
          \frac{3.99}{21}=\frac{C}{18}
        </me>
        And we have an equation with fractions present. We want to multiply each side by the LCD,
        but this time the denominators are larger than previous examples. Can we still find the LCD?
        We could! But it is maybe not worth the time and effort. Having the <em>least</em> common
        multiple is a nice thing, but <em>any</em> common multiple of denominators will work out for
        our needs. A simple way to get a common multiple is just to multiply the numbers together.
        So we choose to multiply each side by <m>18\cdot 21</m> instead of whatever the actual LCD
        is.
        <md>
          <mrow>\frac{3.99}{21}\amp=\frac{C}{18}</mrow>
          <mrow>\multiplyleft{18\cdot21}\frac{3.99}{21}\amp=\multiplyleft{18\cdot21}\frac{3.99}{21}\frac{C}{18}</mrow>
          <mrow>18\cdot\cancelhighlight{21}\cdot\frac{3.99}{\cancelhighlight{21}}\amp=\cancelhighlight{18}\cdot21\cdot\frac{C}{\cancelhighlight{18}}</mrow>
          <mrow>71.82\amp=21C</mrow>
          <mrow>\divideunder{71.82}{21}\amp=\divideunder{21C}{21}</mrow>
          <mrow>C\amp=3.42</mrow>
        </md>
        So assuming the cost is proportional to the cost of the <m>21</m>-ounce box, the cost for an
        <m>18</m>-ounce box of cereal would be <m>\$3.42</m>.
      </p>
    </example>

    <example>
      <statement>
        <p>
          Property taxes for a residential property are proportional to the assessed value of the
          property. A certain home is assessed at <m>\$234{,}100</m> and its annual property taxes
          are <m>\$2{,}518.92</m>. What are the annual property taxes for the house next door that
          is assessed at <m>\$287{,}500</m>?
        </p>
      </statement>
      <solution>
        <p>
          Let <m>T</m> be the annual property taxes
          (in dollars)
          for a property assessed at <m>\$287{,}500</m>.
          We can write and solve this proportion:
          <md>
            <mrow>\frac{\text{tax}}{\text{property value}}\amp=\frac{\text{tax}}{\text{property value}}</mrow>
            <mrow>\frac{2518.92}{234100}\amp=\frac{T}{287500}</mrow>
          </md>
          The least common denominator of this proportion is rather large, so we will instead
          multiply each side by <m>234100</m> and <m>287500</m> and simplify from there:
          <md>
            <mrow>\frac{2518.92}{234100}\amp=\frac{T}{287500}</mrow>
            <mrow>\multiplyleft{234100\cdot287500}\cdot\frac{2518.92}{234100}\amp=\multiplyleft{234100\cdot287500}\cdot\frac{T}{287500}</mrow>
            <mrow>287500\cdot2518.92 \amp=234100T </mrow>
            <mrow>\frac{287500\cdot 2518.92}{234100} \amp=\frac{234100T}{234100}</mrow>
            <mrow>T\amp\approx3093.50</mrow>
          </md>
          The property taxes for a property assessed at
          <m>\$287{,}500</m> are <m>\$3{,}093.50</m>.
        </p>
      </solution>
    </example>

    <exercise label="tylenol-proportion">
      <webwork>
          <pg-code>
            $newUnits = [
              {name=>'mL',conversion=>{factor=>1E-6.m=>3}},
              {name=>'ml',conversion=>{factor=>1E-6.m=>3}},
              {name=>'milliliters',conversion=>{factor=>1E-6.m=>3}},
              {name=>'milliliter',conversion=>{factor=>1E-6.m=>3}},
              {name=>'cc',conversion=>{factor=>1E-6.m=>3}},
            ];
            $answer = NumberWithUnits("1.875 mL", {newUnit=>$newUnits});
          </pg-code>
        <statement>
          <p>
            Infant Tylenol contains
            <quantity>
              <mag>160</mag><unit prefix="milli" base="gram"/>
            </quantity>
            of acetaminophen in each
            <quantity>
              <mag>5</mag><unit prefix="milli" base="liter"/>
            </quantity>
            of liquid.
            If Bao's baby is prescribed
            <quantity>
              <mag>60</mag><unit prefix="milli" base="gram"/>
            </quantity>
            of acetaminophen,
            how many milliliters of liquid should he give the baby?
          </p>
          <p>
            <var name="$answer" width="10"/>
          </p>
        </statement>
        <solution>
          <p>
            Assume Bao should give <m>q</m> milliliters of liquid medicine,
            so we can set up the following proportion:
            <md>
              <mrow>\frac{\text{amount of liquid medicine in mL}}{\text{amount of acetaminophen in mg}}\amp=\frac{\text{amount of liquid medicine in mL}}{\text{amount of acetaminophen in mg}}</mrow>
              <mrow>\frac{5\,\text{mL}}{160\,\text{mg}}\amp=\frac{q\,\text{mL}}{60\,\text{mg}}</mrow>
              <mrow>\frac{5}{160}\amp=\frac{q}{60}</mrow>
              <mrow>\multiplyleft{160\cdot 60}\cdot\frac{5}{160}\amp=\multiplyleft{160\cdot 60}\cdot\frac{q}{60}</mrow>
              <mrow>300\amp=160q</mrow>
              <mrow>\divideunder{300}{160}\amp=\divideunder{160q}{160}</mrow>
              <mrow>q\amp=1.875</mrow>
            </md>
            So to give
            <quantity>
              <mag>60</mag><unit prefix="milli" base="gram"/>
            </quantity>
            of acetaminophen to his baby, Bao should measure out
            <quantity>
              <mag>1.875</mag><unit prefix="milli" base="liter"/>
            </quantity>
            of the liquid medication.
          </p>
        </solution>
      </webwork>
    </exercise>

    <example>
      <statement>
        <p>
          Tagging fish is a means of estimating the size of the population of fish in a lake. A
          sample of fish is taken, tagged, and then redistributed into the lake. Later when another
          sample is taken, some of those fish will have tags. The number of tagged fish are assumed
          to be proportional to the total number of fish. We can look at that relationship from the
          perspective of the entire lake, or just the second sample, and we get two ratios that
          should be proportional.
          <me>
            \frac{\text{number of tagged fish in sample}}{\text{number of fish in sample}}=\frac{\text{number of tagged fish total}}{\text{number of fish total}}
          </me>
        </p>

        <p>
          Assume that <m>90</m> fish are caught and tagged. Once they are redistributed, a sample of
          <m>200</m> fish is taken. Of these, <m>7</m> are tagged. Estimate how many fish total are
          in the lake.
        </p>
      </statement>
      <solution>
        <p>
          Let <m>n</m> be the number of fish in the lake. We can set up a proportion for this
          scenario:
          <md>
            <mrow>\frac{7}{200}\amp=\frac{90}{n}</mrow>
          </md>
          To solve for <m>n</m>, which is in a denominator, we'll need to multiply each side by both
          <m>200</m> and <m>n</m>:
          <md>
            <mrow>\frac{7}{200}\amp=\frac{90}{n}</mrow>
            <mrow>\multiplyleft{200\cdot n}\cdot\frac{7}{200}\amp=\multiplyleft{200\cdot n}\cdot\frac{90}{n}</mrow>
            <mrow>{\cancelhighlight{200}\cdot n}\cdot\frac{7}{\cancelhighlight{200}}\amp=200\cdot\cancelhighlight{n}\cdot\frac{90}{\cancelhighlight{n}}</mrow>
            <mrow>7n\amp=18000</mrow>
            <mrow>\divideunder{7n}{7}\amp=\divideunder{18000}{7}</mrow>
            <mrow>n\amp\approx 2571</mrow>
          </md>
          According to this sample, we can estimate that there are about <m>2571</m> fish in the
          lake.
        </p>
      </solution>
    </example>
  </subsection>

  <subsection>
    <title>Solving Inequalities with Fractions</title>
    <p>
      The technique of clearing denominators also applies to inequalities, not just equations.
    </p>

    <example>
      <statement>
        <p>
          Solve for <m>x</m> in the inequality <m>\frac{3}{4}x-2\gt\frac{4}{5}x</m>. Write the
          solution set in both set-builder notation and interval notation.
        </p>
      </statement>
      <solution>
        <p>
          The LCM of the denominators is <m>20</m>, so we start out multiplying each side of the
          inequality by <m>20</m>.
          <md>
            <mrow>\frac{3}{4}x-2\amp\gt\frac{4}{5}x</mrow>
            <mrow>\multiplyleft{20}\left(\frac{3}{4}x-2\right)\amp\gt\multiplyleft{20}\frac{4}{5}x</mrow>
            <mrow>20\cdot\frac{3}{4}x-20\cdot2\amp\gt16x</mrow>
            <mrow>15x-40\amp\gt16x</mrow>
            <mrow>-40\amp\gt x</mrow>
            <mrow>x\amp\lt-40</mrow>
          </md>
        </p>

        <p>
          The solution set in set-builder notation is <m>\{x\mid x\lt-40\}</m>. And in interval
          notation, it's <m>(-\infty,-40)</m>.
        </p>
      </solution>
    </example>

    <exercise label="inequality-with-clearing-denominators">
      <webwork>
        <pg-code>
          Context("Interval");
          Context()->flags->set(reduceConstants=>0);
          $in = Interval("[-1/14,inf)");
          InequalitySetBuilder::UseVerticalSuchThat();
          Context("InequalitySetBuilder-Only");
          Context()->flags->set(reduceConstants=>0);
          $sb = Compute("{ x | x >= -1/14}");
        </pg-code>
        <statement>
          <p>
            Solve for <m>x</m> in the inequality <m>\frac{4}{7}-\frac{4}{3}x\le\frac{2}{3}</m>.
            Write the solution set in both set-builder notation and interval notation.
          </p>
          <instruction>
            In set-builder notation:
          </instruction>
          <p>
            <var name="$sb" width="20"/>
          </p>
          <instruction>
            In interval notation:
          </instruction>
          <p>
            <var name="$in" width="20"/>
          </p>
        </statement>
        <solution>
          <p>
            The LCM of the denominators is <m>21</m>, so we start out by multiplying each side of
            the inequality by <m>21</m>.
            <md>
              <mrow>\frac{4}{7}-\frac{4}{3}x\amp\le\frac{2}{3}</mrow>
              <mrow>\multiplyleft{21}\left(\frac{4}{7}-\frac{4}{3}x\right)\amp\le\multiplyleft{21}\left(\frac{2}{3}\right)</mrow>
              <mrow>21\left(\frac{4}{7}\right)-21\left(\frac{4}{3}x\right)\amp\le21\left(\frac{2}{3}\right)</mrow>
              <mrow>12-28x\amp\le14</mrow>
              <mrow>-28x\amp\le2</mrow>
              <mrow>\divideunder{-28x}{-28}\amp\highlight{{}\ge{}}\divideunder{2}{-28}</mrow>
              <mrow>x\amp\ge-\frac{1}{14}</mrow>
            </md>
          </p>

          <p>
            Note that when we divided each side of the inequality by <m>-28</m>, the inequality
            symbol reversed direction. The solution set in set-builder notation is
            <m>\left\{x\mid x\ge-\frac{1}{14}\right\}</m>. The solution set in interval notation is
            <m>\left[-\frac{1}{14},\infty\right)</m>.
          </p>
        </solution>
      </webwork>
    </exercise>
  </subsection>

  <reading-questions>
    <exercise label="what-does-lcd-stand-for">
      <statement>
        <p>
          What does LCD stand for? And using different words, explain what it is.
        </p>
      </statement>
      <response/>
    </exercise>
    <exercise label="multiply-which-two-things">
      <statement>
        <p>
          When you clear denominators from an equation like <m>\frac{2}{3}x+5=\frac{2}{7}</m>, you
          will multiply by <m>21</m>. What are the <em>two</em> things that you multiply by
          <m>21</m>? Hint: it is not the two fractions.
        </p>
      </statement>
      <response/>
    </exercise>
    <exercise label="what-is-a-proportional-equation">
      <statement>
        <p>
          What is a proportional equation?
        </p>
      </statement>
      <response/>
    </exercise>
  </reading-questions>

  <exercises>
    <subexercises>
      <title>Review and Warmup</title>
      <exercisegroup cols="3">
        <introduction>
          <p>
            Find the Least Common Multiple of the given integers.
          </p>
        </introduction>
        <exercise label="find-lcm-coprime">
          <webwork xml:id="webwork-find-lcm-coprime">
            <pg-code>
              @a = random_coprime([2..12],[2..12]);
              $lcm = lcm(@a);
            </pg-code>
            <statement>
              <p>
                <m><var name="$a[0]"/></m> and <m><var name="$a[1]"/></m>
              </p>
              <p>
                <var name="$lcm" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise label="find-lcm-coprime-copy">
          <webwork copy="webwork-find-lcm-coprime"/>
        </exercise>
        <exercise label="find-lcm-has-gcf">
          <webwork xml:id="webwork-find-lcm-has-gcf">
            <pg-code>
              @a = random_coprime([2..9],[2..9]);
              @a = map {$_*random(2,9)} (@a);
              $lcm = lcm(@a);
            </pg-code>
            <statement>
              <p>
                <m><var name="$a[0]"/></m> and <m><var name="$a[1]"/></m>
              </p>
              <p>
                <var name="$lcm" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise label="find-lcm-has-gcf-copy">
          <webwork copy="webwork-find-lcm-has-gcf"/>
        </exercise>
        <exercise label="find-lcm-three-values">
          <webwork xml:id="webwork-find-lcm-three-values">
            <pg-code>
              @b = random_pairwise_coprime([2..9],[2..9],[2..9]);
              @a = ($b[1]*$b[2], $b[0]*$b[2], $b[0]*$b[1]);
              $lcm = lcm(@a);
            </pg-code>
            <statement>
              <p>
                <m><var name="$a[0]"/></m>, <m><var name="$a[1]"/></m>, and <m><var name="$a[2]"/></m>
              </p>
              <p>
                <var name="$lcm" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise label="find-lcm-three-values-copy">
          <webwork copy="webwork-find-lcm-three-values"/>
        </exercise>
      </exercisegroup>
    </subexercises>

    <subexercises>
      <title>Skills Practice</title>
      <exercisegroup>
        <title>Linear Equations with Fractions</title>
        <introduction>
          <p>
            Solve the given equation. Practice clearing the denominator(s) as a first step.
          </p>
        </introduction>
        <exercise label="linear-equation-fractions-b">
          <webwork xml:id="webwork-linear-equation-fractions-b">
            <pg-code>
              Context("Fraction");
              ($m,$c) = random_subset(2,2..12);
              $b = Fraction(random_coprime([1..12],[2..12]));
              $left = Formula("$m x + $b");
              $right = Formula("$c");
              $sol = ($c - $b)/$m;
              Context("FiniteSolutionSets");
              $solution = Formula("{$sol}");
              $lcd = ($b->value)[1];
            </pg-code>
            <statement>
              <p>
                <m><var name="$left"/> = <var name="$right"/></m>
              </p>
              <instruction>
                What LCD will you use?
              </instruction>
              <p>
                <var name="$lcd" width="4"/>
              </p>
              <instruction>
                Solve the equation.
              </instruction>
              <p>
                <var name="$solution" width="16"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise label="linear-equation-fractions-b-copy">
          <webwork copy="webwork-linear-equation-fractions-b"/>
        </exercise>
        <exercise label="linear-equation-fractions-c">
          <webwork xml:id="webwork-linear-equation-fractions-c">
            <pg-code>
              Context("Fraction");
              ($m,$b) = random_subset(2,2..12);
              $c = Fraction(random_coprime([1..12],[2..12]));
              $left = Formula("$m x + $b");
              $right = Formula("$c");
              $sol = ($c - $b)/$m;
              Context("FiniteSolutionSets");
              $solution = Formula("{$sol}");
              $lcd = ($c->value)[1];
            </pg-code>
            <statement>
              <p>
                <m><var name="$left"/> = <var name="$right"/></m>
              </p>
              <instruction>
                What LCD will you use?
              </instruction>
              <p>
                <var name="$lcd" width="4"/>
              </p>
              <instruction>
                Solve the equation.
              </instruction>
              <p>
                <var name="$solution" width="16"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise label="linear-equation-fractions-c-copy">
          <webwork copy="webwork-linear-equation-fractions-c"/>
        </exercise>
        <exercise label="linear-equation-fractions-same-denom">
          <webwork xml:id="webwork-linear-equation-fractions-same-denom">
            <pg-code>
              Context("Fraction");
              $den = random(2,12);
              @num = random_pairwise_coprime([1..12],[1..12],[$den]);
              $m = Fraction($num[0]/$den);
              $c = Fraction($num[1]/$den);
              $b = non_zero_random(-12,12);
              $left = Formula("$m x + $b")->reduce;
              $right = Formula("$c");
              $sol = ($c - $b)/$m;
              Context("FiniteSolutionSets");
              $solution = Formula("{$sol}");
              $lcd = $den;
            </pg-code>
            <statement>
              <p>
                <m><var name="$left"/> = <var name="$right"/></m>
              </p>
              <instruction>
                What LCD will you use?
              </instruction>
              <p>
                <var name="$lcd" width="4"/>
              </p>
              <instruction>
                Solve the equation.
              </instruction>
              <p>
                <var name="$solution" width="16"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise label="linear-equation-fractions-same-denom-copy">
          <webwork copy="webwork-linear-equation-fractions-same-denom"/>
        </exercise>
        <exercise label="linear-equation-fractions-rel-prime-denom">
          <webwork xml:id="webwork-linear-equation-fractions-rel-prime-denom">
            <pg-code>
              Context("Fraction");
              @den = random_coprime([2..8],[2..8]);
              @num = (
                (random_coprime([1..8],[$den[0]]))[0],
                (random_coprime([1..8],[$den[1]]))[0]
              );
              $m = Fraction($num[0]/$den[0]);
              $b = list_random(-1,1)*Fraction($num[1]/$den[1]);
              $c = non_zero_random(-8,8);
              $left = Formula("$m x + $b")->reduce;
              $right = Formula("$c");
              $sol = ($c - $b)/$m;
              Context("FiniteSolutionSets");
              $solution = Formula("{$sol}");
              $lcd = lcm(@den);
            </pg-code>
            <statement>
              <p>
                <m><var name="$left"/> = <var name="$right"/></m>
              </p>
              <instruction>
                What LCD will you use?
              </instruction>
              <p>
                <var name="$lcd" width="4"/>
              </p>
              <instruction>
                Solve the equation.
              </instruction>
              <p>
                <var name="$solution" width="16"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise label="linear-equation-fractions-rel-prime-denom-copy">
          <webwork copy="webwork-linear-equation-fractions-rel-prime-denom"/>
        </exercise>
        <exercise label="linear-equation-fractions-gcf-denom">
          <webwork xml:id="webwork-linear-equation-fractions-gcf-denom">
            <pg-code>
              Context("Fraction");
              @den = random_coprime([2..6],[2..6]);
              $k = random(2,6);
              @den = map {$_*$k} (@den);
              @num = (
                (random_coprime([1..8],[$den[0]]))[0],
                (random_coprime([1..8],[$den[1]]))[0]
              );
              $m = Fraction($num[0]/$den[0]);
              $c = Fraction($num[1]/$den[1]);
              $b = non_zero_random(-8,8);
              $left = Formula("$m x + $b")->reduce;
              $right = Formula("$c");
              $sol = ($c - $b)/$m;
              Context("FiniteSolutionSets");
              $solution = Formula("{$sol}");
              $lcd = lcm(@den);
            </pg-code>
            <statement>
              <p>
                <m><var name="$left"/> = <var name="$right"/></m>
              </p>
              <instruction>
                What LCD will you use?
              </instruction>
              <p>
                <var name="$lcd" width="4"/>
              </p>
              <instruction>
                Solve the equation.
              </instruction>
              <p>
                <var name="$solution" width="16"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise label="linear-equation-fractions-gcf-denom-copy">
          <webwork copy="webwork-linear-equation-fractions-gcf-denom"/>
        </exercise>
        <exercise label="linear-equation-fractions-pqr-denom">
          <webwork xml:id="webwork-linear-equation-fractions-pqr-denom">
            <pg-code>
              Context("Fraction");
              @den = random_pairwise_coprime([2..7],[2..7],[2..7]);
              $lcd = lcm(@den);
              @den = map {$lcd/$_} (@den);
              @num = (
                (random_coprime([1..8],[$den[0]]))[0],
                (random_coprime([1..8],[$den[1]]))[0],
                (random_coprime([1..8],[$den[2]]))[0]
              );
              $m = Fraction($num[0]/$den[0]);
              $b = list_random(-1,1)*Fraction($num[1]/$den[1]);
              $c = Fraction($num[2]/$den[2]);
              $left = Formula("$m x + $b")->reduce;
              $right = Formula("$c");
              $sol = ($c - $b)/$m;
              Context("FiniteSolutionSets");
              $solution = Formula("{$sol}");
            </pg-code>
            <statement>
              <p>
                <m><var name="$left"/> = <var name="$right"/></m>
              </p>
              <instruction>
                What LCD will you use?
              </instruction>
              <p>
                <var name="$lcd" width="4"/>
              </p>
              <instruction>
                Solve the equation.
              </instruction>
              <p>
                <var name="$solution" width="16"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise label="linear-equation-fractions-pqr-denom-copy">
          <webwork copy="webwork-linear-equation-fractions-pqr-denom"/>
        </exercise>
        <exercise label="linear-equation-fractions-two-same">
          <webwork xml:id="webwork-linear-equation-fractions-two-same">
            <pg-code>
              Context("Fraction");
              Context()->noreduce('(-x)+y', '(-x)-y');
              do {
                $den = random(2,12);
                @den = random_subset(4,$den,$den,1,1);
                @num = (
                  (random_coprime([1..12],[$den[0]]))[0],
                  (random_coprime([-12..-1,1..12],[$den[1]]))[0],
                  (random_coprime([-12..-1,1..12],[$den[2]]))[0],
                  (random_coprime([-12..-1,1..12],[$den[3]]))[0]
                );
                @c = map{Fraction($num[$_]/$den[$_])} (0..3);
              } until ($c[0] != $c[2]);
              $left = Formula("$c[0] x + $c[1]")->reduce;
              $right = Formula("$c[2] x + $c[3]")->reduce;
              $sol = ($c[3] - $c[1])/($c[0] - $c[2]);
              Context("FiniteSolutionSets");
              $solution = Formula("{$sol}");
              $lcd = lcm(@den);
            </pg-code>
            <statement>
              <p>
                <m><var name="$left"/> = <var name="$right"/></m>
              </p>
              <instruction>
                What LCD will you use?
              </instruction>
              <p>
                <var name="$lcd" width="4"/>
              </p>
              <instruction>
                Solve the equation.
              </instruction>
              <p>
                <var name="$solution" width="16"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise label="linear-equation-fractions-two-same-copy">
          <webwork copy="webwork-linear-equation-fractions-two-same"/>
        </exercise>
        <exercise label="linear-equation-fractions-two-rel-prime">
          <webwork xml:id="webwork-linear-equation-fractions-two-rel-prime">
            <pg-code>
              Context("Fraction");
              Context()->noreduce('(-x)+y', '(-x)-y');
              do {
                @den = random_subset(4,random_coprime([2..12],[2..12]),1,1);
                @num = (
                  (random_coprime([1..12],[$den[0]]))[0],
                  (random_coprime([-12..-1,1..12],[$den[1]]))[0],
                  (random_coprime([-12..-1,1..12],[$den[2]]))[0],
                  (random_coprime([-12..-1,1..12],[$den[3]]))[0]
                );
                @c = map{Fraction($num[$_]/$den[$_])} (0..3);
              } until ($c[0] != $c[2]);
              $left = Formula("$c[0] x + $c[1]")->reduce;
              $right = Formula("$c[2] x + $c[3]")->reduce;
              $sol = ($c[3] - $c[1])/($c[0] - $c[2]);
              Context("FiniteSolutionSets");
              $solution = Formula("{$sol}");
              $lcd = lcm(@den);
            </pg-code>
            <statement>
              <p>
                <m><var name="$left"/> = <var name="$right"/></m>
              </p>
              <instruction>
                What LCD will you use?
              </instruction>
              <p>
                <var name="$lcd" width="4"/>
              </p>
              <instruction>
                Solve the equation.
              </instruction>
              <p>
                <var name="$solution" width="16"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise label="linear-equation-fractions-two-rel-prime-copy">
          <webwork copy="webwork-linear-equation-fractions-two-rel-prime"/>
        </exercise>
        <exercise label="linear-equation-fractions-two-with-gcf">
          <webwork xml:id="webwork-linear-equation-fractions-two-with-gcf">
            <pg-code>
              Context("Fraction");
              Context()->noreduce('(-x)+y', '(-x)-y');
              do {
                @den = random_coprime([2..6],[2..6]);
                $k = random(2,7);
                @den = map{$_*$k}(@den);
                @den = random_subset(4,(@den,1,1));
                @num = (
                  (random_coprime([1..8],[$den[0]]))[0],
                  (random_coprime([-8..-1,1..8],[$den[1]]))[0],
                  (random_coprime([-8..-1,1..8],[$den[2]]))[0],
                  (random_coprime([-8..-1,1..8],[$den[3]]))[0]
                );
                @c = map{Fraction($num[$_]/$den[$_])} (0..3);
              } until ($c[0] != $c[2]);
              $left = Formula("$c[0] x + $c[1]")->reduce;
              $right = Formula("$c[2] x + $c[3]")->reduce;
              $sol = ($c[3] - $c[1])/($c[0] - $c[2]);
              Context("FiniteSolutionSets");
              $solution = Formula("{$sol}");
              $lcd = lcm(@den);
            </pg-code>
            <statement>
              <p>
                <m><var name="$left"/> = <var name="$right"/></m>
              </p>
              <instruction>
                What LCD will you use?
              </instruction>
              <p>
                <var name="$lcd" width="4"/>
              </p>
              <instruction>
                Solve the equation.
              </instruction>
              <p>
                <var name="$solution" width="16"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise label="linear-equation-fractions-two-with-gcf-copy">
          <webwork copy="webwork-linear-equation-fractions-two-with-gcf"/>
        </exercise>
        <exercise label="linear-equation-fractions-three-pqr">
          <webwork xml:id="webwork-linear-equation-fractions-three-pqr">
            <pg-code>
              Context("Fraction");
              Context()->noreduce('(-x)+y', '(-x)-y');
              do {
                @den = random_pairwise_coprime([2..6],[2..6],[2..6]);
                $lcd = lcm(@den);
                @den = map{$lcd/$_}(@den);
                @den = random_subset(4,(@den,1));
                @num = (
                  (random_coprime([1..8],[$den[0]]))[0],
                  (random_coprime([-8..-1,1..8],[$den[1]]))[0],
                  (random_coprime([-8..-1,1..8],[$den[2]]))[0],
                  (random_coprime([-8..-1,1..8],[$den[3]]))[0]
                );
                @c = map{Fraction($num[$_]/$den[$_])} (0..3);
              } until ($c[0] != $c[2]);
              $left = Formula("$c[0] x + $c[1]")->reduce;
              $right = Formula("$c[2] x + $c[3]")->reduce;
              $sol = ($c[3] - $c[1])/($c[0] - $c[2]);
              Context("FiniteSolutionSets");
              $solution = Formula("{$sol}");
            </pg-code>
            <statement>
              <p>
                <m><var name="$left"/> = <var name="$right"/></m>
              </p>
              <instruction>
                What LCD will you use?
              </instruction>
              <p>
                <var name="$lcd" width="4"/>
              </p>
              <instruction>
                Solve the equation.
              </instruction>
              <p>
                <var name="$solution" width="16"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise label="linear-equation-fractions-three-pqr-copy">
          <webwork copy="webwork-linear-equation-fractions-three-pqr"/>
        </exercise>
      </exercisegroup>

      <exercisegroup>
        <title>Linear Inequalities with Fractions</title>
        <introduction>
          <p>
            Solve the given inequality. Practice clearing the denominator(s) as a first step.
          </p>
        </introduction>
        <exercise label="linear-inequality-fractions-b">
          <webwork xml:id="webwork-linear-inequality-fractions-b">
            <pg-code>
              Context("Fraction-NoDecimals");
              ($m,$c) = random_subset(2,2..12);
              $b = Fraction(random_coprime([1..12],[2..12]));
              $left = Formula("$m x + $b");
              $right = Formula("$c");
              $sol = ($c - $b)/$m;
              %cmp = (
                '\gt'  => {interval => ($m > 0) ? "($sol,inf)"  : "(-inf,$sol)", sign => ($m > 0) ? '>'     : '&lt;' },
                '\lt'  => {interval => ($m > 0) ? "(-inf,$sol)" : "($sol,inf)",  sign => ($m > 0) ? '&lt;'  : '>'    },
                '\geq' => {interval => ($m > 0) ? "[$sol,inf)"  : "(-inf,$sol]", sign => ($m > 0) ? '>='    : '&lt;='},
                '\leq' => {interval => ($m > 0) ? "(-inf,$sol]" : "[$sol,inf)",  sign => ($m > 0) ? '&lt;=' : '>='   },
              );
              $texcmp = list_random(lex_sort(keys %cmp));
              $in = Interval($cmp{$texcmp}{interval});
              InequalitySetBuilder::UseVerticalSuchThat();
              Context("InequalitySetBuilder-Only");
              Context()->flags->set(reduceConstants=>0);
              $sb = Compute("{ x | x $cmp{$texcmp}{sign} $sol}");
              $lcd = ($b->value)[1];
            </pg-code>
            <statement>
              <p>
                <m><var name="$left"/> <var name="$texcmp"/> <var name="$right"/></m>
              </p>
              <instruction>
                What LCD will you use?
              </instruction>
              <p>
                <var name="$lcd" width="4"/>
              </p>
              <instruction>
                Write the solution set using set-builder notation.
              </instruction>
              <p>
                <var name="$sb" width="16"/>
              </p>
              <instruction>
                Write the solution set using interval notation.
              </instruction>
              <p>
                <var name="$in" width="16"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise label="linear-inequality-fractions-c">
          <webwork xml:id="webwork-linear-inequality-fractions-c">
            <pg-code>
              Context("Fraction-NoDecimals");
              ($m,$b) = random_subset(2,2..12);
              $c = Fraction(random_coprime([1..12],[2..12]));
              $left = Formula("$m x + $b");
              $right = Formula("$c");
              $sol = ($c - $b)/$m;
              %cmp = (
                '\gt'  => {interval => ($m > 0) ? "($sol,inf)"  : "(-inf,$sol)", sign => ($m > 0) ? '>'     : '&lt;' },
                '\lt'  => {interval => ($m > 0) ? "(-inf,$sol)" : "($sol,inf)",  sign => ($m > 0) ? '&lt;'  : '>'    },
                '\geq' => {interval => ($m > 0) ? "[$sol,inf)"  : "(-inf,$sol]", sign => ($m > 0) ? '>='    : '&lt;='},
                '\leq' => {interval => ($m > 0) ? "(-inf,$sol]" : "[$sol,inf)",  sign => ($m > 0) ? '&lt;=' : '>='   },
              );
              $texcmp = list_random(lex_sort(keys %cmp));
              $in = Interval($cmp{$texcmp}{interval});
              InequalitySetBuilder::UseVerticalSuchThat();
              Context("InequalitySetBuilder-Only");
              Context()->flags->set(reduceConstants=>0);
              $sb = Compute("{ x | x $cmp{$texcmp}{sign} $sol}");
              $lcd = ($c->value)[1];
            </pg-code>
            <statement>
              <p>
                <m><var name="$left"/> <var name="$texcmp"/> <var name="$right"/></m>
              </p>
              <instruction>
                What LCD will you use?
              </instruction>
              <p>
                <var name="$lcd" width="4"/>
              </p>
              <instruction>
                Write the solution set using set-builder notation.
              </instruction>
              <p>
                <var name="$sb" width="16"/>
              </p>
              <instruction>
                Write the solution set using interval notation.
              </instruction>
              <p>
                <var name="$in" width="16"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise label="linear-inequality-fractions-same-denom">
          <webwork xml:id="webwork-linear-inequality-fractions-same-denom">
            <pg-code>
              Context("Fraction-NoDecimals");
              $den = random(2,12);
              @num = random_pairwise_coprime([1..12],[1..12],[$den]);
              $m = Fraction($num[0]/$den);
              $c = Fraction($num[1]/$den);
              $b = non_zero_random(-12,12);
              $left = Formula("$m x + $b")->reduce;
              $right = Formula("$c");
              $sol = ($c - $b)/$m;
              %cmp = (
                '\gt'  => {interval => ($m > 0) ? "($sol,inf)"  : "(-inf,$sol)", sign => ($m > 0) ? '>'     : '&lt;' },
                '\lt'  => {interval => ($m > 0) ? "(-inf,$sol)" : "($sol,inf)",  sign => ($m > 0) ? '&lt;'  : '>'    },
                '\geq' => {interval => ($m > 0) ? "[$sol,inf)"  : "(-inf,$sol]", sign => ($m > 0) ? '>='    : '&lt;='},
                '\leq' => {interval => ($m > 0) ? "(-inf,$sol]" : "[$sol,inf)",  sign => ($m > 0) ? '&lt;=' : '>='   },
              );
              $texcmp = list_random(lex_sort(keys %cmp));
              $in = Interval($cmp{$texcmp}{interval});
              InequalitySetBuilder::UseVerticalSuchThat();
              Context("InequalitySetBuilder-Only");
              Context()->flags->set(reduceConstants=>0);
              $sb = Compute("{ x | x $cmp{$texcmp}{sign} $sol}");
              $lcd = $den;
            </pg-code>
            <statement>
              <p>
                <m><var name="$left"/> <var name="$texcmp"/> <var name="$right"/></m>
              </p>
              <instruction>
                What LCD will you use?
              </instruction>
              <p>
                <var name="$lcd" width="4"/>
              </p>
              <instruction>
                Write the solution set using set-builder notation.
              </instruction>
              <p>
                <var name="$sb" width="16"/>
              </p>
              <instruction>
                Write the solution set using interval notation.
              </instruction>
              <p>
                <var name="$in" width="16"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise label="linear-inequality-fractions-rel-prime-denom">
          <webwork xml:id="webwork-linear-inequality-fractions-rel-prime-denom">
            <pg-code>
              Context("Fraction-NoDecimals");
              @den = random_coprime([2..8],[2..8]);
              @num = (
                (random_coprime([1..8],[$den[0]]))[0],
                (random_coprime([1..8],[$den[1]]))[0]
              );
              $m = Fraction($num[0]/$den[0]);
              $b = list_random(-1,1)*Fraction($num[1]/$den[1]);
              $c = non_zero_random(-8,8);
              $left = Formula("$m x + $b")->reduce;
              $right = Formula("$c");
              $sol = ($c - $b)/$m;
              %cmp = (
                '\gt'  => {interval => ($m > 0) ? "($sol,inf)"  : "(-inf,$sol)", sign => ($m > 0) ? '>'     : '&lt;' },
                '\lt'  => {interval => ($m > 0) ? "(-inf,$sol)" : "($sol,inf)",  sign => ($m > 0) ? '&lt;'  : '>'    },
                '\geq' => {interval => ($m > 0) ? "[$sol,inf)"  : "(-inf,$sol]", sign => ($m > 0) ? '>='    : '&lt;='},
                '\leq' => {interval => ($m > 0) ? "(-inf,$sol]" : "[$sol,inf)",  sign => ($m > 0) ? '&lt;=' : '>='   },
              );
              $texcmp = list_random(lex_sort(keys %cmp));
              $in = Interval($cmp{$texcmp}{interval});
              InequalitySetBuilder::UseVerticalSuchThat();
              Context("InequalitySetBuilder-Only");
              Context()->flags->set(reduceConstants=>0);
              $sb = Compute("{ x | x $cmp{$texcmp}{sign} $sol}");
              $lcd = lcm(@den);
            </pg-code>
            <statement>
              <p>
                <m><var name="$left"/> <var name="$texcmp"/> <var name="$right"/></m>
              </p>
              <instruction>
                What LCD will you use?
              </instruction>
              <p>
                <var name="$lcd" width="4"/>
              </p>
              <instruction>
                Write the solution set using set-builder notation.
              </instruction>
              <p>
                <var name="$sb" width="16"/>
              </p>
              <instruction>
                Write the solution set using interval notation.
              </instruction>
              <p>
                <var name="$in" width="16"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise label="linear-inequality-fractions-gcf-denom">
          <webwork xml:id="webwork-linear-inequality-fractions-gcf-denom">
            <pg-code>
              Context("Fraction-NoDecimals");
              @den = random_coprime([2..6],[2..6]);
              $k = random(2,6);
              @den = map {$_*$k} (@den);
              @num = (
                (random_coprime([1..8],[$den[0]]))[0],
                (random_coprime([1..8],[$den[1]]))[0]
              );
              $m = Fraction($num[0]/$den[0]);
              $c = Fraction($num[1]/$den[1]);
              $b = non_zero_random(-8,8);
              $left = Formula("$m x + $b")->reduce;
              $right = Formula("$c");
              $sol = ($c - $b)/$m;
              %cmp = (
                '\gt'  => {interval => ($m > 0) ? "($sol,inf)"  : "(-inf,$sol)", sign => ($m > 0) ? '>'     : '&lt;' },
                '\lt'  => {interval => ($m > 0) ? "(-inf,$sol)" : "($sol,inf)",  sign => ($m > 0) ? '&lt;'  : '>'    },
                '\geq' => {interval => ($m > 0) ? "[$sol,inf)"  : "(-inf,$sol]", sign => ($m > 0) ? '>='    : '&lt;='},
                '\leq' => {interval => ($m > 0) ? "(-inf,$sol]" : "[$sol,inf)",  sign => ($m > 0) ? '&lt;=' : '>='   },
              );
              $texcmp = list_random(lex_sort(keys %cmp));
              $in = Interval($cmp{$texcmp}{interval});
              InequalitySetBuilder::UseVerticalSuchThat();
              Context("InequalitySetBuilder-Only");
              Context()->flags->set(reduceConstants=>0);
              $sb = Compute("{ x | x $cmp{$texcmp}{sign} $sol}");
              $lcd = lcm(@den);
            </pg-code>
            <statement>
              <p>
                <m><var name="$left"/> <var name="$texcmp"/> <var name="$right"/></m>
              </p>
              <instruction>
                What LCD will you use?
              </instruction>
              <p>
                <var name="$lcd" width="4"/>
              </p>
              <instruction>
                Write the solution set using set-builder notation.
              </instruction>
              <p>
                <var name="$sb" width="16"/>
              </p>
              <instruction>
                Write the solution set using interval notation.
              </instruction>
              <p>
                <var name="$in" width="16"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise label="linear-inequality-fractions-pqr-denom">
          <webwork xml:id="webwork-linear-inequality-fractions-pqr-denom">
            <pg-code>
              Context("Fraction-NoDecimals");
              @den = random_pairwise_coprime([2..7],[2..7],[2..7]);
              $lcd = lcm(@den);
              @den = map {$lcd/$_} (@den);
              @num = (
                (random_coprime([1..8],[$den[0]]))[0],
                (random_coprime([1..8],[$den[1]]))[0],
                (random_coprime([1..8],[$den[2]]))[0]
              );
              $m = Fraction($num[0]/$den[0]);
              $b = list_random(-1,1)*Fraction($num[1]/$den[1]);
              $c = Fraction($num[2]/$den[2]);
              $left = Formula("$m x + $b")->reduce;
              $right = Formula("$c");
              $sol = ($c - $b)/$m;
              %cmp = (
                '\gt'  => {interval => ($m > 0) ? "($sol,inf)"  : "(-inf,$sol)", sign => ($m > 0) ? '>'     : '&lt;' },
                '\lt'  => {interval => ($m > 0) ? "(-inf,$sol)" : "($sol,inf)",  sign => ($m > 0) ? '&lt;'  : '>'    },
                '\geq' => {interval => ($m > 0) ? "[$sol,inf)"  : "(-inf,$sol]", sign => ($m > 0) ? '>='    : '&lt;='},
                '\leq' => {interval => ($m > 0) ? "(-inf,$sol]" : "[$sol,inf)",  sign => ($m > 0) ? '&lt;=' : '>='   },
              );
              $texcmp = list_random(lex_sort(keys %cmp));
              $in = Interval($cmp{$texcmp}{interval});
              InequalitySetBuilder::UseVerticalSuchThat();
              Context("InequalitySetBuilder-Only");
              Context()->flags->set(reduceConstants=>0);
              $sb = Compute("{ x | x $cmp{$texcmp}{sign} $sol}");
            </pg-code>
            <statement>
              <p>
                <m><var name="$left"/> <var name="$texcmp"/> <var name="$right"/></m>
              </p>
              <instruction>
                What LCD will you use?
              </instruction>
              <p>
                <var name="$lcd" width="4"/>
              </p>
              <instruction>
                Write the solution set using set-builder notation.
              </instruction>
              <p>
                <var name="$sb" width="16"/>
              </p>
              <instruction>
                Write the solution set using interval notation.
              </instruction>
              <p>
                <var name="$in" width="16"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise label="linear-inequality-fractions-two-same">
          <webwork xml:id="webwork-linear-inequality-fractions-two-same">
            <pg-code>
              Context("Fraction-NoDecimals");
              Context()->noreduce('(-x)+y', '(-x)-y');
              do {
                $den = random(2,12);
                @den = random_subset(4,$den,$den,1,1);
                @num = (
                  (random_coprime([1..12],[$den[0]]))[0],
                  (random_coprime([-12..-1,1..12],[$den[1]]))[0],
                  (random_coprime([-12..-1,1..12],[$den[2]]))[0],
                  (random_coprime([-12..-1,1..12],[$den[3]]))[0]
                );
                @c = map{Fraction($num[$_]/$den[$_])} (0..3);
              } until ($c[0] != $c[2]);
              $left = Formula("$c[0] x + $c[1]")->reduce;
              $right = Formula("$c[2] x + $c[3]")->reduce;
              $sol = ($c[3] - $c[1])/($c[0] - $c[2]);
              %cmp = (
                '\gt'  => {interval => ($m > 0) ? "($sol,inf)"  : "(-inf,$sol)", sign => ($m > 0) ? '>'     : '&lt;' },
                '\lt'  => {interval => ($m > 0) ? "(-inf,$sol)" : "($sol,inf)",  sign => ($m > 0) ? '&lt;'  : '>'    },
                '\geq' => {interval => ($m > 0) ? "[$sol,inf)"  : "(-inf,$sol]", sign => ($m > 0) ? '>='    : '&lt;='},
                '\leq' => {interval => ($m > 0) ? "(-inf,$sol]" : "[$sol,inf)",  sign => ($m > 0) ? '&lt;=' : '>='   },
              );
              $texcmp = list_random(lex_sort(keys %cmp));
              $in = Interval($cmp{$texcmp}{interval});
              InequalitySetBuilder::UseVerticalSuchThat();
              Context("InequalitySetBuilder-Only");
              Context()->flags->set(reduceConstants=>0);
              $sb = Compute("{ x | x $cmp{$texcmp}{sign} $sol}");
              $lcd = lcm(@den);
            </pg-code>
            <statement>
              <p>
                <m><var name="$left"/> <var name="$texcmp"/> <var name="$right"/></m>
              </p>
              <instruction>
                What LCD will you use?
              </instruction>
              <p>
                <var name="$lcd" width="4"/>
              </p>
              <instruction>
                Write the solution set using set-builder notation.
              </instruction>
              <p>
                <var name="$sb" width="16"/>
              </p>
              <instruction>
                Write the solution set using interval notation.
              </instruction>
              <p>
                <var name="$in" width="16"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise label="linear-inequality-fractions-two-rel-prime">
          <webwork xml:id="webwork-linear-inequality-fractions-two-rel-prime">
            <pg-code>
              Context("Fraction-NoDecimals");
              Context()->noreduce('(-x)+y', '(-x)-y');
              do {
                @den = random_subset(4,random_coprime([2..12],[2..12]),1,1);
                @num = (
                  (random_coprime([1..12],[$den[0]]))[0],
                  (random_coprime([-12..-1,1..12],[$den[1]]))[0],
                  (random_coprime([-12..-1,1..12],[$den[2]]))[0],
                  (random_coprime([-12..-1,1..12],[$den[3]]))[0]
                );
                @c = map{Fraction($num[$_]/$den[$_])} (0..3);
              } until ($c[0] != $c[2]);
              $left = Formula("$c[0] x + $c[1]")->reduce;
              $right = Formula("$c[2] x + $c[3]")->reduce;
              $sol = ($c[3] - $c[1])/($c[0] - $c[2]);
              %cmp = (
                '\gt'  => {interval => ($m > 0) ? "($sol,inf)"  : "(-inf,$sol)", sign => ($m > 0) ? '>'     : '&lt;' },
                '\lt'  => {interval => ($m > 0) ? "(-inf,$sol)" : "($sol,inf)",  sign => ($m > 0) ? '&lt;'  : '>'    },
                '\geq' => {interval => ($m > 0) ? "[$sol,inf)"  : "(-inf,$sol]", sign => ($m > 0) ? '>='    : '&lt;='},
                '\leq' => {interval => ($m > 0) ? "(-inf,$sol]" : "[$sol,inf)",  sign => ($m > 0) ? '&lt;=' : '>='   },
              );
              $texcmp = list_random(lex_sort(keys %cmp));
              $in = Interval($cmp{$texcmp}{interval});
              InequalitySetBuilder::UseVerticalSuchThat();
              Context("InequalitySetBuilder-Only");
              Context()->flags->set(reduceConstants=>0);
              $sb = Compute("{ x | x $cmp{$texcmp}{sign} $sol}");
              $lcd = lcm(@den);
            </pg-code>
            <statement>
              <p>
                <m><var name="$left"/> <var name="$texcmp"/> <var name="$right"/></m>
              </p>
              <instruction>
                What LCD will you use?
              </instruction>
              <p>
                <var name="$lcd" width="4"/>
              </p>
              <instruction>
                Write the solution set using set-builder notation.
              </instruction>
              <p>
                <var name="$sb" width="16"/>
              </p>
              <instruction>
                Write the solution set using interval notation.
              </instruction>
              <p>
                <var name="$in" width="16"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise label="linear-inequality-fractions-two-with-gcf">
          <webwork xml:id="webwork-linear-inequality-fractions-two-with-gcf">
            <pg-code>
              Context("Fraction-NoDecimals");
              Context()->noreduce('(-x)+y', '(-x)-y');
              do {
                @den = random_coprime([2..6],[2..6]);
                $k = random(2,7);
                @den = map{$_*$k}(@den);
                @den = random_subset(4,(@den,1,1));
                @num = (
                  (random_coprime([1..8],[$den[0]]))[0],
                  (random_coprime([-8..-1,1..8],[$den[1]]))[0],
                  (random_coprime([-8..-1,1..8],[$den[2]]))[0],
                  (random_coprime([-8..-1,1..8],[$den[3]]))[0]
                );
                @c = map{Fraction($num[$_]/$den[$_])} (0..3);
              } until ($c[0] != $c[2]);
              $left = Formula("$c[0] x + $c[1]")->reduce;
              $right = Formula("$c[2] x + $c[3]")->reduce;
              $sol = ($c[3] - $c[1])/($c[0] - $c[2]);
              %cmp = (
                '\gt'  => {interval => ($m > 0) ? "($sol,inf)"  : "(-inf,$sol)", sign => ($m > 0) ? '>'     : '&lt;' },
                '\lt'  => {interval => ($m > 0) ? "(-inf,$sol)" : "($sol,inf)",  sign => ($m > 0) ? '&lt;'  : '>'    },
                '\geq' => {interval => ($m > 0) ? "[$sol,inf)"  : "(-inf,$sol]", sign => ($m > 0) ? '>='    : '&lt;='},
                '\leq' => {interval => ($m > 0) ? "(-inf,$sol]" : "[$sol,inf)",  sign => ($m > 0) ? '&lt;=' : '>='   },
              );
              $texcmp = list_random(lex_sort(keys %cmp));
              Context("Fraction-NoDecimals");
              $in = Interval($cmp{$texcmp}{interval});
              InequalitySetBuilder::UseVerticalSuchThat();
              Context("InequalitySetBuilder-Only");
              Context()->flags->set(reduceConstants=>0);
              $sb = Compute("{ x | x $cmp{$texcmp}{sign} $sol}");
              $lcd = lcm(@den);
            </pg-code>
            <statement>
              <p>
                <m><var name="$left"/> <var name="$texcmp"/> <var name="$right"/></m>
              </p>
              <instruction>
                What LCD will you use?
              </instruction>
              <p>
                <var name="$lcd" width="4"/>
              </p>
              <instruction>
                Write the solution set using set-builder notation.
              </instruction>
              <p>
                <var name="$sb" width="16"/>
              </p>
              <instruction>
                Write the solution set using interval notation.
              </instruction>
              <p>
                <var name="$in" width="16"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise label="linear-inequality-fractions-three-pqr">
          <webwork xml:id="webwork-linear-inequality-fractions-three-pqr">
            <pg-code>
              Context("Fraction-NoDecimals");
              Context()->noreduce('(-x)+y', '(-x)-y');
              do {
                @den = random_pairwise_coprime([2..6],[2..6],[2..6]);
                $lcd = lcm(@den);
                @den = map{$lcd/$_}(@den);
                @den = random_subset(4,(@den,1));
                @num = (
                  (random_coprime([1..8],[$den[0]]))[0],
                  (random_coprime([-8..-1,1..8],[$den[1]]))[0],
                  (random_coprime([-8..-1,1..8],[$den[2]]))[0],
                  (random_coprime([-8..-1,1..8],[$den[3]]))[0]
                );
                @c = map{Fraction($num[$_]/$den[$_])} (0..3);
              } until ($c[0] != $c[2]);
              $left = Formula("$c[0] x + $c[1]")->reduce;
              $right = Formula("$c[2] x + $c[3]")->reduce;
              $sol = ($c[3] - $c[1])/($c[0] - $c[2]);
              %cmp = (
                '\gt'  => {interval => ($m > 0) ? "($sol,inf)"  : "(-inf,$sol)", sign => ($m > 0) ? '>'     : '&lt;' },
                '\lt'  => {interval => ($m > 0) ? "(-inf,$sol)" : "($sol,inf)",  sign => ($m > 0) ? '&lt;'  : '>'    },
                '\geq' => {interval => ($m > 0) ? "[$sol,inf)"  : "(-inf,$sol]", sign => ($m > 0) ? '>='    : '&lt;='},
                '\leq' => {interval => ($m > 0) ? "(-inf,$sol]" : "[$sol,inf)",  sign => ($m > 0) ? '&lt;=' : '>='   },
              );
              $texcmp = list_random(lex_sort(keys %cmp));
              $in = Interval($cmp{$texcmp}{interval});
              InequalitySetBuilder::UseVerticalSuchThat();
              Context("InequalitySetBuilder-Only");
              Context()->flags->set(reduceConstants=>0);
              $sb = Compute("{ x | x $cmp{$texcmp}{sign} $sol}");
            </pg-code>
            <statement>
              <p>
                <m><var name="$left"/> <var name="$texcmp"/> <var name="$right"/></m>
              </p>
              <instruction>
                What LCD will you use?
              </instruction>
              <p>
                <var name="$lcd" width="4"/>
              </p>
              <instruction>
                Write the solution set using set-builder notation.
              </instruction>
              <p>
                <var name="$sb" width="16"/>
              </p>
              <instruction>
                Write the solution set using interval notation.
              </instruction>
              <p>
                <var name="$in" width="16"/>
              </p>
            </statement>
          </webwork>
        </exercise>
      </exercisegroup>
    </subexercises>

    <subexercises>
      <title>Applications</title>
      <exercise label="running-with-fractions">
        <webwork>
          <pg-macros>
            <macro-file>randomPerson.pl</macro-file>
          </pg-macros>
          <pg-code>
            $p = randomPerson();
            $b = random(10,20);
            do {
              $m = random(5,5.7,0.01);
              $d = random(3,6);
              $n = int($m*$d);
              $m = $n/$d;
              $c = random(60,100,5);
              $sol = ($c - $b)/$m;
              ($n,$d) = map{$_/gcd($n,$d)} ($n,$d);
            } until ($d >= 3 &amp;&amp; $m > 4.5 &amp;&amp; $sol != int($sol));
            $num = NumberWithUnits("$n m");
            $den = NumberWithUnits("$d s");
            $initial = NumberWithUnits("$b m");
            $final = NumberWithUnits("$c m");
            Context()->flags->set(reduceConstants => 0);
            $answer = FormulaWithUnits("$sol s");
          </pg-code>
          <statement>
            <p>
              <var name="$p"/> is running on a track. We start the clock as <var name="$p->they"/>
              <var name="$p->verb('pass')"/> the <var name="$initial"/> mark, and
              <var name="$p->they"/> <var name="$p->are"/> running
              <var name="$num"/> every <var name="$den"/>. How long does it take for
              <var name="$p"/> to reach the <var name="$final"/> mark?
            </p>
            <p>
              <var name="$answer" width="5"/>
            </p>
          </statement>
        </webwork>
      </exercise>
      <exercise label="gas-mileage-with-fractions">
        <webwork>
          <pg-macros>
            <macro-file>randomPerson.pl</macro-file>
          </pg-macros>
          <pg-code>
            $name = randomPerson();
            $initial = random(12, 18);
            $start = NumberWithUnits("$initial gal");
            Context("Fraction");
            @rates = map {Fraction(2/(2*$_-1))} (20..25);
            push @rates, map {Fraction(3/(3*$_-1))} (20..25);
            push @rates, map {Fraction(3/(3*$_+1))} (20..25);
            push @rates, map {Fraction(4/(4*$_-1))} (20..25);
            push @rates, map {Fraction(4/(4*$_+1))} (20..25);
            $rate = list_random(@rates);
            $speed = FormulaWithUnits("$rate gal");
            $final = 1;
            $end = NumberWithUnits("$final gal");
            $solution = ($initial - $final)/$rate;
            $distance = FormulaWithUnits("$solution mi");
          </pg-code>
          <statement>
            <p>
              <var name="$name"/> filled the gas tank in <var name="$name->possessive"/> car to
              <m><var name="$start"/></m>. When the tank reaches <m><var name="$end"/></m>, the low
              gas light will come on. On average, <var name="$name"/>'s car uses
              <m><var name="$speed"/></m> per mile driven. How many miles will <var name="$name"/>'s
              car be able to drive before the low gas light comes on?
            </p>
            <p>
              <var name="$distance" width="20"/>
            </p>
          </statement>
        </webwork>
      </exercise>
      <exercise label="webwork-tree-height-solve-equation-copy">
        <webwork copy="webwork-tree-height-solve-equation"/>
      </exercise>
      <exercise label="tire-pressure-with-fractions">
        <webwork>
          <pg-code>
            $initial = random(20,25);
            $start = NumberWithUnits("$initial psi");
            Context("Fraction");
            $rate = list_random(
              [3,2], [5,2], [4,3],  [5,3],  [7,3],  [8,3],  [5,4], [7,4],  [9,4], [11,4],  [6,5],
              [7,5], [8,5], [9,5], [11,5], [12,5], [13,5], [14,5], [7,6], [11,6], [13,6], [17,6]
            );
            $rate = Fraction(($rate->[0])/($rate->[1]));
            $speed = FormulaWithUnits("$rate psi/min");
            $final = random(30,34);
            $end = NumberWithUnits("$final psi");
            $solution = ($final - $initial)/$rate;
            $time = FormulaWithUnits("$solution min");
          </pg-code>
          <statement>
            <p>
              One of the tires on your car looks a little flat. You measure its air pressure
              and are alarmed to see it so low at <m><var name="$start"/></m>. You have a
              portable device that can pump air into the tire increasing the pressure at a rate of
              <m><var name="$speed"/></m>. How long will it take to fill the tire to the
              manual's recommended pressure of <m><var name="$end"/></m>?
            </p>
            <p>
              <var name="$time" width="20"/>
            </p>
          </statement>
        </webwork>
      </exercise>
      <exercise label="grade-average">
        <webwork>
          <pg-macros>
            <macro-file>randomPerson.pl</macro-file>
          </pg-macros>
          <pg-code>
            $p = randomPerson();
            do {
              $homework = random(80,100);
              $midterm = random(70,90);
              $goal = list_random(70,80,90);
              $sol = 3*($goal - ($homework/2 + $midterm/6));
            } until ($goal > 0 &amp;&amp; $goal &lt; 100);
          </pg-code>
          <statement>
            <p>
              In one college math course, the final grade (out of <m>100</m> points) is calculated
              by adding together one-half of the homework average, one-sixth of the midterm score,
              and one-third of the final exam score.
            </p>
            <p>
              <var name="$p"/> has <var name="$homework"/> for <var name="$p->their"/> homework
              average and <var name="$midterm"/> for <var name="$p->their"/> midterm score.
              <var name="$p->Their"/> goal is to finish the course with a final grade of
              <var name="$goal"/>. What must <var name="$p->they"/> score on the final exam?
            </p>
            <p>
              <var name="$sol" width="5"/>
            </p>
          </statement>
        </webwork>
      </exercise>
      <exercise label="grade-average2">
        <webwork>
          <pg-macros>
            <macro-file>randomPerson.pl</macro-file>
          </pg-macros>
          <pg-code>
            $p = randomPerson();
            do {
              $homework = random(60,90);
              $project = random(80,100);
              $midterm = random(70,90);
              $goal = list_random(70,80,90);
              $sol = 4*($goal - ($homework/3 + $project/6 + $midterm/4));
            } until ($goal > 0 &amp;&amp; $goal &lt; 100);
          </pg-code>
          <statement>
            <p>
              In one college math course, the final grade (out of <m>100</m> points) is calculated
              by adding together one-third of the homework average, one-sixth of the class project
              score, one-fourth of the midterm score, and one-fourth of the final exam score.
            </p>
            <p>
              <var name="$p"/> has <var name="$homework"/> for <var name="$p->their"/> homework
              average and <var name="$midterm"/> for <var name="$p->their"/> midterm score.
              <var name="$p->Their"/> goal is to finish the course with a final grade of
              <var name="$goal"/>. What must <var name="$p->they"/> score on the final exam?
            </p>
            <p>
              <var name="$sol" width="16"/>
            </p>
          </statement>
        </webwork>
      </exercise>
      <exercise label="soup-recipe">
        <webwork>
          <pg-code>
            $recipe = random(10,20,5);
            ($volA, $volB) = random_subset(2, 1, 1.25, 1.5, 1.75, 2.25, 2.5, 2.75);
            $ans = $volB*$recipe/$volA;
            $answer = NumberWithUnits("$ans g");
          </pg-code>
          <statement>
            <p>
              An old cookbook has a recipe for soup that uses <m><var name="$recipe"/></m> g of
              flour for thickener. The recipe makes <m><var name="$volA"/></m> gal of soup, but
              you are asjusting it to make only <m><var name="$volB"/></m> gal. How much flour
              should you use?
            </p>
            <p>
              <var name="$answer" width="16"/>
            </p>
          </statement>
        </webwork>
      </exercise>
      <exercise label="garam-masala-recipe">
        <webwork>
          <pg-code>
            ($recipeA, $recipeB) = random_subset(2, 1, 1.25, 1.33, 1.5, 1.67, 1.75, 2, 2.25, 2.33, 2.5, 2.67, 2.75);
            $volA = random(3,4);
            $ans = $recipeB*$volA/$recipeA;
            $tbsp = {name => 'tbsp', conversion => {factor =>1.4787*10**-5, m=>3}};
            $answer = NumberWithUnits("$ans tbsp", {newUnit=>$tbsp});
            $spice = list_random("cumin", "coriander", "cardamom", "black pepper", "cinnamon", "cloves", "nutmeg");
          </pg-code>
          <statement>
            <p>
              An internet recipe for <m><var name="$volA"/></m> tbsp of garam masala calls for 
              <m><var name="$recipeA"/></m> tbsp of ground <var name="$spice"/>. You want to use up
              the last of your ground <var name="$spice"/> supply, which is
              <m><var name="$recipeB"/></m> tbsp. Assuming you have enough of all of the other
              ingredients, how much garam masala will you make?
            </p>
            <p>
              <var name="$answer" width="16"/>
            </p>
          </statement>
        </webwork>
      </exercise>
      <exercise label="apples-cost">
        <webwork>
          <pg-macros>
            <macro-file>randomPerson.pl</macro-file>
          </pg-macros>
          <pg-code>
            @p = randomPerson(n => 2);
            @w = (random(50,70), random(80,90));
            do {
              $price = random(0.7,1.2,0.01);
            } until ($price != 1);
            Context("Currency");
            @c = map {Currency($_*$price)} (@w);
          </pg-code>
          <statement>
            <p>
              <var name="$p[0]"/> and <var name="$p[1]"/> went to the weekend market to buy apples
              in bulk for a school event, canning lots of applesauce. <var name="$p[0]"/> bought
              <var name="$w[0]"/> lb of apples and paid <var name="$c[0]"/>. <var name="$p[1]"/>
              has bagged <var name="$p[1]->their"/> apples and has <var name="$w[1]"/> lb of apples
              ready. How much will it <var name="$p[1]"/>'s bag of apples cost?
            </p>
            <p>
              <var name="$c[1]" width="16"/>
            </p>
          </statement>
        </webwork>
      </exercise>
      <exercise label="architect-model">
        <webwork>
          <pg-macros>
            <macro-file>randomPerson.pl</macro-file>
          </pg-macros>
          <pg-code>
            $p = randomPerson();
            $building = random(30,80,2);
            $model = random(2,10);
            Context("Fraction");
            $ans = $model/($building)*5.5;
            $answer = FormulaWithUnits("$ans in");
            @aux[0] = 5.5*$model;
          </pg-code>
          <statement>
            <p>
              <var name="$p"/> is an architect and <var name="$p->they"/> <var name="$p->are"/>
              making a scale model of a building. The actual building will be
              <m><var name="$building"/></m> ft tall. In the model, the height of the building will
              be <m><var name="$model"/></m> in tall and there will be a little model person
              standing next to the building. How tall should <var name="$p"/> make the model of that
              person who is meant to represent a <m>5</m> ft <m>6</m> in tall person?
            </p>
            <p>
              <var name="$answer" width="16"/>
            </p>
          </statement>
          <solution>
            <p>
              Let <m>h</m> be the height of the person in <var name="$p"/>'s model, which we'll
              measure in inches. We'll create a proportional equation that compares the building and
              person's heights in the model to their heights in real life:
              <md>
                <mrow>\frac{\text{height of model building in inches}}{\text{height of actual building in feet}}\amp=\frac{\text{height of model person in inches}}{\text{height of actual person in feet}}</mrow>
                <mrow>\frac{<var name="$model"/>\,\text{in}}{<var name="$building"/>\,\text{ft}}\amp=\frac{h\,\text{in}}{5\,\text{ft}\,6\text{in}}</mrow>
              </md>
              Before we can just eliminate the units, we'll need to convert
              <quantity>
                <mag>5</mag><unit base="foot"/>
              </quantity><nbsp/><quantity>
                <mag>6</mag><unit base="inch"/>
              </quantity>
              to feet:
              <me>
                \frac{2\,\text{in}}{30\,\text{ft}}=\frac{h\,\text{in}}{5.5\,\text{ft}}
              </me>
              Now we can remove the units and continue solving:
              <md>
                <mrow>\frac{<var name="$model"/>}{<var name="$building"/>}\amp=\frac{h}{5.5}</mrow>
                <mrow>\multiplyleft{<var name="$building"/>\cdot5.5}\frac{<var name="$model"/>}{<var name="$building"/>}\amp=\frac{h}{5.5}\multiplyright{<var name="$building"/>\cdot5.5}</mrow>
                <mrow>5.5\cdot <var name="$model"/> \amp= <var name="$building"/>h</mrow>
                <mrow><var name="$aux[0]"/> \amp= <var name="$building"/>h</mrow>
                <mrow>h\amp\approx <var name="$ans"/></mrow>
              </md>
              <var name="$p"/> should make the model be <m><var name="$answer"/></m> tall.
            </p>
          </solution>
        </webwork>
      </exercise>
      <exercise label="rocky-mountain-elk">
        <webwork>
          <pg-code>
            $tt = random(30,40);
            $sp = $tt + random(5,12);
            $st = random(8,15);
            $ans = Round($tt*$sp/$st);
          </pg-code>
          <statement>
            <p>
              To estimate the health of the Rocky Mountain elk population in the Wenaha Wildlife
              Area, the Oregon Department of Fish and Wildlife caught, tagged, and released
              <m><var name="$tt" /></m> Rocky Mountain elk. A month later, they returned and
              observed <m><var name="$sp" /></m> Rocky Mountain elk, <m><var name="$st" /></m> of
              which had tags. Approximately how many Rocky Mountain elk are in the Wenaha Wildlife
              Area?
            </p>
            <p>
              <var name="$ans" width="16"/>
            </p>
          </statement>
          <solution>
            <p>
              Let <m>x</m> represent how many elk are in the Wenaha Wildlife Area. We set up a
              proportional equation:
              <md>
                <mrow>\frac{\text{tagged elk}}{\text{total elk}} \amp= \frac{\text{tagged elk}}{\text{total elk}}</mrow>
                <mrow>\frac{<var name="$st" />}{<var name="$sp"/>} \amp= \frac{<var name="$tt"/>}{x}</mrow>
                <mrow>\frac{<var name="$st" />}{<var name="$sp"/>} \multiplyright{<var name="$sp"/>\cdot x} \amp= \frac{<var name="$tt"/>}{x}\multiplyright{<var name="$sp"/>\cdot x}</mrow>
                <mrow><var name="$st" /> \cdot x \amp= <var name="$tt"/>\cdot <var name="$sp"/></mrow>
                <mrow>\divideunder{<var name="$st" /> \cdot x}{<var name="$st" />} \amp= \divideunder{<var name="$tt"/>\cdot <var name="$sp"/>}{<var name="$st" />}</mrow>
                <mrow>x \amp= <var name="$ans"/></mrow>
              </md>
              There are approximately <m><var name="$ans"/></m> elk in the Wenaha Wildlife Area.
            </p>
          </solution>
        </webwork>
      </exercise>
      <exercise label="black-tailed-deer">
        <webwork>
          <pg-code>
            $tt = random(80,100);
            $sp = $tt - random(10,18);
            $st = random(6,12);
            $ans = Round($tt*$sp/$st);
          </pg-code>
          <statement>
            <p>
              To estimate the health of the black-tailed deer population in the Jewell Meadow
              Wildlife Area, the Oregon Department of Fish and Wildlife caught, tagged, and released
              <m><var name="$tt" /></m> black-tailed deer. A month later, they returned and observed
              <m><var name="$sp" /></m> black-tailed deer, <m><var name="$st" /></m> of which had
              tags. Approximately how many black-tailed deerk are in the Jewell Meadow Wildlife
              Area?
            </p>
            <p>
              <var name="$ans" width="16"/>
            </p>
          </statement>
          <solution>
            <p>
              Let <m>x</m> represent how many deer are in the Jewell Meadow Area. We set up a
              proportional equation:
              <md>
                <mrow>\frac{\text{tagged deer}}{\text{total deer}} \amp= \frac{\text{tagged deer}}{\text{total deer}}</mrow>
                <mrow>\frac{<var name="$st" />}{<var name="$sp"/>} \amp= \frac{<var name="$tt"/>}{x}</mrow>
                <mrow>\frac{<var name="$st" />}{<var name="$sp"/>} \multiplyright{<var name="$sp"/>\cdot x} \amp= \frac{<var name="$tt"/>}{x}\multiplyright{<var name="$sp"/>\cdot x}</mrow>
                <mrow><var name="$st" /> \cdot x \amp= <var name="$tt"/>\cdot <var name="$sp"/></mrow>
                <mrow>\divideunder{<var name="$st" /> \cdot x}{<var name="$st" />} \amp= \divideunder{<var name="$tt"/>\cdot <var name="$sp"/>}{<var name="$st" />}</mrow>
                <mrow>x \amp= <var name="$ans"/></mrow>
              </md>
              There are approximately <m><var name="$ans"/></m> deer in the Jewell Meadow Area.
            </p>
          </solution>
        </webwork>
      </exercise>
    </subexercises>

    <subexercises>
      <title>Challenge</title>
      <exercise label="preschool-ratio">
      <!-- Kara's challenge problem -->
        <webwork>
          <pg-code>
            $girl = random(2,6,2);
            $boy = random(3,7,2);
            $factor = random(5,9,1);
            $totalgirls = Real($girl*$factor);
            $total = Real(($girl+$boy)*$factor);
          </pg-code>
          <statement>
            <p>
              The ratio of girls to boys in a preschool is <var name="$girl"/> to
              <var name="$boy"/>. If there are <var name="$total"/> kids in the school, how many
              girls are there in the preschool?
            </p>
            <p>
              <var name="$totalgirls" width="10"/>
            </p>
          </statement>
          <solution>
            <p>
              Let <m>x</m> be the number of girls in the preschool. We can represent this situation
              with the following proportion:
            </p>
            <p>
              <m>\frac{<var name="$girl"/>}{<var name="$girl"/>+<var name="$boy"/>} = \frac{x}{<var name="$total"/>}</m>.
              Solve this equation for <m>x</m>.
            </p>
          </solution>
        </webwork>
      </exercise>
    </subexercises>
  </exercises>
</section>
