<?xml version="1.0" encoding="UTF-8" ?>
<!-- *********************************************************************-->
<!-- Copyright 2016-2019                                                  -->
<!-- Portland Community College                                           -->
<!--                                                                      -->
<!-- This file is part of Open Resources for Community College Algebra    -->
<!-- (ORCCA).                                                             -->
<!--                                                                      -->
<!-- Open Resources for Community College Algebra is licensed under a     -->
<!-- Creative Commons Attribution 4.0 International License.              -->
<!--                                                                      -->
<!-- Under this license, any user of this textbook or the textbook        -->
<!-- contents must provide proper attribution as follows.                 -->
<!--                                                                      -->
<!-- If you redistribute all or part of this textbook, then you must      -->
<!-- include in every digital format page view (including but not         -->
<!-- limited to EPUB, PDF, and HTML) and on every physical printed page   -->
<!-- the following attribution:                                           -->
<!--                                                                      -->
<!-- Original source material, products with readable and accessible      -->
<!-- math content, and other information freely available at              -->
<!-- pcc.edu/orcca.                                                       -->
<!--                                                                      -->
<!-- If you redistribute all or part of this textbook, then you must      -->
<!-- reproduce any math content (such as math expressions and equations)  -->
<!-- in a readable manner, and offer math content in at least one web     -->
<!-- accessible manner.                                                   -->
<!--                                                                      -->
<!-- The Portland Community College name, Portland Community College      -->
<!-- logo, ORCCA name, Open Resources for Community College Algebra name, -->
<!-- ORCCA logo, and front and back cover designs are not subject to the  -->
<!-- Creative Commons license and may not be reproduced without the       -->
<!-- prior and express written consent of Portland Community College.     -->
<!--                                                                      -->
<!-- For questions regarding this license, please contact                 -->
<!-- orcca-group@pcc.edu.                                                 -->
<!-- *********************************************************************-->
<section xml:id="section-exploring-two-variable-data-and-rate-of-change">
  <title>Exploring Two-Variable Data and Rate of Change</title>

  <introduction>
    <p>
      This section is about examining data that has been plotted on a Cartesian coordinate system,
      and then making observations.
      In some cases,
      we'll be able to turn those observations into useful mathematical calculations.
    </p>

    <figure>
      <caption>Alternative Video Lesson</caption>
      <video youtubeplaylist="PLmuZCPhWPt-dy8SL-jRrCcU2G2ueG9BXb" />
    </figure>
  </introduction>

  <subsection>
    <title>Modeling data with two variables</title>
    <p>
      Using mathematics, we can analyze data from the world around us.
      We can use what we discover to understand the world better and make predictions.
      Here's an example with economic data from the US, plotted in a Cartesian plane.
    </p>

    <p>
      For the years from 1990 to 2013,
      consider what percent of all income was held by the top 1% of wage earners.
      The table in <xref ref="figure-top-one-percent">Figure</xref> gives the numbers,
      but any pattern there might not be apparent when looking at the data organized this way.
      Plotting the data in a Cartesian coordinates sytem can make an overall pattern or trend become visible.
    </p>

    <figure xml:id="figure-top-one-percent">
      <caption>Share of all income held by the top 1% of wage earners</caption>
      <sidebyside widths="47% 47%" margins="0%">
        <tabular>
          <col/>
          <col right="medium"/>
          <col/>
          <col/>
          <row bottom="medium">
            <cell>year</cell>
            <cell>%</cell>
            <cell>year</cell>
            <cell>%</cell>
          </row>
          <row>
            <cell>1990</cell>
            <cell>14</cell>
            <cell>2002</cell>
            <cell>17</cell>
          </row>
          <row>
            <cell>1991</cell>
            <cell>13</cell>
            <cell>2003</cell>
            <cell>18</cell>
          </row>
          <row>
            <cell>1992</cell>
            <cell>15</cell>
            <cell>2004</cell>
            <cell>20</cell>
          </row>
          <row>
            <cell>1993</cell>
            <cell>14</cell>
            <cell>2005</cell>
            <cell>22</cell>
          </row>
          <row>
            <cell>1994</cell>
            <cell>14</cell>
            <cell>2006</cell>
            <cell>23</cell>
          </row>
          <row>
            <cell>1995</cell>
            <cell>15</cell>
            <cell>2007</cell>
            <cell>24</cell>
          </row>
          <row>
            <cell>1996</cell>
            <cell>17</cell>
            <cell>2008</cell>
            <cell>21</cell>
          </row>
          <row>
            <cell>1997</cell>
            <cell>18</cell>
            <cell>2009</cell>
            <cell>18</cell>
          </row>
          <row>
            <cell>1998</cell>
            <cell>19</cell>
            <cell>2010</cell>
            <cell>20</cell>
          </row>
          <row>
            <cell>1999</cell>
            <cell>20</cell>
            <cell>2011</cell>
            <cell>20</cell>
          </row>
          <row>
            <cell>2000</cell>
            <cell>22</cell>
            <cell>2012</cell>
            <cell>22</cell>
          </row>
          <row>
            <cell>2001</cell>
            <cell>18</cell>
            <cell>2013</cell>
            <cell>20</cell>
          </row>
        </tabular>

        <image width="50%">
          <description>a scatter plot about share of all income held by the top 1% in the US</description>
          <latex-image>
            <![CDATA[\begin{tikzpicture}
              \begin{axis}[
                xlabel={year},
                ylabel={percentage},
                xmin=1989,xmax=2035,
                ymin=0,ymax=30,
                minor ytick=,
                x axis line style={->},
                y axis line style={->},
                xtick={1990,1995,...,2035},
                xticklabels={1990,1995,...,2035},
                xticklabel style={rotate=-45},
                ytick={0,5,...,30}
              ]
                \addplot[only marks]coordinates{
                  (1990,14)
                  (1991,13)
                  (1992,15)
                  (1993,14)
                  (1994,14)
                  (1995,15)
                  (1996,17)
                  (1997,18)
                  (1998,19)
                  (1999,20)
                  (2000,22)
                  (2001,18)
                  (2002,17)
                  (2003,18)
                  (2004,20)
                  (2005,22)
                  (2006,23)
                  (2007,24)
                  (2008,21)
                  (2009,18)
                  (2010,20)
                  (2011,20)
                  (2012,22)
                  (2013,20)
                };
                \addplot[firstcurve,domain = 1991:2020,-,ultra thick]{0.34434783*x-670.71};
              \end{axis}
            \end{tikzpicture}]]>
          </latex-image>
        </image>
      </sidebyside>
    </figure>

    <p>
      If this trend continues, what percentage of all income will the top
      <quantity>
        <mag>1</mag><unit base="percent"/>
      </quantity>
      have in the year 2030?
      If we model data in the chart with the trend line,
      we can estimate the value to be
      <quantity>
        <mag>28.6</mag><unit base="percent" />
      </quantity>.
      This is one way math is used in real life.
    </p>

    <p>
      Does that trend line have an equation like those we looked at in <xref ref="section-graphing-equations">Section</xref>?
      Is it even correct to look at this data set and decide that a straight line is a good model?
      <!-- These are some of the questions we want to consider as we begin this section.
      The answers will evolve through the next several sections. -->
    </p>
  </subsection>

  <subsection>
    <title>Patterns in Tables</title>
    <example>
      <statement>
        <p>
          Find a pattern in each table.
          What is the missing entry in each table?
          Can you describe each pattern in words and/or mathematics?
        </p>

        <figure xml:id="table-patterns-non-math">
          <caption>Patterns in 3 tables</caption>
          <sidebyside widths="32% 32% 32%"  margins="0%">

            <tabular top="major" bottom="minor" left="major" right="minor">
              <col />
              <col right="major" />
              <row>
                <cell>black</cell>
                <cell>white</cell>
              </row>
              <row>
                <cell>big</cell>
                <cell>small</cell>
              </row>
              <row>
                <cell>short</cell>
                <cell>tall</cell>
              </row>
              <row bottom="major">
                <cell>few</cell>
                <cell/>
              </row>
            </tabular>

            <tabular top="major" bottom="minor" left="major" right="minor">
              <col />
              <col right="major" />
              <row>
                <cell>USA</cell>
                <cell>Washington</cell>
              </row>
              <row>
                <cell>UK</cell>
                <cell>London</cell>
              </row>
              <row>
                <cell>France</cell>
                <cell>Paris</cell>
              </row>
              <row bottom="major">
                <cell>Mexico</cell>
                <cell/>
              </row>
            </tabular>

            <tabular top="major" bottom="minor" left="major" right="minor">
              <col />
              <col right="major" />
              <row>
                <cell>1</cell>
                <cell>2</cell>
              </row>
              <row>
                <cell>2</cell>
                <cell>4</cell>
              </row>
              <row>
                <cell>3</cell>
                <cell>6</cell>
              </row>
              <row bottom="major">
                <cell>5</cell>
                <cell/>
              </row>
            </tabular>

          </sidebyside>

        </figure>
      </statement>
      <solution>
        <figure>
          <caption>Patterns in 3 tables</caption>
          <sidebyside widths="32% 32% 32%" margins="0%">

            <tabular top="major" bottom="minor" left="major" right="minor">
              <col />
              <col right="major" />
              <row>
                <cell>black</cell>
                <cell>white</cell>
              </row>
              <row>
                <cell>big</cell>
                <cell>small</cell>
              </row>
              <row>
                <cell>short</cell>
                <cell>tall</cell>
              </row>
              <row bottom="major">
                <cell>few</cell>
                <cell><em>many</em></cell>
              </row>
            </tabular>

            <tabular top="major" bottom="minor" left="major" right="minor">
              <col />
              <col right="major" />
              <row>
                <cell>USA</cell>
                <cell>Washington</cell>
              </row>
              <row>
                <cell>UK</cell>
                <cell>London</cell>
              </row>
              <row>
                <cell>France</cell>
                <cell>Paris</cell>
              </row>
              <row bottom="major">
                <cell>Mexico</cell>
                <cell><em>Mexico City</em></cell>
              </row>
            </tabular>

            <tabular top="major" bottom="minor" left="major" right="minor">
              <col />
              <col right="major" />
              <row>
                <cell>1</cell>
                <cell>2</cell>
              </row>
              <row>
                <cell>2</cell>
                <cell>4</cell>
              </row>
              <row>
                <cell>3</cell>
                <cell>6</cell>
              </row>
              <row bottom="major">
                <cell>5</cell>
                <cell><em>10</em></cell>
              </row>
            </tabular>

          </sidebyside>

        </figure>

        <p>
          <dl>
            <li>
              <title>First table</title>
              <p>
                Each word on the right has the opposite meaning of the word to its left.
              </p>
            </li>

            <li>
              <title>Second table</title>
              <p>
                Each city on the right is the capital of the country to its left.
              </p>
            </li>

            <li>
              <title>Third table</title>
              <p>
                Each number on the right is double the number to its left.
              </p>
            </li>
          </dl>
        </p>
      </solution>
    </example>

    <p>
      We can view each table as assigning each input in the left column a corresponding output in the right column.
      In the first table, for example,
      when the input <q>big</q> is on the left,
      the output <q>small</q> is on the right.
      The first table's function is to output a word with the opposite meaning of each input word.
      (This is not a numerical example.)
    </p>

    <sidebyside widths="47% 47%" margins="0%">
      <p>
        The third table <em>is</em> numerical.
        And its function is to take a number as input,
        and give twice that number as its output.
        Mathematically, we can describe the pattern as
        <q><m>y=2x</m>,</q>
        where <m>x</m> represents the input,
        and <m>y</m> represents the output.
        Labeling the table mathematically,
        we have <xref ref="figure-pattern-double">Figure</xref>.
      </p>

      <figure xml:id="figure-pattern-double">
        <caption>Table with a mathematical pattern</caption>
        <tabular>
          <col halign="center" />
          <col halign="center"/>
          <row bottom="medium">
            <cell>
              <line><m>x</m></line>
              <line>(input)</line></cell>
            <cell>
              <line><m>y</m></line>
              <line>(output)</line></cell>
          </row>
          <row>
            <cell><m>1</m></cell>
            <cell><m>2</m></cell>
          </row>
          <row>
            <cell><m>2</m></cell>
            <cell><m>4</m></cell>
          </row>
          <row>
            <cell><m>3</m></cell>
            <cell><m>6</m></cell>
          </row>
          <row>
            <cell><m>5</m></cell>
            <cell><m>10</m></cell>
          </row>
          <row bottom="medium">
            <cell><m>10</m></cell>
            <cell><m>20</m></cell>
          </row>
          <row>
            <cell colspan="2">Pattern: <m>y=2x</m></cell>
          </row>
        </tabular>

      </figure>

    </sidebyside>

    <p>
      The equation <m>y=2x</m> summarizes the pattern in the table.
      For each of the following tables,
      find an equation that describes the pattern you see.
      Numerical pattern recognition may or may not come naturally for you.
      Either way, pattern recognition is an important mathematical skill that anyone can develop.
      Solutions for these exercises provide some ideas for recognizing patterns.
    </p>

    <exercise>
      <webwork>
            <pg-code>
                @x=(0..3);
                $f=Formula("x+10");
                @y=map{$f->eval(x=>$_)}@x;
                Context("Numeric")->variables->add(y=>'Real');
                parser::Assignment->Allow;
                $eq=Formula("y=$f");
            </pg-code>
          <statement>
            <p>
              Write an equation in the form
              <m>y=\ldots</m> suggested by the pattern in the table.
            </p>
              <tabular >
              <col halign="right" />
              <col halign="left" />
              <row bottom="medium">
                <cell><m>x</m></cell>
                <cell><m>y</m></cell>
              </row>
              <row>
                <cell><m><var name="$x[0]" /></m></cell>
                <cell><m><var name="$y[0]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[1]" /></m></cell>
                <cell><m><var name="$y[1]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[2]" /></m></cell>
                <cell><m><var name="$y[2]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[3]" /></m></cell>
                <cell><m><var name="$y[3]" /></m></cell>
              </row>
              </tabular>
            <p>
              <var name="$eq" width="20" />
            </p>
          </statement>
          <solution>
            <p>
              One approach to pattern recognition is to look for a relationship in each row.
              Here, the <m>y</m>-value in each row is always <m>10</m> more than the <m>x</m>-value.
              So the pattern is described by the equation <m><var name="$eq" /></m>.
            </p>
          </solution>
      </webwork>
    </exercise>

    <exercise xml:id="exercise-linear-data">
      <webwork>
            <pg-code>
                @x=(0..3);
                $f=Formula("-1+3x");
                @y=map{$f->eval(x=>$_)}@x;
                Context("Numeric")->variables->add(y=>'Real');
                parser::Assignment->Allow;
                $eq=Formula("y=$f")->reduce;
                @t=map{$_*3}(@x);
            </pg-code>
          <statement>
            <p>
              Write an equation in the form
              <m>y=\ldots</m> suggested by the pattern in the table.
            </p>
              <tabular >
              <col halign="right" />
              <col halign="left" />
              <row bottom="medium">
                <cell><m>x</m></cell>
                <cell><m>y</m></cell>
              </row>
              <row>
                <cell><m><var name="$x[0]" /></m></cell>
                <cell><m><var name="$y[0]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[1]" /></m></cell>
                <cell><m><var name="$y[1]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[2]" /></m></cell>
                <cell><m><var name="$y[2]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[3]" /></m></cell>
                <cell><m><var name="$y[3]" /></m></cell>
              </row>
              </tabular>

            <p>
              <var name="$eq" width="20" />
            </p>
          </statement>
          <solution>
            <p>
              The relationship between <m>x</m> and <m>y</m> in each row is not as clear here.
              Another popular approach for finding patterns:
              in each column,
              consider how the values change from one row to the next.
              From row to row, the <m>x</m>-value increases by <m>1</m>.
              Also, the <m>y</m>-value increases by <m>3</m> from row to row.
            </p>

              <tabular >
              <col halign="right" />
              <col halign="center" />
              <col halign="center" />
              <col halign="left" />
              <row bottom="medium">
                <cell />
                <cell><m>x</m></cell>
                <cell><m>y</m></cell>
                <cell />
              </row>
              <row>
                <cell />
                <cell><m><var name="$x[0]" /></m></cell>
                <cell><m><var name="$y[0]" /></m></cell>
                <cell />
              </row>
              <row>
                <cell><m>{}+1\rightarrow</m></cell>
                <cell><m><var name="$x[1]" /></m></cell>
                <cell><m><var name="$y[1]" /></m></cell>
                <cell><m>\leftarrow{}+3</m></cell>
              </row>
              <row>
                <cell><m>{}+1\rightarrow</m></cell>
                <cell><m><var name="$x[2]" /></m></cell>
                <cell><m><var name="$y[2]" /></m></cell>
                <cell><m>\leftarrow{}+3</m></cell>
              </row>
              <row>
                <cell><m>{}+1\rightarrow</m></cell>
                <cell><m><var name="$x[3]" /></m></cell>
                <cell><m><var name="$y[3]" /></m></cell>
                <cell><m>\leftarrow{}+3</m></cell>
              </row>
              </tabular>

            <p>
              Since row-to-row change is always <m>1</m> for <m>x</m> and is always <m>3</m> for <m>y</m>,
              the <em>rate of change</em> from one row to another row is always the same:
              <m>3</m> units of <m>y</m> for every <m>1</m> unit of <m>x</m>.
              This suggests that <m>y=3x</m> <em>might</em> be a good equation for the table pattern.
              But if we try to make a table with that pattern:
            </p>
              <tabular>
              <row bottom="medium">
                <cell><m>x</m></cell>
                <cell><m>y</m> using <m>y=3x</m></cell>
                <cell>Actual <m>y</m></cell>
              </row>
              <row>
                <cell><m><var name="$x[0]" /></m></cell>
                <cell><m><var name="$t[0]" /></m></cell>
                <cell><m><var name="$y[0]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[1]" /></m></cell>
                <cell><m><var name="$t[1]" /></m></cell>
                <cell><m><var name="$y[1]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[2]" /></m></cell>
                <cell><m><var name="$t[2]" /></m></cell>
                <cell><m><var name="$y[2]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[3]" /></m></cell>
                <cell><m><var name="$t[3]" /></m></cell>
                <cell><m><var name="$y[3]" /></m></cell>
              </row>
              </tabular>
            <p>
              We find that the values from <m>y=3x</m> are <m>1</m> too large.
              So now we make an adjustment.
              The equation <m><var name="$eq" /></m> describes the pattern in the table.
            </p>
          </solution>
      </webwork>
    </exercise>

    <exercise>
      <webwork>
            <pg-code>
                @x=(0..3);
                $f=Formula("x^2");
                @y=map{$f->eval(x=>$_)}@x;
                Context("Numeric")->variables->add(y=>'Real');
                parser::Assignment->Allow;
                $eq=Formula("y=$f");
            </pg-code>
          <statement>
            <p>
              Write an equation in the form
              <m>y=\ldots</m> suggested by the pattern in the table.
            </p>
              <tabular>
                <col halign="right" />
                <col halign="left" />
                <row bottom="medium">
                  <cell><m>x</m></cell>
                  <cell><m>y</m></cell>
                </row>
                <row>
                  <cell><m><var name="$x[0]" /></m></cell>
                  <cell><m><var name="$y[0]" /></m></cell>
                </row>
                <row>
                  <cell><m><var name="$x[1]" /></m></cell>
                  <cell><m><var name="$y[1]" /></m></cell>
                </row>
                <row>
                  <cell><m><var name="$x[2]" /></m></cell>
                  <cell><m><var name="$y[2]" /></m></cell>
                </row>
                <row>
                  <cell><m><var name="$x[3]" /></m></cell>
                  <cell><m><var name="$y[3]" /></m></cell>
                </row>
              </tabular>
            <p>
              <var name="$eq" width="20" />
            </p>
          </statement>
          <solution>
            <p>
              Looking for a relationship in each row here,
              we see that each <m>y</m>-value is the square of the corresponding <m>x</m>-value.
              That may not be obvious to you. It comes down to recognizing what square numbers are.
              So the equation is <m><var name="$eq" /></m>.
            </p>

            <p>
              What if we had tried the approach we used in the previous exercise,
              comparing change from row to row in each column?
            </p>

              <tabular>
                <col halign="right" />
                <col halign="right" />
                <col halign="left" />
                <col halign="left" />
                <row bottom="medium">
                  <cell />
                  <cell><m>x</m></cell>
                  <cell><m>y</m></cell>
                  <cell />
                </row>
                <row>
                  <cell />
                  <cell><m><var name="$x[0]" /></m></cell>
                  <cell><m><var name="$y[0]" /></m></cell>
                  <cell />
                </row>
                <row>
                  <cell><m>{}+1\rightarrow</m></cell>
                  <cell><m><var name="$x[1]" /></m></cell>
                  <cell><m><var name="$y[1]" /></m></cell>
                  <cell><m>\leftarrow{}+1</m></cell>
                </row>
                <row>
                  <cell><m>{}+1\rightarrow</m></cell>
                  <cell><m><var name="$x[2]" /></m></cell>
                  <cell><m><var name="$y[2]" /></m></cell>
                  <cell><m>\leftarrow{}+3</m></cell>
                </row>
                <row>
                  <cell><m>{}+1\rightarrow</m></cell>
                  <cell><m><var name="$x[3]" /></m></cell>
                  <cell><m><var name="$y[3]" /></m></cell>
                  <cell><m>\leftarrow{}+5</m></cell>
                </row>
              </tabular>

            <p>
              Here, the rate of change is <em>not</em>
              constant from one row to the next.
              While the <m>x</m>-values are increasing by <m>1</m> from row to row,
              the <m>y</m>-values increase more and more from row to row.
              Do you notice that there is a pattern there as well?
              Mathematicians are interested in relationships with patterns.
            </p>
          </solution>
      </webwork>
    </exercise>
  </subsection>

  <subsection>
    <title>Rate of Change</title>
    <p>
      For an hourly wage-earner,
      the amount of money they earn depends on how many hours they work.
      If a worker earns <m>\$15</m> per hour,
      then <m>10</m> hours of work corresponds to <m>\$150</m> of pay.
      Working <em>one</em> additional hour will change <m>10</m> hours to <m>11</m> hours;
      and this will cause the <m>\$150</m> in pay to rise by <em>fifteen</em>
      dollars to <m>\$165</m> in pay.
      Any time we compare how one amount changes
      (dollars earned)
      as a consequence of another amount changing
      (hours worked),
      we are talking about a <term>rate of change</term>.
    </p>

    <p>
      Given a table of two-variable data,
      between any two rows we can compute a
      <term>rate of change</term>.
    </p>

    <example xml:id="example-cancer-data">
      <p>
        The following data, given in both table and graphed form,
        gives the counts of invasive cancer diagnoses in Oregon over a period of time.
        (<url href="https://wonder.cdc.gov/" visual="wonder.cdc.gov"/>)
      </p>

      <sidebyside valign="top" widths="47% 47%">

        <tabular>
          <col />
          <col halign="center"/>
          <row bottom="medium">
            <cell>Year</cell>
            <cell>
              <line>Invasive Cancer</line>
              <line>Incidents</line></cell>
          </row>
          <row>
            <cell>1999</cell>
            <cell>17,599</cell>
          </row>
          <row>
            <cell>2000</cell>
            <cell>17,446</cell>
          </row>
          <row>
            <cell>2001</cell>
            <cell>17,847</cell>
          </row>
          <row>
            <cell>2002</cell>
            <cell>17,887</cell>
          </row>
          <row>
            <cell>2003</cell>
            <cell>17,559</cell>
          </row>
          <row>
            <cell>2004</cell>
            <cell>18,499</cell>
          </row>
          <row>
            <cell>2005</cell>
            <cell>18,682</cell>
          </row>
          <row>
            <cell>2006</cell>
            <cell>19,112</cell>
          </row>
          <row>
            <cell>2007</cell>
            <cell>19,376</cell>
          </row>
          <row>
            <cell>2008</cell>
            <cell>20,370</cell>
          </row>
          <row>
            <cell>2009</cell>
            <cell>19,909</cell>
          </row>
          <row>
            <cell>2010</cell>
            <cell>19,727</cell>
          </row>
          <row>
            <cell>2011</cell>
            <cell>20,636</cell>
          </row>
          <row>
            <cell>2012</cell>
            <cell>20,035</cell>
          </row>
          <row>
            <cell>2013</cell>
            <cell>20,458</cell>
          </row>
        </tabular>

        <image>
          <description></description>

            <latex-image>
            <![CDATA[\begin{tikzpicture}
                \begin{axis}[xlabel={year},
                        ylabel={count},
                        ytick=,
                        xmin=1995,xmax=2016,
                        ymin=15000,ymax=21000,
                        x axis line style={->},
                        y axis line style={->},
                        xtick={2000,2005,2010,2015},
                        xticklabels={2000,2005,2010,2015},
                        xticklabel style={rotate=-45},
                        axis y discontinuity=crunch,]
                    \addplot[only marks]coordinates{
                           (1999,17599)
                           (2000,17446)
                           (2001,17847)
                           (2002,17887)
                           (2003,17559)
                           (2004,18499)
                           (2005,18682)
                           (2006,19112)
                           (2007,19376)
                           (2008,20370)
                           (2009,19909)
                           (2010,19727)
                           (2011,20636)
                           (2012,20035)
                           (2013,20458)
                    };
                \end{axis}
            \end{tikzpicture}]]>
            </latex-image>
        </image>

      </sidebyside>

      <p>
        What is the <term>rate of change</term>
        in Oregon invasive cancer diagnoses between 2000 and 2010?
        The total (net) change in diagnoses over that timespan is
        <me>
          19727-17446=2281
        </me>
        meaning that there were <m>2281</m> more invasive cancer incidents in 2010 than in 2000.
        Since <m>10</m> years passed
        (which you can calculate as <m>2010-2000</m>),
        the rate of change is <m>2281</m> diagnoses per <m>10</m> years, or
        <me>
          \frac{2281\,\text{diagnoses}}{10\,\text{year}}=228.1\,\frac{\text{diagnoses}}{\text{year}}
        </me>.
        We read that last quantity as <q><m>228.1</m> diagnoses per year.</q>
        This rate of change means that between the years <m>2000</m> and <m>2010</m>,
        there were <m>228.1</m> more diagnoses <em>each</em> year, on average.
        This is just an average over those ten years<mdash/>it does not mean
        that the diagnoses grew by exactly this much each year.
        % We dare not interpret <em>why</em> that increase existed,
        % just that it did.
        % If you are interested in examining causal relationships that exist in real life,
        % we strongly recommend a statistics course or two in your future!
      </p>
    </example>

    <exercise xml:id="exercise-cancer-data">
      <webwork>
            <pg-code>
                @x=(1999..2013);
                @y=(17599,17446,17847,17887,17559,18499,18682,19112,19376,20370,19909,19727,20636,20035,20458);
                %f=map{$x[$_]=>$y[$_]}(0..14);
                $r[0]=($f{2002}-$f{1999})/(2002-1999);
                $r[1]=($f{2011}-$f{2003})/(2011-2003);
                $newUnits = [
                  {name=>'diagnoses'},
                  {name=>'year',conversion=>{factor=>365*24*60*60,s=>1}},
                  {name=>'years',conversion=>{factor=>365*24*60*60,s=>1}},
                  {name=>'yr',conversion=>{factor=>365*24*60*60,s=>1}},
                  {name=>'yrs',conversion=>{factor=>365*24*60*60,s=>1}},
                  {name=>'y',conversion=>{factor=>365*24*60*60,s=>1}},
                ];
                $rate[0] = NumberWithUnits("$r[0] diagnoses/yr",{newUnit=>$newUnits});
                $rate[1] = NumberWithUnits("$r[1] diagnoses/yr",{newUnit=>$newUnits});
            </pg-code>
          <statement>
            <p>
              Use the data in <xref ref="example-cancer-data">Example</xref>
              to find the rate of change in Oregon invasive cancer diagnoses between 1999 and 2002.
            </p>

            <instruction>
              You can type the unit as <c>diagnoses/yr</c>.
            </instruction>

            <p>
              <var name="$rate[0]" width="10" />
            </p>

            <p>
              And what was the rate of change between 2003 and 2011?
            </p>

            <p>
              <var name="$rate[1]" width="10" />
            </p>
          </statement>
          <solution>
            <p>
              To find the rate of change between 1999 and 2002, calculate
              <me>
                \frac{17887-17599}{2002-1999}=96
              </me>.
              So the rate of change was <m><var name="$r[0]"/></m>.
            </p>

            <p>
              To find the rate of change between 2003 and 2011, calculate
              <me>
                \frac{20636-17559}{2011-2003}=384.625
              </me>.
              So the rate of change was <m><var name="$r[1]"/></m>.
            </p>
          </solution>
      </webwork>
    </exercise>

    <p>
      We are ready to give a formal definition for
      <q>rate of change</q>.
      Considering our work from <xref ref="example-cancer-data">Example</xref>
      and <xref ref="exercise-cancer-data">Checkpoint</xref>,
      we settle on:
    </p>

    <definition xml:id="definition-rate-of-change">
      <title>Rate of Change</title>
      <idx><h>rate of change</h></idx>
      <statement>
        <p>
          If <m>\left(x_1,y_1\right)</m> and
          <m>\left(x_2,y_2\right)</m> are two data points from a set of two-variable data,
          then the <term>rate of change</term> between them is
          <me>
            \frac{\text{change in $y$}}{\text{change in $x$}}=\frac{\Delta y}{\Delta x}=\frac{y_2-y_1}{x_2-x_1}
          </me>.
          (The Greek letter delta, <m>\Delta</m>,
          is used to represent <q>change in</q>
          since it is the first letter of the Greek word for <q>difference.</q>)
        </p>
      </statement>
    </definition>

    <sidebyside widths="47% 47%" margins="0%">
      <p>
        In <xref ref="example-cancer-data">Example</xref>
        and <xref ref="exercise-cancer-data">Checkpoint</xref>
        we found three rates of change.
        <xref ref="figure-cancer-data">Figure</xref>
        highlights the three pairs of points that were used to make these calculations.
      </p>

      <figure xml:id="figure-cancer-data">
        <caption />

        <image>
          <description></description>

            <latex-image>
            <![CDATA[\begin{tikzpicture}
                \begin{axis}[xlabel={year},
                        ylabel={count},
                        ytick=,
                        xmin=1995,xmax=2016,
                        ymin=15000,ymax=21000,
                        x axis line style={->},
                        y axis line style={->},
                        xtick={2000,2005,2010,2015},
                        xticklabels={2000,2005,2010,2015},
                        xticklabel style={rotate=-45},
                        axis y discontinuity=crunch,
                        clip=false]
                    \addplot[only marks]coordinates{
                           (1999,17599)
                           (2000,17446)
                           (2001,17847)
                           (2002,17887)
                           (2003,17559)
                           (2004,18499)
                           (2005,18682)
                           (2006,19112)
                           (2007,19376)
                           (2008,20370)
                           (2009,19909)
                           (2010,19727)
                           (2011,20636)
                           (2012,20035)
                           (2013,20458)
                    };
                    \addplot[firstcurve,-] coordinates {(2000,17446) (2010,19727)} node[pos=0.35, pin=100:{rate $228.1\,\frac{\text{diagnoses}}{\text{year}}$}]{};
                    \addplot[firstcurve,-] coordinates {(1999,17599) (2002,17887)} node[pos=0.5, pin=120:{rate $96\,\frac{\text{diagnoses}}{\text{year}}$}]{};
                    \addplot[firstcurve,-] coordinates {(2003,17559) (2011,20636)} node[pos=0.25, pin=-45:{rate $384.6\,\frac{\text{diagnoses}}{\text{year}}$}]{};
                \end{axis}
            \end{tikzpicture}]]>
            </latex-image>
        </image>

      </figure>
    </sidebyside>

    <p>
      Note how the larger the numerical rate of change between two points,
      the steeper the line is that connects them.
      This is such an important observation,
      we'll put it in an official remark.
    </p>

    <remark>
      <p>
        The rate of change between two data points is intimately related to the steepness of the line segment that connects those points.

        <ol>
          <li>
            <p>
              The steeper the line, the larger the rate of change, and vice versa.
            </p>
          </li>

          <li>
            <p>
              If one rate of change between two data points equals another rate of change between two different data points,
              then the corresponding line segments will have the same steepness.
            </p>
          </li>

          <li>
            <p>
              We always measure rate of change from left to right.
              When a line segment between two data points slants up from left to right,
              the rate of change between those points will be positive.
              When a line segment between two data points slants down from left to right,
              the rate of change between those points will be negative.
            </p>
          </li>
        </ol>
      </p>
    </remark>

    <p>
      In the solution to <xref ref="exercise-linear-data">Checkpoint</xref>,
      the key observation was that the rate of change
      from one row to the next was constant:
      <m>3</m> units of increase in <m>y</m> for every <m>1</m> unit of increase in <m>x</m>.
      Graphing this pattern in <xref ref="figure-linear-data">Figure</xref>,
      we see that every line segment here has the same steepness,
      so the whole picture is a straight line.
    </p>

    <figure xml:id="figure-linear-data">
      <caption />

      <image width="50%">
        <description></description>

            <latex-image>
            <![CDATA[\begin{tikzpicture}
                \begin{axis}[ymin=-5,ymax=9,ytick={-4,2,...,8},minor ytick={-5,-4,...,9},width=0.47\linewidth]
                    \addplot[only marks]coordinates{
                           (0,-1)
                           (1,2)
                           (2,5)
                           (3,8)
                    };
                    \addplot[firstcurve,-] coordinates {(0,-1) (3,8)};
                \end{axis}
            \end{tikzpicture}]]>
            </latex-image>
      </image>

    </figure>

    <p>
      Whenever the rate of change is constant no matter which two <m>(x,y)</m>-pairs
      (or data pairs)
      are chosen from a data set,
      then you can conclude the graph will be a straight line
      <em>even without making the graph</em>.
      We call this kind of relationship a <term>linear</term>
          <idx><h>linear</h></idx>
      relationship.
      We'll study linear relationships in more detail throughout this chapter.
      Right now in this section,
      we feel it is important to simply identify if data has a linear relationship or not.
    </p>

    <exercise>
      <webwork>
            <pg-code>
                @x=(-8,-5,-2,1);
                @y=(3.1,2.1,1.1,0.1);
                $popup=PopUp(['?','The relationship is linear','The relationship is not linear'],1);
            </pg-code>
          <statement>
            <p>
              Is there a linear relationship in the table?
            </p>

              <tabular>
                <col halign="right" />
                <col halign="left" />
                <row bottom="medium">
                  <cell><m>x</m></cell>
                  <cell><m>y</m></cell>
                </row>
                <row>
                  <cell><m><var name="$x[0]" /></m></cell>
                  <cell><m><var name="$y[0]" /></m></cell>
                </row>
                <row>
                  <cell><m><var name="$x[1]" /></m></cell>
                  <cell><m><var name="$y[1]" /></m></cell>
                </row>
                <row>
                  <cell><m><var name="$x[2]" /></m></cell>
                  <cell><m><var name="$y[2]" /></m></cell>
                </row>
                <row>
                  <cell><m><var name="$x[3]" /></m></cell>
                  <cell><m><var name="$y[3]" /></m></cell>
                </row>
              </tabular>

            <p>
              <var name="$popup" form="popup" />
            </p>
          </statement>
          <solution>
            <p>
              From one <m>x</m>-value to the next,
              the change is always <m>3</m>.
              From one <m>y</m>-value to the next,
              the change is always <m>-1</m>.
              So the rate of change is always <m>\frac{-1}{3}=-\frac{1}{3}</m>.
              Since the rate of change is constant,
              the data have a linear relationship.
            </p>
          </solution>
      </webwork>
    </exercise>

    <exercise>
      <webwork>
            <pg-code>
                @x=(11,13,15,17);
                @y=(208,210,214,220);
                $popup=PopUp(['?','The relationship is linear','The relationship is not linear'],2);
            </pg-code>
          <statement>
            <p>
              Is there a linear relationship in the table?
            </p>

              <tabular>
                <col halign="right" />
                <col halign="left" />
                <row bottom="medium">
                  <cell><m>x</m></cell>
                  <cell><m>y</m></cell>
                </row>
                <row>
                  <cell><m><var name="$x[0]" /></m></cell>
                  <cell><m><var name="$y[0]" /></m></cell>
                </row>
                <row>
                  <cell><m><var name="$x[1]" /></m></cell>
                  <cell><m><var name="$y[1]" /></m></cell>
                </row>
                <row>
                  <cell><m><var name="$x[2]" /></m></cell>
                  <cell><m><var name="$y[2]" /></m></cell>
                </row>
                <row>
                  <cell><m><var name="$x[3]" /></m></cell>
                  <cell><m><var name="$y[3]" /></m></cell>
                </row>
              </tabular>

            <p>
              <var name="$popup" form="popup" />
            </p>
          </statement>
          <solution>
            <p>
              The rate of change between the first two points is <m>\frac{210-208}{13-11}=1</m>.
              The rate of change between the last two points is <m>\frac{220-214}{17-15}=3</m>.
              This is one way to demonstrate that the rate of change differs for different pairs of points,
              so this pattern is not linear.
            </p>
          </solution>
      </webwork>
    </exercise>

    <exercise>
      <webwork>
            <pg-code>
                @x=(3,6,8,12);
                @y=(-2,-8,-12,-20);
                $popup=PopUp(['?','The relationship is linear','The relationship is not linear'],1);
            </pg-code>
          <statement>
            <p>
              Is there a linear relationship in the table?
            </p>

              <tabular>
                <col halign="right" />
                <col halign="left" />
                <row bottom="medium">
                  <cell><m>x</m></cell>
                  <cell><m>y</m></cell>
                </row>
                <row>
                  <cell><m><var name="$x[0]" /></m></cell>
                  <cell><m><var name="$y[0]" /></m></cell>
                </row>
                <row>
                  <cell><m><var name="$x[1]" /></m></cell>
                  <cell><m><var name="$y[1]" /></m></cell>
                </row>
                <row>
                  <cell><m><var name="$x[2]" /></m></cell>
                  <cell><m><var name="$y[2]" /></m></cell>
                </row>
                <row>
                  <cell><m><var name="$x[3]" /></m></cell>
                  <cell><m><var name="$y[3]" /></m></cell>
                </row>
              </tabular>

            <p>
              <var name="$popup" form="popup" />
            </p>
          </statement>
          <solution>
            <p>
              The changes in <m>x</m> from one row to the next are <m>+3</m>,<m>+2</m>,
              and <m>+8</m>.
              That's not a consistent pattern,
              but we need to consider rates of change between points.
              The rate of change between the first two points is <m>\frac{-8-(-2)}{6-3}=-2</m>.
              The rate of change between the next two points is <m>\frac{-12-(-8)}{8-6}=-2</m>.
              And the rate of change between the last two points is <m>\frac{-20-(-12)}{12-8}=-2</m>.
              So the rate of change, <m>-2</m>,
              is constant regardless of which pairs we choose.
              That means these pairs describe a linear relationship.
            </p>
          </solution>
      </webwork>
    </exercise>

    <p>
      Let's return to the data that we opened the section with,
      in <xref ref="figure-top-one-percent">Figure</xref>.
      Is that data linear?
      Well, yes and no.
      To be completely honest, it's not linear.
      It's easy to pick out pairs of points where the steepness changes from one pair to the next.
      In other words, the points do not all fall into a single line.
    </p>

    <sidebyside widths="47% 47%" margins="0%">
      <p>
        However if we step back,
        there does seem to be an overall upward trend that is captured by the line someone has drawn over the data.
        Points <em>on this line</em> do have a linear pattern.
        Let's estimate the rate of change between some points on this line.
        We are free to use any points to do this,
        so let's make this calculation easier by choosing points we can clearly identify on the graph:
        <m>(1991,15)</m> and <m>(2020,25)</m>.
      </p>

      <figure>
        <caption>Share of all income held by the top
        <quantity>
          <mag>1</mag><unit base="percent" />
        </quantity>, United States, 1990<ndash />2013 (<url href="http://www.epi.org/blog/new-data-show-top-1-percent-really-are-different-from-you-and-me/" visual="www.epi.org"/>)</caption>
        <image>
          <description>a scatter plot about share of all income held by the top 1% in the US</description>

            <latex-image>
            <![CDATA[\begin{tikzpicture}
                \begin{axis}[xlabel={year},
                        ylabel={percentage},
                        xmin=1989,xmax=2035,
                        ymin=0,ymax=30,
                        minor ytick=,
                        x axis line style={->},
                        y axis line style={->},
                        xtick={1990,1995,...,2035},
                        xticklabels={1990,1995,...,2035},
                        xticklabel style={rotate=-45},
                        ytick={0,5,...,30}]
                    \addplot[only marks]coordinates{
                           (1990,14)
                           (1991,13)
                           (1992,15)
                           (1993,14)
                           (1994,14)
                           (1995,15)
                           (1996,17)
                           (1997,18)
                           (1998,19)
                           (1999,20)
                           (2000,22)
                           (2001,18)
                           (2002,17)
                           (2003,18)
                           (2004,20)
                           (2005,22)
                           (2006,23)
                           (2007,24)
                           (2008,21)
                           (2009,18)
                           (2010,20)
                           (2011,20)
                           (2012,22)
                           (2013,20)
                    };
                    \addplot[firstcurve,domain = 1991:2020,-,ultra thick]{0.34434783*x-670.71};
                    \addplot[soliddot] coordinates {(1991,15) (2020,25)};
                \end{axis}
            \end{tikzpicture}]]>
            </latex-image>
        </image>

      </figure>
    </sidebyside>

    <p>
      The rate of change between those two points is
      <me>
        \frac{(25-15)\,\text{percentage points}}{(2020-1991)\text{years}}=\frac{10\,\text{percentage points}}{29\text{years}}\approx0.3448\frac{\text{percentage points}}{\text{year}}
      </me>.
      So we might say that <em>on average</em>
      the rate of change expressed by this data is <m>0.3448</m> percentage points per year.
    </p>
  </subsection>

  <reading-questions>
    <exercise>
      <statement>
        <p>
          Given a table of data with <m>x</m>- and <m>y</m>-values,
          explain how to calculate the rate of change from one row to the next.
        </p>
      </statement>
    </exercise>
    <exercise>
      <statement>
        <p>
          If there is a table of data with <m>x</m>- and <m>y</m>-values,
          and the plot of all that data makes a straight line,
          what is true about the rates of change as you move from row to row in the table?
        </p>
      </statement>
    </exercise>
    <exercise>
      <statement>
        <p>
          What does it mean for a rate of change to be positive (or negative)
          with regard to a graph with two points plotted?
        </p>
      </statement>
    </exercise>
  </reading-questions>

  <exercises>
    <exercisegroup cols="6">
      <title>Finding Patterns</title>
      <exercise>
        <webwork>
          <pg-code>
            @x=(-2..2);
            $m=random(2,6,1);
            $f=Formula("$m x");
            @y=map{$f->eval(x=>$_)}@x;
            Context("Numeric")->variables->add(y=>'Real');
            parser::Assignment->Allow;
            $eq=Formula("y=$f");
          </pg-code>
          <statement>
            <p>
              Write an equation in the form
              <m>y=\ldots</m> suggested by the pattern in the table.
            </p>
            <tabular >
              <col halign="right" />
              <col halign="left" />
              <row bottom="medium">
                <cell><m>x</m></cell>
                <cell><m>y</m></cell>
              </row>
              <row>
                <cell><m><var name="$x[0]" /></m></cell>
                <cell><m><var name="$y[0]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[1]" /></m></cell>
                <cell><m><var name="$y[1]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[2]" /></m></cell>
                <cell><m><var name="$y[2]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[3]" /></m></cell>
                <cell><m><var name="$y[3]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[4]" /></m></cell>
                <cell><m><var name="$y[4]" /></m></cell>
              </row>
            </tabular>
            <p>
              <var name="$eq" width="20" />
            </p>
          </statement>
          <solution>
            <p>
              Each <m>y</m>-value is <m><var name="$m" /></m> times what the corresponding <m>x</m>-value is.
              So the equation is <m><var name="$eq" /></m>.
            </p>
          </solution>
        </webwork>
      </exercise>
      <exercise>
        <webwork>
          <pg-code>
            @x=(3..7);
            $m=random(2,6,1);
            $f=Formula("$m x");
            @y=map{$f->eval(x=>$_)}@x;
            Context("Numeric")->variables->add(y=>'Real');
            parser::Assignment->Allow;
            $eq=Formula("y=$f");
          </pg-code>
          <statement>
            <p>
              Write an equation in the form
              <m>y=\ldots</m> suggested by the pattern in the table.
            </p>
            <tabular >
              <col halign="right" />
              <col halign="left" />
              <row bottom="medium">
                <cell><m>x</m></cell>
                <cell><m>y</m></cell>
              </row>
              <row>
                <cell><m><var name="$x[0]" /></m></cell>
                <cell><m><var name="$y[0]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[1]" /></m></cell>
                <cell><m><var name="$y[1]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[2]" /></m></cell>
                <cell><m><var name="$y[2]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[3]" /></m></cell>
                <cell><m><var name="$y[3]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[4]" /></m></cell>
                <cell><m><var name="$y[4]" /></m></cell>
              </row>
            </tabular>
            <p>
              <var name="$eq" width="20" />
            </p>
          </statement>
          <solution>
            <p>
              Each <m>y</m>-value is <m><var name="$m" /></m> times what the corresponding <m>x</m>-value is.
              So the equation is <m><var name="$eq" /></m>.
            </p>
          </solution>
        </webwork>
      </exercise>
      <exercise>
        <webwork xml:id="webwork-convert-table-to-linear-equation">
          <pg-code>
            $x[0]=random(1,8,1);
            $b=random(4,9,1);
            @x=map{$x[0]+$_}(0..4);
            $f=Formula("x+$b");
            @y=map{$f->eval(x=>$_)}@x;
            Context("Numeric")->variables->add(y=>'Real');
            parser::Assignment->Allow;
            $eq=Formula("y=$f");
          </pg-code>
          <statement>
            <p>
              Write an equation in the form
              <m>y=\ldots</m> suggested by the pattern in the table.
            </p>
            <tabular >
              <col halign="right" />
              <col halign="left" />
              <row bottom="medium">
                <cell><m>x</m></cell>
                <cell><m>y</m></cell>
              </row>
              <row>
                <cell><m><var name="$x[0]" /></m></cell>
                <cell><m><var name="$y[0]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[1]" /></m></cell>
                <cell><m><var name="$y[1]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[2]" /></m></cell>
                <cell><m><var name="$y[2]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[3]" /></m></cell>
                <cell><m><var name="$y[3]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[4]" /></m></cell>
                <cell><m><var name="$y[4]" /></m></cell>
              </row>
            </tabular>
            <p>
              <var name="$eq" width="20" />
            </p>
          </statement>
          <solution>
            <p>
              Each <m>y</m>-value is <m><var name="$b" /></m> more than the corresponding <m>x</m>-value.
              So the equation is <m><var name="$eq" /></m>.
            </p>
          </solution>
        </webwork>
      </exercise>
      <exercise>
        <webwork copy="webwork-convert-table-to-linear-equation"/>
      </exercise>
      <exercise>
        <webwork xml:id="webwork-convert-table-to-linear-equation-2">
          <pg-code>
            @x=NchooseK(20,5);
            $b=non_zero_random(-9,9,1);
            $f=Formula("x+$b")->reduce;
            @y=map{$f->eval(x=>$_)}@x;
            Context("Numeric")->variables->add(y=>'Real');
            parser::Assignment->Allow;
            $eq=Formula("y=$f");
            $absb=abs($b);
            $compstring=($b>0)?'more':'less';
          </pg-code>
          <statement>
            <p>
              Write an equation in the form
              <m>y=\ldots</m> suggested by the pattern in the table.
            </p>
            <tabular >
              <col halign="right" />
              <col halign="left" />
              <row bottom="medium">
                <cell><m>x</m></cell>
                <cell><m>y</m></cell>
              </row>
              <row>
                <cell><m><var name="$x[0]" /></m></cell>
                <cell><m><var name="$y[0]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[1]" /></m></cell>
                <cell><m><var name="$y[1]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[2]" /></m></cell>
                <cell><m><var name="$y[2]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[3]" /></m></cell>
                <cell><m><var name="$y[3]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[4]" /></m></cell>
                <cell><m><var name="$y[4]" /></m></cell>
              </row>
            </tabular>
            <p>
              <var name="$eq" width="20" />
            </p>
          </statement>
          <solution>
            <p>
              Each <m>y</m>-value is <m><var name="$absb" /></m> <var name="$compstring" /> than the corresponding <m>x</m>-value.
              So the equation is <m><var name="$eq" /></m>.
            </p>
          </solution>
        </webwork>
      </exercise>
      <exercise>
        <webwork copy="webwork-convert-table-to-linear-equation-2"/>
      </exercise>
      <exercise>
        <webwork>
          <pg-code>
            @x=map{($_+1)**2}NchooseK(5,5);
            $f=Formula("sqrt(x)");
            @y=map{$f->eval(x=>$_)}@x;
            Context("Numeric")->variables->add(y=>'Real');
            Context()->variables->set(x=>{limits=>[1,10]});
            parser::Assignment->Allow;
            $eq=Formula("y=$f");
          </pg-code>
          <statement>
            <p>
              Write an equation in the form
              <m>y=\ldots</m> suggested by the pattern in the table.
            </p>
            <tabular >
              <col halign="right" />
              <col halign="left" />
              <row bottom="medium">
                <cell><m>x</m></cell>
                <cell><m>y</m></cell>
              </row>
              <row>
                <cell><m><var name="$x[0]" /></m></cell>
                <cell><m><var name="$y[0]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[1]" /></m></cell>
                <cell><m><var name="$y[1]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[2]" /></m></cell>
                <cell><m><var name="$y[2]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[3]" /></m></cell>
                <cell><m><var name="$y[3]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[4]" /></m></cell>
                <cell><m><var name="$y[4]" /></m></cell>
              </row>
            </tabular>
            <p>
              <var name="$eq" width="20" />
            </p>
          </statement>
          <solution>
            <p>
              Each <m>y</m>-value is the square root of the corresponding <m>x</m>-value.
              So the equation is <m><var name="$eq" /></m>.
            </p>
          </solution>
        </webwork>
      </exercise>
      <exercise>
        <webwork>
          <pg-code>
            @x=((map{$_-5}(NchooseK(5,3))), (map{$_+1}(NchooseK(5,2))));
            $f=Formula("abs(x)");
            @y=map{$f->eval(x=>$_)}@x;
            Context("Numeric")->variables->add(y=>'Real');
            parser::Assignment->Allow;
            $eq=Formula("y=$f");
          </pg-code>
          <statement>
            <p>
              Write an equation in the form
              <m>y=\ldots</m> suggested by the pattern in the table.
            </p>
            <tabular >
              <col halign="right" />
              <col halign="left" />
              <row bottom="medium">
                <cell><m>x</m></cell>
                <cell><m>y</m></cell>
              </row>
              <row>
                <cell><m><var name="$x[0]" /></m></cell>
                <cell><m><var name="$y[0]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[1]" /></m></cell>
                <cell><m><var name="$y[1]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[2]" /></m></cell>
                <cell><m><var name="$y[2]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[3]" /></m></cell>
                <cell><m><var name="$y[3]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[4]" /></m></cell>
                <cell><m><var name="$y[4]" /></m></cell>
              </row>
            </tabular>
            <p>
              <var name="$eq" width="20" />
            </p>
          </statement>
          <solution>
            <p>
              Each <m>y</m>-value is the square root of the corresponding <m>x</m>-value.
              So the equation is <m><var name="$eq" /></m>.
            </p>
          </solution>
        </webwork>
      </exercise>
      <exercise>
        <webwork xml:id="webwork-convert-table-to-quadratic-equation">
          <pg-code>
            $t=random(0,2,1);
            $x[0]=random(0,7,1)/10**$t;
            $h=random(1,3,1)/10**$t;
            @x=map{$x[0]+$h*$_}(0..4);
            $f=Formula("x^2");
            @y=map{$f->eval(x=>$_)}@x;
            Context("Numeric")->variables->add(y=>'Real');
            parser::Assignment->Allow;
            $eq=Formula("y=$f");
          </pg-code>
          <statement>
            <p>
              Write an equation in the form
              <m>y=\ldots</m> suggested by the pattern in the table.
            </p>
            <tabular >
              <col halign="right" />
              <col halign="left" />
              <row bottom="medium">
                <cell><m>x</m></cell>
                <cell><m>y</m></cell>
              </row>
              <row>
                <cell><m><var name="$x[0]" /></m></cell>
                <cell><m><var name="$y[0]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[1]" /></m></cell>
                <cell><m><var name="$y[1]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[2]" /></m></cell>
                <cell><m><var name="$y[2]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[3]" /></m></cell>
                <cell><m><var name="$y[3]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[4]" /></m></cell>
                <cell><m><var name="$y[4]" /></m></cell>
              </row>
            </tabular>
            <p>
              <var name="$eq" width="20" />
            </p>
          </statement>
          <solution>
            <p>
              Each <m>y</m>-value is the square of the corresponding <m>x</m>-value.
              So the equation is <m><var name="$eq" /></m>.
            </p>
          </solution>
        </webwork>
      </exercise>
      <exercise>
        <webwork copy="webwork-convert-table-to-quadratic-equation"/>
      </exercise>
      <exercise>
        <webwork xml:id="webwork-convert-table-to-reciprocal-equation">
          <pg-code>
            @x=map{$_+1}NchooseK(99,5);
            $f=Formula("1/x");
            Context("Fraction");
            @y=map{Fraction($f->eval(x=>$_))}@x;
            Context("Numeric")->variables->add(y=>'Real');
            parser::Assignment->Allow;
            $eq=Formula("y=$f");
          </pg-code>
          <statement>
            <p>
              Write an equation in the form
              <m>y=\ldots</m> suggested by the pattern in the table.
            </p>
            <tabular >
              <col halign="right" />
              <col halign="left" />
              <row bottom="medium">
                <cell><m>x</m></cell>
                <cell><m>y</m></cell>
              </row>
              <row>
                <cell><m><var name="$x[0]" /></m></cell>
                <cell><m><var name="$y[0]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[1]" /></m></cell>
                <cell><m><var name="$y[1]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[2]" /></m></cell>
                <cell><m><var name="$y[2]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[3]" /></m></cell>
                <cell><m><var name="$y[3]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[4]" /></m></cell>
                <cell><m><var name="$y[4]" /></m></cell>
              </row>
            </tabular>
            <p>
              <var name="$eq" width="20" />
            </p>
          </statement>
          <solution>
            <p>
              Each <m>y</m>-value is the reciprocal of the corresponding <m>x</m>-value.
              So the equation is <m><var name="$eq" /></m>.
            </p>
          </solution>
        </webwork>
      </exercise>
      <exercise>
        <webwork copy="webwork-convert-table-to-reciprocal-equation"/>
      </exercise>
    </exercisegroup>

    <exercisegroup cols="6">
      <title>Linear Relationships</title>
      <exercise>
        <webwork xml:id="webwork-determine-if-table-data-is-linear">
          <pg-code>
            $m = random(2,9,1);
            $b = random(10,100,1);
            $f = Formula("$m x + $b");
            @x = (0..5);
            @y = map{$f->eval(x=>$_)}(@x);
            $yes = PopUp(['?','yes','no'],1);
            $no = PopUp(['?','yes','no'],2);
          </pg-code>
          <statement>
            <p>
              Does the following table show that <m>x</m> and <m>y</m> have a linear relationship? <var name="$yes" form="popup" />
            </p>
            <tabular>
              <row bottom="medium">
                <cell><m>x</m></cell>
                <cell><m>y</m></cell>
              </row>
              <row>
                <cell><m><var name="$x[0]" /></m></cell>
                <cell><m><var name="$y[0]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[1]" /></m></cell>
                <cell><m><var name="$y[1]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[2]" /></m></cell>
                <cell><m><var name="$y[2]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[3]" /></m></cell>
                <cell><m><var name="$y[3]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[4]" /></m></cell>
                <cell><m><var name="$y[4]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[5]" /></m></cell>
                <cell><m><var name="$y[5]" /></m></cell>
              </row>
            </tabular>
          </statement>
          <solution>
            <p>
              As each <m>x</m>-value increases by <m>1</m>,
              the <m>y</m>-value increases by <m><var name="$m" /></m>.
              So this table does show that <m>x</m> and <m>y</m> have a linear relationship.
            </p>
          </solution>
        </webwork>
      </exercise>
      <exercise>
        <webwork copy="webwork-determine-if-table-data-is-linear"/>
      </exercise>
      <exercise>
        <webwork xml:id="webwork-determine-if-table-data-is-linear-2">
          <pg-code>
            $m = random(-9,-2,1);
            $absm = abs($m);
            $b = random(50,100,1);
            $f = Formula("$m x + $b");
            $start = random(0,10,1);
            @x = map{$_+$start}(0..5);
            @y = map{$f->eval(x=>$_)}(@x);
            $yes = PopUp(['?','yes','no'],1);
            $no = PopUp(['?','yes','no'],2);
          </pg-code>
          <statement>
            <p>
              Does the following table show that <m>x</m> and <m>y</m> have a linear relationship? <var name="$yes" form="popup" />
            </p>
            <tabular>
              <row bottom="medium">
                <cell><m>x</m></cell>
                <cell><m>y</m></cell>
              </row>
              <row>
                <cell><m><var name="$x[0]" /></m></cell>
                <cell><m><var name="$y[0]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[1]" /></m></cell>
                <cell><m><var name="$y[1]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[2]" /></m></cell>
                <cell><m><var name="$y[2]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[3]" /></m></cell>
                <cell><m><var name="$y[3]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[4]" /></m></cell>
                <cell><m><var name="$y[4]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[5]" /></m></cell>
                <cell><m><var name="$y[5]" /></m></cell>
              </row>
            </tabular>
          </statement>
          <solution>
            <p>
              As each <m>x</m>-value increases by <m>1</m>,
              the <m>y</m>-value decreases by <m><var name="$absm" /></m>.
              So this table does show that <m>x</m> and <m>y</m> have a linear relationship.
            </p>
          </solution>
        </webwork>
      </exercise>
      <exercise>
        <webwork copy="webwork-determine-if-table-data-is-linear-2"/>
      </exercise>
      <exercise>
        <webwork xml:id="webwork-determine-if-table-data-is-linear-3">
          <pg-code>
            $a = random(2,5,1);
            $b = random(1,20,1);
            $f = Formula("$a^x + $b");
            $start = random(0,10,1);
            @x = map{$_+$start}(0..5);
            @y = map{$f->eval(x=>$_)}(@x);
            for my $i (0..4) {
                $diff[$i] = $y[$i+1]-$y[$i];
            };
            $yes = PopUp(['?','yes','no'],1);
            $no = PopUp(['?','yes','no'],2);
          </pg-code>
          <statement>
            <p>
              Does the following table show that <m>x</m> and <m>y</m> have a linear relationship? <var name="$no" form="popup" />
            </p>
            <tabular>
              <row bottom="medium">
                <cell><m>x</m></cell>
                <cell><m>y</m></cell>
              </row>
              <row>
                <cell><m><var name="$x[0]" /></m></cell>
                <cell><m><var name="$y[0]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[1]" /></m></cell>
                <cell><m><var name="$y[1]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[2]" /></m></cell>
                <cell><m><var name="$y[2]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[3]" /></m></cell>
                <cell><m><var name="$y[3]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[4]" /></m></cell>
                <cell><m><var name="$y[4]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[5]" /></m></cell>
                <cell><m><var name="$y[5]" /></m></cell>
              </row>
            </tabular>
          </statement>
          <solution>
            <p>
              As each <m>x</m>-value increases by <m>1</m>,
              the <m>y</m>-values increases by <m><var name="$diff[0]" /></m>,
              then <m><var name="$diff[1]" /></m>,
              then <m><var name="$diff[2]" /></m>,
              then <m><var name="$diff[3]" /></m>,
              then <m><var name="$diff[4]" /></m>.
              So this table shows that <m>x</m> and <m>y</m> do not have a linear relationship.
            </p>
          </solution>
        </webwork>
      </exercise>
      <exercise>
        <webwork copy="webwork-determine-if-table-data-is-linear-3"/>
      </exercise>
      <exercise>
        <webwork xml:id="webwork-determine-if-table-data-is-linear-4">
          <pg-code>
            $a = random(2,5,1);
            $b = random(1,20,1);
            $f = Formula("x^$a + $b");
            $start = random(0,2,1);
            @x = map{$_+$start}(0..5);
            @y = map{$f->eval(x=>$_)}(@x);
            for my $i (0..4) {
                $diff[$i] = $y[$i+1]-$y[$i];
            };
            $yes = PopUp(['?','yes','no'],1);
            $no = PopUp(['?','yes','no'],2);
          </pg-code>
          <statement>
            <p>
              Does the following table show that <m>x</m> and <m>y</m> have a linear relationship? <var name="$no" form="popup" />
            </p>
            <tabular>
              <row bottom="medium">
                <cell><m>x</m></cell>
                <cell><m>y</m></cell>
              </row>
              <row>
                <cell><m><var name="$x[0]" /></m></cell>
                <cell><m><var name="$y[0]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[1]" /></m></cell>
                <cell><m><var name="$y[1]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[2]" /></m></cell>
                <cell><m><var name="$y[2]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[3]" /></m></cell>
                <cell><m><var name="$y[3]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[4]" /></m></cell>
                <cell><m><var name="$y[4]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[5]" /></m></cell>
                <cell><m><var name="$y[5]" /></m></cell>
              </row>
            </tabular>
          </statement>
          <solution>
            <p>
              As each <m>x</m>-value increases by <m>1</m>,
              the <m>y</m>-values increases by <m><var name="$diff[0]" /></m>,
              then <m><var name="$diff[1]" /></m>,
              then <m><var name="$diff[2]" /></m>,
              then <m><var name="$diff[3]" /></m>,
              then <m><var name="$diff[4]" /></m>.
              So this table shows that <m>x</m> and <m>y</m> do not have a linear relationship.
            </p>
          </solution>
        </webwork>
      </exercise>
      <exercise>
        <webwork copy="webwork-determine-if-table-data-is-linear-4"/>
      </exercise>
      <exercise>
        <webwork xml:id="webwork-determine-if-table-data-is-linear-5">
          <pg-code>
            $m = non_zero_random(-5,5,0.01);
            $absm = abs($m);
            $incdec = ($m>0) ? 'increases' : 'decreases';
            $b = random(30,100,0.01);
            $f = Formula("$m*x + $b");
            $start = random(-10,10,1);
            @x = map{$_+$start}(0..5);
            @y = map{$f->eval(x=>$_)}(@x);
            $yes = PopUp(['?','yes','no'],1);
            $no = PopUp(['?','yes','no'],2);
          </pg-code>
          <statement>
            <p>
              Does the following table show that <m>x</m> and <m>y</m> have a linear relationship? <var name="$yes" form="popup" />
            </p>
            <tabular>
              <row bottom="medium">
                <cell><m>x</m></cell>
                <cell><m>y</m></cell>
              </row>
              <row>
                <cell><m><var name="$x[0]" /></m></cell>
                <cell><m><var name="$y[0]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[1]" /></m></cell>
                <cell><m><var name="$y[1]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[2]" /></m></cell>
                <cell><m><var name="$y[2]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[3]" /></m></cell>
                <cell><m><var name="$y[3]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[4]" /></m></cell>
                <cell><m><var name="$y[4]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[5]" /></m></cell>
                <cell><m><var name="$y[5]" /></m></cell>
              </row>
            </tabular>
          </statement>
          <solution>
            <p>
              As each <m>x</m>-value increases by <m>1</m>,
              the <m>y</m>-value <var name="$incdec" /> by <m><var name="$absm" /></m>.
              So this table does show that <m>x</m> and <m>y</m> have a linear relationship.
            </p>
          </solution>
        </webwork>
      </exercise>
      <exercise>
        <webwork copy="webwork-determine-if-table-data-is-linear-5"/>
      </exercise>
      <exercise>
        <webwork xml:id="webwork-determine-if-table-data-is-linear-6">
          <pg-code>
            $m = non_zero_random(2,9,1);
            $b = random(1,100,1);
            $f = Formula("$m*x + $b");
            @x = num_sort(NchooseK(20,6));
            @y = map{$f->eval(x=>$_)}(@x);
            $yes = PopUp(['?','yes','no'],1);
            $no = PopUp(['?','yes','no'],2);
            $ydiff = $y[1]-$y[0];
            $xdiff = $x[1]-$x[0];
          </pg-code>
          <statement>
            <p>
              Does the following table show that <m>x</m> and <m>y</m> have a linear relationship? <var name="$yes" form="popup" />
            </p>
            <tabular>
              <row bottom="medium">
                <cell><m>x</m></cell>
                <cell><m>y</m></cell>
              </row>
              <row>
                <cell><m><var name="$x[0]" /></m></cell>
                <cell><m><var name="$y[0]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[1]" /></m></cell>
                <cell><m><var name="$y[1]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[2]" /></m></cell>
                <cell><m><var name="$y[2]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[3]" /></m></cell>
                <cell><m><var name="$y[3]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[4]" /></m></cell>
                <cell><m><var name="$y[4]" /></m></cell>
              </row>
              <row>
                <cell><m><var name="$x[5]" /></m></cell>
                <cell><m><var name="$y[5]" /></m></cell>
              </row>
            </tabular>
          </statement>
          <solution>
            <p>
              The <m>x</m>-values in this table jump erratically.
              However, if we compute the rate of change between consecutive rows in the table,
              the result is always <var name="$m" />.
              For example,
              the rate of change between the first and second rows is
              <me>
                \frac{<var name="$y[1]" />-<var name="$y[0]" />}{<var name="$x[1]" />-<var name="$x[0]" />}=\frac{<var name="$ydiff" />}{<var name="$xdiff" />}=<var name="$m" />
              </me>.
            </p>
          </solution>
        </webwork>
      </exercise>
      <exercise>
        <webwork copy="webwork-determine-if-table-data-is-linear-6"/>
      </exercise>
    </exercisegroup>

    <exercisegroup cols="2">
      <title>Calculating Rate of Change</title>
      <exercise>
        <webwork>
          <pg-code>
            @x=(1990..2014);
            @y=(487849,491064,493754,497432,497659,498396,501646,503205,502945,503637,529922,535185,538803,539546,533120,534112,538091,546747,556442,566143,585261,593859,602954,609520,619360);
            %f=map{$x[$_]=>$y[$_]}(0..24);
            @year=num_sort(@x[NchooseK(25,4)]);
            $newUnits = [
              {name=>'people'},
              {name=>'person',conversion=>{factor=>1,people=>1}},
              {name=>'ppl',conversion=>{factor=>1,people=>1}},
              {name=>'year',conversion=>{factor=>365*24*60*60,s=>1}},
              {name=>'years',conversion=>{factor=>365*24*60*60,s=>1}},
              {name=>'yr',conversion=>{factor=>365*24*60*60,s=>1}},
              {name=>'yrs',conversion=>{factor=>365*24*60*60,s=>1}},
              {name=>'y',conversion=>{factor=>365*24*60*60,s=>1}},
            ];
            @rate=map{Real(($f{$year[2*$_+1]}-$f{$year[2*$_]})/($year[2*$_+1]-$year[2*$_]))}(0,1);
            @rate=map{NumberWithUnits("$_ people/yr",{newUnit=>$newUnits})}(@rate);
            $declines=List(1997,2003);
          </pg-code>
          <statement>
            <p>
              This table gives population estimates for Portland, Oregon from 1990 through 2014.
              <!-- (<url href="https://www.google.com/publicdata/explore?ds=kf7tgg1uo9ude_&amp;met_y=population&amp;idim=place:4159000:5363000&amp;hl=en&amp;dl=en">www.google.com/publicdata</url> as of Oct 11, 2016; Google may update with better estimates) -->
            </p>
            <tabular>
              <col halign="right" />
              <col right="medium" halign="left" />
              <col halign="right" />
              <col halign="left" />
              <row bottom="medium">
                <cell>Year</cell>
                <cell>Population</cell>
                <cell>Year</cell>
                <cell>Population</cell>
              </row>
              <row>
                <cell>1990</cell>
                <cell>487849</cell>
                <cell>2003</cell>
                <cell>539546</cell>
              </row>
              <row>
                <cell>1991</cell>
                <cell>491064</cell>
                <cell>2004</cell>
                <cell>533120</cell>
              </row>
              <row>
                <cell>1992</cell>
                <cell>493754</cell>
                <cell>2005</cell>
                <cell>534112</cell>
              </row>
              <row>
                <cell>1993</cell>
                <cell>497432</cell>
                <cell>2006</cell>
                <cell>538091</cell>
              </row>
              <row>
                <cell>1994</cell>
                <cell>497659</cell>
                <cell>2007</cell>
                <cell>546747</cell>
              </row>
              <row>
                <cell>1995</cell>
                <cell>498396</cell>
                <cell>2008</cell>
                <cell>556442</cell>
              </row>
              <row>
                <cell>1996</cell>
                <cell>501646</cell>
                <cell>2009</cell>
                <cell>566143</cell>
              </row>
              <row>
                <cell>1997</cell>
                <cell>503205</cell>
                <cell>2010</cell>
                <cell>585261</cell>
              </row>
              <row>
                <cell>1998</cell>
                <cell>502945</cell>
                <cell>2011</cell>
                <cell>593859</cell>
              </row>
              <row>
                <cell>1999</cell>
                <cell>503637</cell>
                <cell>2012</cell>
                <cell>602954</cell>
              </row>
              <row>
                <cell>2000</cell>
                <cell>529922</cell>
                <cell>2013</cell>
                <cell>609520</cell>
              </row>
              <row>
                <cell>2001</cell>
                <cell>535185</cell>
                <cell>2014</cell>
                <cell>619360</cell>
              </row>
              <row>
                <cell>2002</cell>
                <cell>538803</cell>
              </row>
            </tabular>
            <p>
              Find the rate of change in Portland population between <var name="$year[0]" /> and <var name="$year[1]" />.
            </p>
            <instruction>
              You can type the unit as <c>people/yr</c>.
            </instruction>
            <p>
              <var name="$rate[0]" width="10" />
            </p>
            <p>
              And what was the rate of change between <var name="$year[2]" /> and <var name="$year[3]" />?
            </p>
            <p>
              <var name="$rate[1]" width="10" />
            </p>
            <p>
              List all the years where there is a negative rate of change between that year and the next year.
            </p>
            <instruction>
              (Use commas to separate your answers.)
            </instruction>
            <p>
              <var name="$declines" width="20" />
            </p>
          </statement>
          <solution>
            <p>
              To find the rate of change between <var name="$year[0]" /> and <var name="$year[1]" />, calculate
              <me>
                \frac{<var name="$f{$year[1]}"/>-<var name="$f{$year[0]}"/>}{<var name="$year[1]"/>-<var name="$year[0]"/>}=<var name="$rate[0]"/>
              </me>.
            </p>
            <p>
              To find the rate of change between <var name="$year[2]" /> and <var name="$year[3]" />, calculate
              <me>
                \frac{<var name="$f{$year[3]}"/>-<var name="$f{$year[2]}"/>}{<var name="$year[3]"/>-<var name="$year[2]"/>}=<var name="$rate[1]"/>
              </me>.
            </p>
            <p>
              The rate of change is negative for the year following 1997 and the year following 2003, and no other years.
              These are the only years in the data table where the population goes down the next year.
            </p>
          </solution>
        </webwork>
      </exercise>
      <exercise>
        <webwork>
          <pg-code>
            @x=(1990..2014);
            @y=(487849,491064,493754,497432,497659,498396,501646,503205,502945,503637,529922,535185,538803,539546,533120,534112,538091,546747,556442,566143,585261,593859,602954,609520,619360);
            %f=map{$x[$_]=>$y[$_]}(0..24);
            @year=num_sort(@x[NchooseK(25,4)]);
            @rate=map{Real(($f{$year[2*$_+1]}-$f{$year[2*$_]})/($year[2*$_+1]-$year[2*$_]))}(0,1);
            Context()->flags->set(tolType=>'absolute',tolerance=>0.5);
            $answer=List(1999,2001);
            Context("Numeric");
            $rate=($f{2001}-$f{1999})/2;
            $newUnits = [
              {name=>'people'},
              {name=>'person',conversion=>{factor=>1,people=>1}},
              {name=>'ppl',conversion=>{factor=>1,people=>1}},
              {name=>'year',conversion=>{factor=>365*24*60*60,s=>1}},
              {name=>'years',conversion=>{factor=>365*24*60*60,s=>1}},
              {name=>'yr',conversion=>{factor=>365*24*60*60,s=>1}},
              {name=>'yrs',conversion=>{factor=>365*24*60*60,s=>1}},
              {name=>'y',conversion=>{factor=>365*24*60*60,s=>1}},
            ];
            $rate=($f{2001}-$f{1999})/2;
            $rate=NumberWithUnits("$rate people/yr",{newUnit=>$newUnits});
            for my$j(0,1){
              $graph[$j]=init_graph(1989,-100000,2015,700000,axes=>[1990,0],grid=>[26,8],size=>[240,200]);
              $graph[$j]->lb('reset');
              $graph[$j]->lb(new Label(2014,6000,'year','black','right','bottom','large'));
              $graph[$j]->lb(new Label(1990.5,690000,'population','black','left','top','large'));
              for my$i(0..24){$graph[$j]->moveTo($x[$i],-6000);$graph[$j]->lineTo($x[$i],6000);
                $graph[$j]->stamps(closed_circle($x[$i],$y[$i],'blue'));
              };
              for my$i(1995,2000,2005,2010){$graph[$j]->moveTo($x[$i],-12000);$graph[$j]->lineTo($x[$i],12000);
                $graph[$j]->lb(new Label($i,-12000,$i,'black','center','top','large'));
              };
              for my$i(1..6){$graph[$j]->moveTo(1989.8,$i*10**5);$graph[$j]->lineTo(1990.2,$i*10**5);};
              for my$i(2,4,6){$graph[$j]->lb(new Label(1990.3,$i*100000,$i*100000,'black','left','middle','large'));};
            };
            for my$i(1998,1999,2008,2009){
              $slope{$i}=($f{$i+2}-$f{$i})/2;
              add_functions($graph[1],"$slope{$i}*(x-$i)+$f{$i} for x in &lt;1989,2015> using color:black and weight:1");
            };
          </pg-code>
          <statement>
            <p>
              This table and graph gives population estimates for Portland, Oregon from 1990 through 2014. <!-- (<url href="https://www.google.com/publicdata/explore?ds=kf7tgg1uo9ude_&amp;met_y=population&amp;idim=place:4159000:5363000&amp;hl=en&amp;dl=en">www.google.com/publicdata</url> as of Oct 11, 2016; Google may update with better estimates) -->
            </p>
            <tabular>
              <col halign="right" />
              <col right="medium" halign="left" />
              <col halign="right" />
              <col halign="left" />
              <row bottom="medium">
                <cell>Year</cell>
                <cell>Population</cell>
                <cell>Year</cell>
                <cell>Population</cell>
              </row>
              <row>
                <cell>1990</cell>
                <cell>487849</cell>
                <cell>2003</cell>
                <cell>539546</cell>
              </row>
              <row>
                <cell>1991</cell>
                <cell>491064</cell>
                <cell>2004</cell>
                <cell>533120</cell>
              </row>
              <row>
                <cell>1992</cell>
                <cell>493754</cell>
                <cell>2005</cell>
                <cell>534112</cell>
              </row>
              <row>
                <cell>1993</cell>
                <cell>497432</cell>
                <cell>2006</cell>
                <cell>538091</cell>
              </row>
              <row>
                <cell>1994</cell>
                <cell>497659</cell>
                <cell>2007</cell>
                <cell>546747</cell>
              </row>
              <row>
                <cell>1995</cell>
                <cell>498396</cell>
                <cell>2008</cell>
                <cell>556442</cell>
              </row>
              <row>
                <cell>1996</cell>
                <cell>501646</cell>
                <cell>2009</cell>
                <cell>566143</cell>
              </row>
              <row>
                <cell>1997</cell>
                <cell>503205</cell>
                <cell>2010</cell>
                <cell>585261</cell>
              </row>
              <row>
                <cell>1998</cell>
                <cell>502945</cell>
                <cell>2011</cell>
                <cell>593859</cell>
              </row>
              <row>
                <cell>1999</cell>
                <cell>503637</cell>
                <cell>2012</cell>
                <cell>602954</cell>
              </row>
              <row>
                <cell>2000</cell>
                <cell>529922</cell>
                <cell>2013</cell>
                <cell>609520</cell>
              </row>
              <row>
                <cell>2001</cell>
                <cell>535185</cell>
                <cell>2014</cell>
                <cell>619360</cell>
              </row>
              <row>
                <cell>2002</cell>
                <cell>538803</cell>
              </row>
            </tabular>
            <image pg-name="$graph[0]" width="40%"/>
            <p>
              Between what two years that are two years apart was the rate of change highest?
            </p>
            <instruction>
              (Use commas to separate your answers.)
            </instruction>
            <p>
              <var name="$answer" width="20" />
            </p>
            <p>
              What was that rate of change?
            </p>
            <instruction>
              You can type the unit as <c>people/yr</c>.
            </instruction>
            <p>
              <var name="$rate" width="10" />
            </p>
          </statement>
          <solution>
            <p>
              It's not clear where that steepest two-year jump is,
              but the candidates periods start in 1998, 1999, 2008, and 2009.
            </p>
            <image pg-name="$graph[1]" />
            <p>
              Between 1998 and 2000:
              <me>
                \frac{529922-502945}{2000-1998}=13488.5
              </me>.
            </p>
            <p>
              Between 1999 and 2001:
              <me>
                \frac{535185-503637}{2001-1999}=15774
              </me>.
            </p>
            <p>
              Between 2008 and 2010:
              <me>
                \frac{585261-556442}{2010-2008}=14409.5
              </me>.
            </p>
            <p>
              Between 2009 and 2011:
              <me>
                \frac{593858-566143}{2011-2009}=13857.5
              </me>.
            </p>
            <p>
              So the rate of change was highest between 1999 and 2001.
            </p>
          </solution>
        </webwork>
      </exercise>
    </exercisegroup>
  </exercises>
</section>

