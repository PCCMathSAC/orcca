<?xml version="1.0" encoding="UTF-8" ?>
<!-- *********************************************************************-->
<!-- Copyright 2016-2019                                                  -->
<!-- Portland Community College                                           -->
<!--                                                                      -->
<!-- This file is part of Open Resources for Community College Algebra    -->
<!-- (ORCCA).                                                             -->
<!--                                                                      -->
<!-- Open Resources for Community College Algebra is licensed under a     -->
<!-- Creative Commons Attribution 4.0 International License.              -->
<!--                                                                      -->
<!-- Under this license, any user of this textbook or the textbook        -->
<!-- contents must provide proper attribution as follows.                 -->
<!--                                                                      -->
<!-- If you redistribute all or part of this textbook, then you must      -->
<!-- include in every digital format page view (including but not         -->
<!-- limited to EPUB, PDF, and HTML) and on every physical printed page   -->
<!-- the following attribution:                                           -->
<!--                                                                      -->
<!-- Original source material, products with readable and accessible      -->
<!-- math content, and other information freely available at              -->
<!-- pcc.edu/orcca.                                                       -->
<!--                                                                      -->
<!-- If you redistribute all or part of this textbook, then you must      -->
<!-- reproduce any math content (such as math expressions and equations)  -->
<!-- in a readable manner, and offer math content in at least one web     -->
<!-- accessible manner.                                                   -->
<!--                                                                      -->
<!-- The Portland Community College name, Portland Community College      -->
<!-- logo, ORCCA name, Open Resources for Community College Algebra name, -->
<!-- ORCCA logo, and front and back cover designs are not subject to the  -->
<!-- Creative Commons license and may not be reproduced without the       -->
<!-- prior and express written consent of Portland Community College.     -->
<!--                                                                      -->
<!-- For questions regarding this license, please contact                 -->
<!-- orcca-group@pcc.edu.                                                 -->
<!-- *********************************************************************-->
<section xml:id="section-order-of-operations">
  <title>Order of Operations</title>

  <introduction>
    <p>
      When you write something down,
      it's important that the people who read it will understand what you actually meant.
      But language can be ambiguous.
      If we say in English,
      <q>two times three squared,</q> do we mean that:
      <ul>
        <li>
          <p>
            <m>2</m> is multiplied by <m>3</m>,
            and then the result is squared?
            That would mean first we have <m>6</m>, and then we square <m>6</m> to end with <m>36</m>.
          </p>
        </li>

        <li>
          <p>
            Or that <m>2</m> is multiplied by <q>three squared</q>?
            That would mean first we square <m>3</m> to get <m>9</m>, and then we multiply by <m>2</m> to end with <m>18</m>.
          </p>
        </li>
      </ul>
      So it makes a difference, and the English phrase <q>two times three squared</q> is arguably ambiguous.
    </p>

    <p>
      English is allowed to be ambiguous.
      But math needs to be unambiguous and mean the same thing for everyone who reads it.
      So for this reason, there are some rules that we've all agreed to that control what a math expression really means.
      These rules are called the <q>order of operations</q>, which we review here.
    </p>

    <figure>
      <caption>Alternative Video Lesson</caption>
      <video youtubeplaylist="PLmuZCPhWPt-cE9eEq9ZW5Hj64c3iPwOU5" />
    </figure>
  </introduction>

  <subsection>
    <title>Grouping Symbols</title>
    <p>
      Consider the expression <m>2\cdot3^2</m>.
      There are two math operations here:
      at some point two things will be multiplied, and at some point something will be raised to a power.
      The result depends on which operation you decide to do first:
      If you multiply <m>2\cdot3</m>,
      and then square the result, you end with <m>36</m>.
      If you square <m>3</m>,
      and then multiply that result by <m>2</m>, you end with <m>18</m>.
      So if we want all people everywhere to interpret <m>2\cdot3^2</m> in the same way,
      then only <em>one</em> of these can be correct.
    </p>

    <p>
      One tool that we have to clearly tell readers which thing to do first is a pair of grouping symbols,
      like parentheses and brackets.
      If you <em>intend</em> to do the multiplication first,
      then writing <m>(2\cdot3)^2</m>clearly tells your reader to do that.
      And if you <em>intend</em> to execute the power first,
      then writing <m>2\cdot\left(3^2\right)</m> clearly tells your reader to do that.
    </p>

    <p>
      To visualize the difference between
      <m>2\cdot \left(3^2\right)</m> or <m>(2\cdot 3)^2</m>,
      consider these garden plots:
    </p>

    <sidebyside widths="40% 40%" valign="bottom">
      <figure>
        <caption><quantity>
          <mag>3</mag><unit base="yard"/>
        </quantity>
        is squared, then doubled: <m>2\cdot\left(3^2\right)</m></caption>
        <image xml:id="image-small-garden">
          <description>two squares, side by side; each square is labeled as 3 yd wide and 3 yd high, and labeled as having area 9 yd^2</description>
            <latex-image>
              \begin{tikzpicture}
                \draw[fill=secondcolor!20] (0,3) -- (0,0) -- (3,0) -- (3,3) -- cycle;
                \draw[fill=secondcolor!20,xshift=4cm] (0,3) -- (0,0) -- (3,0) -- (3,3) -- cycle;
                \node at (1.5,1.5) {$9\,\text{yd}^2$};
                \node[below] at (1.5,0) {$3\,\text{yd}$};
              \end{tikzpicture}
            </latex-image>
        </image>
      </figure>
      <figure>
        <caption><quantity>
          <mag>3</mag><unit base="yard"/>
        </quantity>
        is doubled, then squared: <m>(2\cdot3)^2</m></caption>
        <image xml:id="image-large-garden">
          <description>a square whose width is labeled as 2*3 yd = 6 yd wide and whose height is also 6 yd; the square's area is labeled as being area 36 yd^2</description>
            <latex-image>
              \begin{tikzpicture}
                \draw[fill=secondcolor!20] (0,6) -- (0,0) -- (6,0) -- (6,6) -- cycle;
                \node at (3,3) {$36\,\text{yd}^2$};
                \node[below] (A) at (1.5,0) {$3\,\text{yd}$};
                \draw[->,dashed] (A) -| (0,0);
                \draw[->,dashed] (A) -| (3,0);
                \node at (7,0) {};
              \end{tikzpicture}
            </latex-image>
        </image>
      </figure>
    </sidebyside>

    <p>
      If we find <m>3^2</m>,
      we have the area of one of the small square garden plots on the left.
      Then if we double that, we have <m>2\cdot\left(3^2\right)</m>,
      the area of the entire left garden plot.
    </p>

    <p>
      But if we find <m>(2\cdot3)^2</m>,
      then first we are doubling <m>3</m>.
      So we are getting the area of a large square garden plot whose sides are twice as long.
      We end up with the area of the entire garden plot on the right.
    </p>

    <p>
      The point is that these amounts are different.
    </p>

    <exercise>
      <webwork xml:id="webwork-order-of-operations-checkpoint-aminusgroupgroupbplusctimesd">
        <pg-code>
            Context("LimitedNumeric");
        </pg-code>
        <statement>
          <p>
            Calculate the value of <m>30-((2+3)\cdot2)</m>,
            respecting the order that the grouping symbols are telling you to execute the arithmetic operations.
          </p>
          <p>
            <var name="20" width="10"/>
          </p>
        </statement>
        <solution>
          <p>
            The grouping symbols tell us what to work on first.
            In this exercise,
            we have grouping symbols within grouping symbols, so any operation in there
            (the addition)
            should be executed first:
            <md>
              <mrow>30-\left((2+3)\cdot2\right)\amp=30-\left(\highlight{5}\cdot2\right)</mrow>
              <mrow>\amp=30-\highlight{10}</mrow>
              <mrow>\amp=\highlight{20}</mrow>
            </md>
          </p>
        </solution>
      </webwork>
    </exercise>
  </subsection>

  <subsection>
    <title>Order of Operations</title>
    <p>
      If math expressions used grouping symbols for every arithmetic operation,
      we wouldn't need <q>order of operations</q>.
      Some computer systems work that way,
      <em>requiring</em> the use of grouping symbols all the time.
      But it is more common to allow math expressions that don't have grouping symbols everywhere,
      like <m>5+3\cdot2</m>.
      Should the addition <m>5+3</m> be done first,
      or should the multiplication <m>3\cdot2</m> be done first?
      We have a set of rules the world has agreed to, known as the
      <q>order of operations</q>. They tell us what to do first.
    </p>

    <p>
      The <term>order of operations</term>
      is nothing more than an agreement that we all have made to prioritize doing arithmetic operations in a certain order.
    </p>

    <list xml:id="list-order-of-operations">
      <title>Order of Operations</title>                                                                                <idx><h>order of operations</h></idx>
      <dl>
        <li>
          <title>(P)arentheses and other grouping symbols</title>
          <p>
            Grouping symbols <q>group</q> the expression inside them,
            and the arithmetic within that group needs to be done first.
          </p>
        </li>

        <li>
          <title>(E)xponentiation</title>
          <p>
            After grouping symbols, exponentiation has the highest priority.
            Raise things to powers before doing any other arithmetic.
          </p>
        </li>

        <li>
          <title>(M)ultiplication, (D)ivision, and Negation</title>
          <p>
            After all exponentiation is done,
            start doing multiplication, division, and negation.
            These things all have equal priority.
            If there are more than one of them in your expression,
            do these things in order from left to right as you would naturally read the expression.
          </p>
        </li>

        <li>
          <title>(A)ddition and (S)ubtraction</title>
          <p>
            After all other arithmetic is done,
            addition and subtraction are all that is left.
            They have equal priority.
            If there are more than one of them in your expression,
            do these things in order from left to right as you would naturally read the expression.
          </p>
        </li>
      </dl>
    </list>

    <p>
      To help remember the order of operations, consider the acronym <acro>PEMDAS</acro>.
      You might use mnemonic devices to help remember this
      such as <q>Please Excuse My Dear Aunt Sally</q>, <q>People Eat More Donuts After School</q>, etc.
    </p>

    <p>
      We'll start with a few examples that only invoke a few operations each.
    </p>

    <example xml:id="example-order-of-operations">
      <p>
        Use the order of operations to simplify the following expressions.

        <ol marker="a.">
          <li>
            <p>
              <m>10+2\cdot 3</m>.
              With this expression,
              we have addition and multiplication.
              The order of operations says the multiplication has higher priority,
              so do that first:
              <md>
                <mrow>10+2\cdot 3\amp =10+\nextoperation{2\cdot 3}</mrow>
                <mrow>\amp=10+\highlight{6}</mrow>
                <mrow>\amp=\highlight{16}</mrow>
              </md>
            </p>
          </li>

          <li>
            <p>
              <m>4+10\div 2 - 1</m>.
              According to the order of operations,
              the first thing to do is the division.
              After that, we'll apply the addition and subtraction working left to right:
              <md>
                <mrow>4+10\div2-1\amp=4+\nextoperation{10\div2}-1</mrow>
                <mrow>\amp=\nextoperation{4+\highlight{5}}-1</mrow>
                <mrow>\amp=\highlight{9}-1</mrow>
                <mrow>\amp=\highlight{8}</mrow>
              </md>
            </p>
          </li>

          <li>
            <p>
              <m>7-10+4</m>.
              This expression <em>only</em> has subtraction and addition.
              These operations tie for priority (even though <q>A</q> comes before <q>S</q> in <acro>PEMDAS</acro>).
              So we work left to right to do them:
              <md>
                <mrow>7-10+4\amp=\nextoperation{7-10}+4</mrow>
                <mrow>\amp=\highlight{-3}+4</mrow>
                <mrow>\amp=1</mrow>
              </md>
            </p>
          </li>

          <li>
            <p>
              <m>20\div 4\cdot 7</m>.
              This expression has only division and multiplication.
              Again, we have two operations that tie for priority,
              so we do them in order from left to right:
              <md>
                <mrow>20\div 4\cdot 5\amp=\nextoperation{20\div 4} \cdot 5</mrow>
                <mrow>\amp=\highlight{5}\cdot5</mrow>
                <mrow>\amp=\highlight{25}</mrow>
              </md>
            </p>
          </li>

          <li>
            <p>
              <m>(6+7)^2</m>.
              Here we have addition inside parentheses,
              and an exponent of <m>2</m> outside.
              We must do the arithmetic inside the parentheses first:
              <md>
                <mrow>(6+7)^2\amp= (\nextoperation{6+7})^2</mrow>
                <mrow>\amp= \highlight{13}^2</mrow>
                <mrow>\amp= \highlight{169}</mrow>
              </md>
            </p>
          </li>

          <li xml:id="item-parenthetical-multiplication">
            <p>
              <m>4(2)^3</m>.
              This expression has multiplication and an exponent.
              There are parentheses, but no operation inside them.
              Parentheses used this way are just to make it clear that the <m>4</m> and <m>2</m> are separate numbers,
              not to be confused with the number <m>42</m>.
              Exponentiation has the higher priority,
              so we'll do that part first, and then multiply:
              <md>
                <mrow>4(2)^3 \amp= 4\nextoperation{(2)^3}</mrow>
                <mrow>\amp= 4(\highlight{8})</mrow>
                <mrow>\amp= \highlight{32}</mrow>
              </md>
            </p>
          </li>
        </ol>
      </p>
    </example>

    <remark>
      <p>
        There are several different ways to write multiplication.
        We can use the symbols <m>\cdot</m>,
        <m>\times</m>, and <m>*</m> to mean multiplication.
        We can also write two things right next to each other with no symbol in between them
        to mean multiplication. That is what is happening in
        <xref ref="item-parenthetical-multiplication">Item</xref>, where the <m>4</m> is written right next to the
        <m>(2)^3</m> with no symbol in between.
      </p>
      <p>
                                                                                                                        <idx><h>multiplication</h><h>explicit</h></idx>
                                                                                                                        <idx><h>multiplication</h><h>implicit</h></idx>
        Using a symbol for multiplication is called <q>explicit multiplication</q> and not writing any symbol at all is
        called <q>implicit multiplication</q>. For this textbook, explicit and implicit multiplication have the
        same priority in the order of operations. However there are some conventions out in the real world where
        implicit multiplication has a higher priority in the order of operations than explicit multiplication.
        You may have seen memes with expressions like <m>6\div2(3)</m> that play on how the real world
        has more than one convention for the order of operations.
      </p>
    </remark>

    <!-- <example>
      <statement>
        <p>
          Simplify <m>10-4(5-7)^3</m>.
        </p>
      </statement>
      <solution>
        <p>
          For the expression <m>10-4(5-7)^3</m>,
          we have simplify what's inside parentheses first,
          then we'll apply the exponent,
          then multiply, and finally subtract:
          <md>
            <mrow>10-4(5-7)^3\amp=10-4(\nextoperation{5-7})^3</mrow>
            <mrow>\amp=10-4\nextoperation{(\highlight{-2})^3}</mrow>
            <mrow>\amp=10-\nextoperation{4(\highlight{-8})}</mrow>
            <mrow>\amp=10-\highlight{(-32)}</mrow>
            <mrow>\amp=10+32</mrow>
            <mrow>\amp=\highlight{42}</mrow>
          </md>
        </p>
      </solution>
    </example>

    <example>
      <statement>
        <p>
          Simplify <m>6-(-8)^2\div 4+1</m>.
        </p>
      </statement>
      <solution>
        <p>
          To simplify <m>6-(-8)^2\div 4+1</m>,
          we'll first apply the exponent of <m>2</m> to <m>-8</m>,
          making sure to recall that <m>(-8)^2=64</m>.
          After this, we'll apply division.
          As a final step, we'll be have subtraction and addition,
          which we'll apply working left-to-right:
          <md>
            <mrow>6-(-8)^2\div 4+1 \amp= 6-\nextoperation{(-8)^2}\div 4+1</mrow>
            <mrow>\amp=6-\nextoperation{(\highlight{64})\div 4}+1</mrow>
            <mrow>\amp=\nextoperation{6-\highlight{16}}+1</mrow>
            <mrow>\amp=\highlight{-10}+1</mrow>
            <mrow>\amp=\highlight{-9}</mrow>
          </md>
        </p>
      </solution>
    </example> -->

    <exercise>
      <title>Practice with order of operations</title>
      <webwork xml:id="webwork-order-of-operations-checkpoint-stepbystep">
        <pg-code>
          Context()->operators->set(
            '+' => {class => 'bizarro::BOP::add', isCommand => 1},
            '-' => {class => 'bizarro::BOP::subtract', isCommand => 1},
            '*' => {class => 'bizarro::BOP::multiply', isCommand => 1},
            ' *' => {class => 'bizarro::BOP::multiply', isCommand => 1},
            '* ' => {class => 'bizarro::BOP::multiply', isCommand => 1},
            '/' => {class => 'bizarro::BOP::divide', isCommand => 1},
            ' /' => {class => 'bizarro::BOP::divide', isCommand => 1},
            '/ ' => {class => 'bizarro::BOP::divide', isCommand => 1},
            '//' => {class => 'bizarro::BOP::divide', isCommand => 1},
            '**' => {class => 'bizarro::BOP::power', isCommand => 1, perl=>undef},
            '^' => {class => 'bizarro::BOP::power', isCommand => 1, perl=>undef},
          );
          Context()->flags->set(reduceConstants=>0,reduceConstantFunctions=>0);
          $step[0]=Formula("5-3(3)^2");
          $step[1]=Formula("5-3(9)");
          $step[2]=Formula("5-27");
          $msg = "Just apply one step at a time from the order of operations";
          $ev[0]=$step[0]->cmp(checker=>sub{
            my ( $correct, $student, $ansHash ) = @_;
            return 0 if $ansHash->{isPreview} || $correct != $student;
            $student = $ansHash->{student_formula};
            $correct = $correct->{original_formula} if defined $correct->{original_formula};
            $student = Formula("$student"); $correct = Formula("$correct");
            return 0 unless ($correct == $student);
            Context()->flags->set(bizarroSub=>1,bizarroPow=>1);
            delete $correct->{test_values}, $student->{test_values};
            my $OK = (($correct == $student) or ($student == $correct));
            Context()->flags->set(bizarroSub=>0,bizarroPow=>0);
            Value::Error("$msg") unless $OK;
            return $OK;
          });
          $ev[1]=$step[1]->cmp(checker=>sub{
            my ( $correct, $student, $ansHash ) = @_;
            return 0 if $ansHash->{isPreview} || $correct != $student;
            $student = $ansHash->{student_formula};
            $correct = $correct->{original_formula} if defined $correct->{original_formula};
            $student = Formula("$student"); $correct = Formula("$correct");
            return 0 unless ($correct == $student);
            Context()->flags->set(bizarroMul=>1,bizarroPow=>1);
            delete $correct->{test_values}, $student->{test_values};
            my $OK = (($correct == $student) or ($student == $correct));
            Context()->flags->set(bizarroMul=>0,bizarroPow=>0);
            Value::Error("$msg") unless $OK;
            return $OK;
          });
          $ev[2]=$step[2]->cmp(checker=>sub{
            my ( $correct, $student, $ansHash ) = @_;
            return 0 if $ansHash->{isPreview} || $correct != $student;
            $student = $ansHash->{student_formula};
            $correct = $correct->{original_formula} if defined $correct->{original_formula};
            $student = Formula("$student"); $correct = Formula("$correct");
            return 0 unless ($correct == $student);
            Context()->flags->set(bizarroMul=>1,bizarroSub=>1);
            delete $correct->{test_values}, $student->{test_values};
            my $OK = (($correct == $student) or ($student == $correct));
            Context()->flags->set(bizarroMul=>0,bizarroSub=>0);
            Value::Error("$msg") unless $OK;
              return $OK;
          });
          Context("LimitedNumeric");
          $step[3]=Formula("-22");
        </pg-code>
        <introduction>
          <p>
            Simplify this expression one step at a time,
            using the order of operations.
          </p>
        </introduction>
        <task>
          <statement>
            <p>
              <m>5-3(7-4)^2={}</m><var name="$step[0]" evaluator="$ev[0]" width="15" />
            </p>
          </statement>
          <solution>
            <p>
              <md>
                <mrow>5-3(\nextoperation{7-4})^2\amp=5-3\nextoperation{(3)^2}</mrow>
              </md>
            </p>
          </solution>
        </task>
        <task>
          <statement>
            <p>
              <m>\phantom{5-3(7-4)^2}={}</m><var name="$step[1]" evaluator="$ev[1]" width="15" />
            </p>
          </statement>
          <solution>
            <p>
              <md>
                <mrow>\amp=5-\nextoperation{3(9)}</mrow>
              </md>
            </p>
          </solution>
        </task>
        <task>
          <statement>
            <p>
              <m>\phantom{5-3(7-4)^2}={}</m><var name="$step[2]" evaluator="$ev[2]" width="15" />
            </p>
          </statement>
          <solution>
            <p>
              <md>
                <mrow>\amp=5-27</mrow>
              </md>
            </p>
          </solution>
        </task>
        <task>
          <statement>
            <p>
              <m>\phantom{5-3(7-4)^2}={}</m><var name="$step[3]" width="15" />
            </p>
          </statement>
          <solution>
            <p>
              <md>
                <mrow>\amp=-22</mrow>
              </md>
            </p>
          </solution>
        </task>
      </webwork>
    </exercise>

    <exercise>
      <webwork xml:id="webwork-order-of-operations-checkpoint-adivgroupgroupbdivcplusdpluse">
        <statement>
          <p>
            Simplify <m>24\div(15\div 3+1)+2</m>.
          </p>
          <p>
            <var name="6" width="10" />
          </p>
        </statement>
        <solution>
          <p>
            With the expression <m>24\div(15\div 3+1) +2</m>,
            we'll simplify what's inside the parentheses according to the order of operations,
            and then take <m>24</m> divided by that expression as our last step:
            <md>
              <mrow>24\div(15\div 3+1) +2\amp= 24\div(\nextoperation{15\div 3}+1) +2</mrow>
              <mrow>\amp=24\div(\nextoperation{\highlight{5}+1}) +2</mrow>
              <mrow>\amp=\nextoperation{24\div \highlight{6}}+2</mrow>
              <mrow>\amp=\highlight{4}+2</mrow>
              <mrow>\amp=\highlight{6}</mrow>
            </md>
          </p>
        </solution>
      </webwork>
    </exercise>
    <exercise>
      <webwork xml:id="webwork-order-of-operations-checkpoint-groupaminusgroupbsquareddivgroupcminusdcubed">
        <pg-code>
          Context("LimitedFraction");
          $ans=Fraction(-1,2);
        </pg-code>
        <statement>
          <p>
            Simplify <m>(20-4^2)\div(4-6)^3</m>.
          </p>
          <p>
            <var name="$ans" width="10" />
          </p>
        </statement>
        <solution>
          <p>
            The expression <m>(20-4^2)(4-6)^3</m> has two sets of parentheses,
            so our first step will be to simplify what's inside each of those first according to the order of operations.
            Once we've done that, we'll apply the exponent and then finally divide:
            <md>
              <mrow>(20-4^2)\div(4-6)^3 \amp= (20-\nextoperation{4^2})(4-6)^3</mrow>
              <mrow>\amp= (\nextoperation{20-\highlight{16}})(4-6)^3</mrow>
              <mrow>\amp= \highlight{4}(\nextoperation{4-6})^3</mrow>
              <mrow>\amp= 4\nextoperation{(\highlight{-2})^3}</mrow>
              <mrow>\amp= \nextoperation{4(\highlight{-8})}</mrow>
              <mrow>\amp= \highlight{-32}</mrow>
            </md>
          </p>
        </solution>
      </webwork>
    </exercise>
  </subsection>

  <subsection>
    <title>Absolute Value and Implied Grouping</title>
    <p>
      Grouping symbols are more than just parentheses and brackets.
      Each of the following operations <em>implies</em> some grouping.
    </p>

    <p>
      <dl>
        <li>
          <title>Absolute Value Bars</title>                                                                            <idx><h>absolute value</h><h>implied grouping</h></idx>
          <p>
            Absolute value bars group the expression inside just like a set of parentheses would.
            In the expression <m>3\abs{2-5}</m>,
            the first thing to do is subtract <m>2-5</m> since that is inside the absolute value bars.
          </p>
        </li>

        <li>
          <title>Radicals</title>                                                                                       <idx><h>radical</h><h>implied grouping</h></idx>
          <p>
            The same is true with a radical symbol. Everything inside the radical is grouped.
            For example with <m>4+2\sqrt{12-3}</m>, the first arithmetic to do is subtract <m>12-3</m>.
          </p>
        </li>

        <li>
          <title>Fraction Bars</title>                                                                                  <idx><h>fraction</h><h>implied grouping</h></idx>
          <p>
            A fraction bar can create <em>two</em> groups, one in the numerator and one in the denominator.
            With the expression <m>\frac{2+3}{5-2}\div4</m>, the first arithmetic to take care of is adding <m>2+3</m>
            and subtracting <m>5-2</m>. These two groups can be worked on separately in any order.
          </p>
        </li>

        <li>
          <title>Exponents</title>                                                                                      <idx><h>exponent</h><h>implied grouping</h></idx>
          <p>
            Content that is inside an exponent is treated as one group,
            as with <m>2+^{2\cdot3}</m>. In that example, the first arithmetic to take care of is multiplying
            <m>2\cdot3</m>.
          </p>
        </li>
      </dl>
    </p>

    <p>
      Each of these implied groupings also ask you to do something once the arithmetic on the inside is completed.
      Actually taking the absolute value or the square root, perhaps.
      Doing the division in the case of a fraction. Raising something to a power.
      But <em>before</em> doing those things, all of the arithmetic <em>inside</em> the groups should be take care of.
    </p>

    <example>
      <p>
        Use the order of operations to simplify the following expressions.
        <ol marker="a.">
          <li>
            <p>
              <m>4-3\abs{5-7}</m>.
              The absolute value bars group the <m>5-7</m> so we must do that subtraction first.
              Then we take the absolute value and continue:
              <md>
                <mrow>4-3\abs{5-7} \amp= 4-3\abs{\nextoperation{5-7}}</mrow>
                <mrow>\amp= 4-3\nextoperation{\abs{\highlight{-2}}}</mrow>
                <mrow>\amp= 4-\nextoperation{3(\highlight{2})}</mrow>
                <mrow>\amp= 4-\highlight{6}</mrow>
                <mrow>\amp= \highlight{-2}</mrow>
              </md>
              It would be a mistake to subtract <m>4-3</m> first,
              because that <m>3</m> is multiplied by the <m>\abs{5-7}</m>.
              So subtracting <m>4-3</m> would violate the order of operations.
            </p>
          </li>

          <li>
            <p>
              <m>8-\sqrt{5^2-8\cdot 2}</m>.
              The radical is grouping <m>5^2-8\cdot 2</m>, which must be simplified first.
              Then we take the square root and continue:
              <md>
                <mrow>8-\sqrt{5^2-8\cdot 2} \amp= 8-\sqrt{\nextoperation{5^2}-8\cdot 2}</mrow>
                <mrow>\amp= 8-\sqrt{\highlight{25}-\nextoperation{8\cdot 2}}</mrow>
                <mrow>\amp= 8-\sqrt{\nextoperation{25-\highlight{16}}}</mrow>
                <mrow>\amp= 8-\nextoperation{\sqrt{\highlight{9}}}</mrow>
                <mrow>\amp= 8-\highlight{3}</mrow>
                <mrow>\amp= \highlight{5}</mrow>
              </md>
            </p>
          </li>

          <li>
            <p>
              <m>\dfrac{2^4+3\cdot 6}{5-18\div 2}</m>.
              We recognize that the fraction bar is creating two groups.
              We should simplify the numerator and denominator separately according to the order of operations,
              and proceed from there:
              <md>
                <mrow>\frac{2^4+3\cdot 6}{5-18\div 2} \amp= \frac{\nextoperation{2^4}+3\cdot 6}{5-\nextoperation{18\div 2}}</mrow>
                <mrow>\amp=\frac{\highlight{16}+\nextoperation{3\cdot 6}}{\nextoperation{5-\highlight{9}}}</mrow>
                <mrow>\amp=\frac{\nextoperation{16+\highlight{18}}}{\highlight{-4}}</mrow>
                <mrow>\amp=\frac{\highlight{34}}{-4}</mrow>
                <mrow>\amp=-\frac{17}{2}</mrow>
              </md>
            </p>
          </li>
        </ol>
      </p>
    </example>

    <exercise>
      <title>Implied Grouping</title>
      <webwork xml:id="webwork-order-of-operations-checkpoint-impliedgrouping">
        <statement>
          <p>
            Use the order of operations to evaluate
            <me>
              \dfrac{3^{3-1}+3\abs{9-10}}{\sqrt{3+18\div3}}
            </me>.
          </p>
          <p>
            <var name="3" width="15"/>
          </p>
        </statement>
        <solution>
          <p>
            We start by identifying the innermost,
            highest priority operations:
            <md>
              <mrow>\frac{3^{3-1}+3\abs{9-10}}{\sqrt{3+18\div3}}\amp=\frac{3^{\nextoperation{3-1}}+3\abs{\nextoperation{9-10}}}{\sqrt{3+\nextoperation{18\div3}}}</mrow>
              <mrow>\amp=\frac{3^{\highlight{2}}+3\nextoperation{\abs{\highlight{-1}}}}{\sqrt{\nextoperation{3+\highlight{6}}}}</mrow>
              <mrow>\amp=\frac{\nextoperation{3^2}+3(\highlight{1})}{\sqrt{\highlight{9}}}</mrow>
              <mrow>\amp=\frac{\highlight{9}+\nextoperation{3(1)}}{\nextoperation{\sqrt{9}}</mrow>
              <mrow>\amp=\frac{\nextoperation{9+\highlight{3}}}{\highlight{3}}</mrow>
              <mrow>\amp=\frac{\highlight{12}}{3}=\highlight{4}</mrow>
            </md>
          </p>
        </solution>
      </webwork>
    </exercise>

    <exercise>
      <webwork xml:id="webwork-order-of-operations-checkpoint-impliedgrouping2">
        <statement>
          <p>
            Simplify <m>\dfrac{2\abs{9-15}+1}{\sqrt{(-5)^2+12^2}}</m>.
          </p>
          <p>
            <var name="1" width="10" />
          </p>
        </statement>
        <solution>
          <p>
            To simplify this expression,
            the first thing we want to recognize is the role of the main fraction bar,
            which groups the numerator and denominator.
            This implies we'll simplify the numerator and denominator separately according to the order of operations,
            and then reduce the fraction that results:
            <md>
              <mrow>\frac{2\abs{9-15}+1}{\sqrt{(-5)^2+12^2}}\amp=\frac{2\abs{\nextoperation{9-15}}+1}{\sqrt{\nextoperation{(-5)^2}+12^2}}</mrow>
              <mrow>\amp=\frac{2\nextoperation{\abs{\highlight{-6}}}+1}{\sqrt{\highlight{25}+\nextoperation{12^2}}}</mrow>
              <mrow>\amp=\frac{\nextoperation{2(\highlight{6})}+1}{\sqrt{\nextoperation{25+\highlight{144}}}}</mrow>
              <mrow>\amp=\frac{\nextoperation{\highlight{12}+1}}{\nextoperation{\sqrt{\highlight{169}}}}</mrow>
              <mrow>\amp=\frac{\highlight{13}}{\highlight{13}}</mrow>
              <mrow>\amp=\highlight{1}</mrow>
            </md>
          </p>
        </solution>
      </webwork>
    </exercise>
  </subsection>

  <subsection>
    <title>Understanding <m>(-a)^m</m> versus <m>-a^m</m></title>
    <p>
      We noted in the <xref ref="list-order-of-operations" text="custom">order of operations</xref>
      that using the minus sign to negate a number has the same priority as multiplication and division.
    </p>

    <p>
      How would you write a math expression that takes the number <m>-4</m> and squares it?
      Is it OK to write <m>-4^2</m>? How about <m>(-4)^2</m>?
    </p>

    <p>
      These expressions mean very different things.
      The second option, <m>(-4)^2</m> is squaring the number <m>-4</m>.
      The parentheses make this clear. The result is <m>16</m>.
    </p>

    <p>
      The first expression <m>-4^2</m> is different.
      There are two actions here: a negation and and exponentiation.
      According to the order of operations, the exponentiation has higher priority,
      so we shoudl do <m>4^2</m> first.
      <md>
        <mrow>-4^2\amp=-\nextoperation{4^2}</mrow>
        <mrow>\amp=-16</mrow>
      </md>
      and this is not the same as <m>(-4)^2</m>,
      which is <em>positive</em> <m>16</m>.
    </p>

    <warning>
      <title>Negative Numbers Raised to Powers</title>
      <p>
        You may find yourself needing to raise a negative number to a power,
        and using a calculator to do the work for you.
        If you do not understand the issue described above,
        then you may get incorrect results.

        <ul>
          <li>
            <p>
              Entering <c>-4^2</c> into a calculator or computer will result in <m>-16</m>.
            </p>
          </li>

          <li>
            <p>
              Entering <c>(-4)^2</c> into a calculator or computer will result in <m>16</m>.
            </p>
          </li>
        </ul>
        Try entering these into your own calculator.
      </p>
    </warning>

    <exercise xml:id="exercise-negative-to-power">
      <title>Negating and Raising to Powers</title>
      <webwork xml:id="webwork-order-of-operations-checkpoint-negative-to-power">
        <pg-code>
          Context("LimitedNumeric");
        </pg-code>
        <introduction>
          <p>
            Compute the following. In each part,
            the first expression asks you to exponentiate and then negate the result.
            The second expression has a negative number raised to a power.
          </p>
        </introduction>
        <task>
          <statement>
            <p>
              <m>-3^4={}</m><var name="-81" width="5" /> and <m>(-3)^4={}</m><var name="81" width="5" />
            </p>
          </statement>
          <solution>
            <p>
              <m>-3^4=-81</m> and <m>(-3)^4=81</m>
            </p>
          </solution>
        </task>
        <task>
          <statement>
            <p>
              <m>-4^3={}</m><var name="-64" width="5" /> and <m>(-4)^3={}</m><var name="-64" width="5" />
            </p>
          </statement>
          <solution>
            <p>
              <m>-4^3=-64</m> and <m>(-4)^3=-64</m>
            </p>
          </solution>
        </task>
        <task>
          <statement>
            <p>
              <m>-1.1^2={}</m><var name="-1.21" width="5" /> and
              <m>(-1.1)^2={}</m><var name="1.21" width="5" />
            </p>
          </statement>
          <solution>
            <p>
              <m>-1.1^2=-1.21</m> and <m>(-1.1)^2=1.21</m>
            </p>
          </solution>
        </task>
      </webwork>
    </exercise>

    <p>
      You might notice in <xref ref="exercise-negative-to-power"/>
      that <m>-4^3</m> and <m>(-4)^3</m> each have the same result, <m>-64</m>.
      It's true that the results are the same, but the two expressions say different things.
      With <m>-4^3</m>, you raise to a power first, then negate.
      With <m>(-4)^3</m>, you negate first, then raise to a power.
      It's like two different roads that happen to lead to the same place,
      which happens sometimes.
    </p>

  </subsection>

  <exercises>
    <subexercises>
      <title>Skills</title>
      <exercisegroup cols="2">
        <introduction>
          <p>
            Use the order of operations to simplify the expression.
          </p>
        </introduction>
        <!-- small positive integers, +, -, *, implied, ÷, /, ^ -->
        <exercise>
          <webwork xml:id="webwork-order-of-operations-aminusbplusc">
            <pg-code>
              ($a,$b,$c) = (2..9)[NchooseK(8,3)];
              Context("LimitedNumeric");
              $answer = Real($a-$b+$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> - <var name="$b"/> + <var name="$c"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-aplusbtimesc">
            <pg-code>
              ($a,$b,$c) = (2..9)[NchooseK(8,3)];
              Context("LimitedNumeric");
              $answer = Real($a+$b*$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> + <var name="$b"/>\cdot<var name="$c"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-aminusbtimesc">
            <pg-code>
              ($a,$b,$c) = (2..9)[NchooseK(8,3)];
              Context("LimitedNumeric");
              $answer = Real($a-$b*$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> - <var name="$b"/>\cdot<var name="$c"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-aplusbc">
            <pg-code>
              ($a,$b,$c) = (2..9)[NchooseK(8,3)];
              Context("LimitedNumeric");
              $answer = Real($a+$b*$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> + <var name="$b"/>(<var name="$c"/>)</m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-aminusbc">
            <pg-code>
              ($a,$b,$c) = (2..9)[NchooseK(8,3)];
              Context("LimitedNumeric");
              $answer = Real($a-$b*$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> - <var name="$b"/>(<var name="$c"/>)</m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-aplusbdivc">
            <pg-code>
              ($a,$answer,$c) = (2..9)[NchooseK(8,3)];
              ($a,$answer) = num_sort($a,$answer);
              $b = ($answer-$a)*$c;
              Context("LimitedNumeric");
              $answer = Real($a+$b/$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> + <var name="$b"/>\div<var name="$c"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-aminusbdivc">
            <pg-code>
              ($a,$answer,$c) = (2..9)[NchooseK(8,3)];
              ($answer,$a) = num_sort($a,$answer);
              $b = ($a-$answer)*$c;
              Context("LimitedNumeric");
              $answer = Real($a-$b/$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> - <var name="$b"/>\div<var name="$c"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-aplusbslashc">
            <pg-code>
              ($a,$answer,$c) = (2..9)[NchooseK(8,3)];
              ($a,$answer) = num_sort($a,$answer);
              $b = ($answer-$a)*$c;
              Context("LimitedNumeric");
              $answer = Real($a+$b/$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> + <var name="$b"/>/<var name="$c"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-aminusbslashc">
            <pg-code>
              ($a,$answer,$c) = (2..9)[NchooseK(8,3)];
              ($answer,$a) = num_sort($a,$answer);
              $b = ($a-$answer)*$c;
              Context("LimitedNumeric");
              $answer = Real($a-$b/$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> - <var name="$b"/>/<var name="$c"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-adivbslashc">
            <pg-code>
              ($answer,$k,$c) = (2..5)[NchooseK(4,3)];
              $b = $k*$c;
              $a = $answer*$c*$b;
              Context("LimitedNumeric");
              $answer = Real($a/$b/$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> \div <var name="$b"/>/<var name="$c"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-aplusbtoc">
            <pg-code>
              $c = list_random(2..4);
              $b = random(2,100**(1/$c),1);
              $a = list_random(2..9);
              Context("LimitedNumeric");
              $answer = Real($a+$b**$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> + <var name="$b"/>^{<var name="$c"/>}</m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-aminusbtoc">
            <pg-code>
              $c = list_random(2..4);
              $b = random(2,100**(1/$c),1);
              $a = list_random(2..9);
              Context("LimitedNumeric");
              $answer = Real($a-$b**$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> - <var name="$b"/>^{<var name="$c"/>}</m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-atimesbtoc">
            <pg-code>
              $c = list_random(2..4);
              $b = random(2,100**(1/$c),1);
              $a = list_random(2..9);
              Context("LimitedNumeric");
              $answer = Real($a*$b**$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> \cdot <var name="$b"/>^{<var name="$c"/>}</m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-adivbtoc">
            <pg-code>
              $c = list_random(2..4);
              $b = random(2,30**(1/$c),1);
              $answer = list_random(2..9);
              $a = $answer*$b**$c;
              Context("LimitedNumeric");
              $answer = Real($a/$b**$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> \div <var name="$b"/>^{<var name="$c"/>}</m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-aslashbtoc">
            <pg-code>
              $c = list_random(2..4);
              $b = random(2,30**(1/$c),1);
              $answer = list_random(2..9);
              $a = $answer*$b**$c;
              Context("LimitedNumeric");
              $answer = Real($a/$b**$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> / <var name="$b"/>^{<var name="$c"/>}</m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-atimesbcaretc">
            <pg-code>
              $c = list_random(2..4);
              $b = random(2,100**(1/$c),1);
              $a = list_random(2..9);
              Context("LimitedNumeric");
              $answer = Real($a*$b**$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> \cdot <var name="$b"/>\mathbin{^\wedge}<var name="$c"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
      </exercisegroup>
      <exercisegroup cols="2">
        <introduction>
          <p>
            Use the order of operations to simplify the expression that has grouping symbols.
          </p>
        </introduction>
        <!-- small positive integers, +, -, *, implied, ÷, /, ^, neg -->
        <!-- mix of parentheses, brackets                            -->
        <exercise>
          <webwork xml:id="webwork-order-of-operations-aminusgroupbplusc">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              ($a,$b,$c) = (2..9)[NchooseK(8,3)];
              Context("LimitedNumeric");
              $answer = Real($a-($b+$c));
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> - <var name="$grouping->[0]"/> <var name="$b"/> + <var name="$c"/> <var name="$grouping->[1]"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-aminusgroupbminusc">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              ($a,$b,$c) = (2..9)[NchooseK(8,3)];
              Context("LimitedNumeric");
              $answer = Real($a-($b-$c));
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> - <var name="$grouping->[0]"/> <var name="$b"/> - <var name="$c"/> <var name="$grouping->[1]"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-atimesgroupbplusc">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              ($a,$b,$c) = (2..9)[NchooseK(8,3)];
              Context("LimitedNumeric");
              $answer = Real($a*($b+$c));
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> \cdot <var name="$grouping->[0]"/> <var name="$b"/> + <var name="$c"/> <var name="$grouping->[1]"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-groupaplusbtimesc">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              ($a,$b,$c) = (2..9)[NchooseK(8,3)];
              Context("LimitedNumeric");
              $answer = Real(($a+$b)*$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$grouping->[0]"/><var name="$a"/> + <var name="$b"/><var name="$grouping->[1]"/> \cdot <var name="$c"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-atimesgroupbminusc">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              ($a,$b,$c) = (2..9)[NchooseK(8,3)];
              Context("LimitedNumeric");
              $answer = Real($a*($b-$c));
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> \cdot <var name="$grouping->[0]"/> <var name="$b"/> - <var name="$c"/> <var name="$grouping->[1]"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-groupaminusbtimesc">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              ($a,$b,$c) = (2..9)[NchooseK(8,3)];
              Context("LimitedNumeric");
              $answer = Real(($a-$b)*$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$grouping->[0]"/><var name="$a"/> - <var name="$b"/><var name="$grouping->[1]"/> \cdot <var name="$c"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-agroupbplusc">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              ($a,$b,$c) = (2..9)[NchooseK(8,3)];
              Context("LimitedNumeric");
              $answer = Real($a*($b+$c));
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> <var name="$grouping->[0]"/> <var name="$b"/> + <var name="$c"/> <var name="$grouping->[1]"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-groupaplusbc">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              ($a,$b,$c) = (2..9)[NchooseK(8,3)];
              Context("LimitedNumeric");
              $answer = Real(($a+$b)*$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$grouping->[0]"/><var name="$a"/> + <var name="$b"/><var name="$grouping->[1]"/> <var name="$c"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-agroupbminusc">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              ($a,$b,$c) = (2..9)[NchooseK(8,3)];
              Context("LimitedNumeric");
              $answer = Real($a*($b-$c));
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> <var name="$grouping->[0]"/> <var name="$b"/> - <var name="$c"/> <var name="$grouping->[1]"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-groupaminusbc">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              ($a,$b,$c) = (2..9)[NchooseK(8,3)];
              Context("LimitedNumeric");
              $answer = Real(($a-$b)*$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$grouping->[0]"/><var name="$a"/> - <var name="$b"/><var name="$grouping->[1]"/> <var name="$c"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-adivgroupbplusc">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              ($answer,$bplusc) = (3..9)[NchooseK(7,2)];
              $a = $answer*$bplusc;
              $b = random(1,$bplusc-1,1);
              $c = $bplusc - $b;
              Context("LimitedNumeric");
              $answer = Real($a/($b+$c));
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> \div <var name="$grouping->[0]"/> <var name="$b"/> + <var name="$c"/> <var name="$grouping->[1]"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-groupaplusbdivc">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              ($answer,$c) = (3..9)[NchooseK(7,2)];
              $aplusb = $answer*$c;
              $b = random(1,$aplusb-1,1);
              $a = $aplusb - $b;
              Context("LimitedNumeric");
              $answer = Real(($a+$b)/$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$grouping->[0]"/><var name="$a"/> + <var name="$b"/><var name="$grouping->[1]"/> \div <var name="$c"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-adivgroupbminusc">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              ($answer,$bminusc) = (3..9)[NchooseK(7,2)];
              $a = $answer*$bminusc;
              $c = random(1,5,1);
              $b = $bminusc + $c;
              Context("LimitedNumeric");
              $answer = Real($a/($b-$c));
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> \div <var name="$grouping->[0]"/> <var name="$b"/> - <var name="$c"/> <var name="$grouping->[1]"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-groupaminusbdivc">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              ($answer,$c) = (3..9)[NchooseK(7,2)];
              $aminusb = $answer*$c;
              $b = random(1,5,1);
              $a = $aminusb + $b;
              Context("LimitedNumeric");
              $answer = Real(($a-$b)/$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$grouping->[0]"/><var name="$a"/> - <var name="$b"/><var name="$grouping->[1]"/> \div <var name="$c"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-adivgroupbtimesc">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              ($b,$c,$answer) = (2..9)[NchooseK(8,3)];
              $a = $answer*$b*$c;
              Context("LimitedNumeric");
              $answer = Real($a/($b*$c));
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> \div <var name="$grouping->[0]"/> <var name="$b"/> \cdot <var name="$c"/> <var name="$grouping->[1]"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-adivgroupbdivc">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              ($k,$c,$answer) = (2..9)[NchooseK(8,3)];
              $b = $c*$k;
              $a = $answer*$b*$c;
              Context("LimitedNumeric");
              $answer = Real($a/($b/$c));
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> \div <var name="$grouping->[0]"/> <var name="$b"/> \div <var name="$c"/> <var name="$grouping->[1]"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-groupaplusbtoc">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              $c = random(2,4,1);
              $aplusb = random(2,100**(1/$c),1);
              $b = random(1,$aplusb-1,1);
              $a = $aplusb - $b;
              Context("LimitedNumeric");
              $answer = Real(($a+$b)**$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$grouping->[0]"/> <var name="$a"/> + <var name="$b"/> <var name="$grouping->[1]"/> ^{<var name="$c"/>} </m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-groupaminusbtoc">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              $c = random(2,4,1);
              $aminusb = random(2,100**(1/$c),1);
              $b = random(1,4,1);
              $a = $aminusb + $b;
              Context("LimitedNumeric");
              $answer = Real(($a-$b)**$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$grouping->[0]"/> <var name="$a"/> - <var name="$b"/> <var name="$grouping->[1]"/> ^{<var name="$c"/>} </m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-groupatimesbtoc">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              $c = 2;
              $ab = list_random([2,3],[3,2],[2,5],[5,2],[2,2],[3,3],[2,4],[4,2]);
              ($a,$b) = @$ab;
              Context("LimitedNumeric");
              $answer = Real(($a*$b)**$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$grouping->[0]"/> <var name="$a"/> \cdot <var name="$b"/> <var name="$grouping->[1]"/> ^{<var name="$c"/>} </m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-groupadivbtoc">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              $c = random(2,4,1);
              $adivb = random(2,100**(1/$c),1);
              $b = random(2,5,1);
              $a = $adivb*$b;
              Context("LimitedNumeric");
              $answer = Real(($a/$b)**$c);
            </pg-code>
            <statement>
              <p>
                <m><var name="$grouping->[0]"/> <var name="$a"/> \div <var name="$b"/> <var name="$grouping->[1]"/> ^{<var name="$c"/>} </m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-neggroupaplusb">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              ($a,$b) = (2..9)[NchooseK(8,2)];
              Context("LimitedNumeric");
              $answer = Real(-($a+$b));
            </pg-code>
            <statement>
              <p>
                <m>-<var name="$grouping->[0]"/> <var name="$a"/> + <var name="$b"/> <var name="$grouping->[1]"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-neggroupaminusb">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              ($a,$b) = (2..9)[NchooseK(8,2)];
              Context("LimitedNumeric");
              $answer = Real(-($a-$b));
            </pg-code>
            <statement>
              <p>
                <m>-<var name="$grouping->[0]"/> <var name="$a"/> - <var name="$b"/> <var name="$grouping->[1]"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-neggroupatimeesb">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              ($a,$b) = (2..9)[NchooseK(8,2)];
              Context("LimitedNumeric");
              $answer = Real(-($a*$b));
            </pg-code>
            <statement>
              <p>
                <m>-<var name="$grouping->[0]"/> <var name="$a"/> \cdot <var name="$b"/> <var name="$grouping->[1]"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-neggroupadivb">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              ($adivb,$b) = (2..9)[NchooseK(8,2)];
              $a = $adivb*$b;
              Context("LimitedNumeric");
              $answer = Real(-($a/$b));
            </pg-code>
            <statement>
              <p>
                <m>-<var name="$grouping->[0]"/> <var name="$a"/> \div <var name="$b"/> <var name="$grouping->[1]"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-neggroupatob">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              $b = random(2,4,1);
              $a = random(2,100**(1/$b),1);
              Context("LimitedNumeric");
              $answer = Real(-($a**$b));
            </pg-code>
            <statement>
              <p>
                <m>-<var name="$grouping->[0]"/> <var name="$a"/> ^{<var name="$b"/>}<var name="$grouping->[1]"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-groupnegatob">
            <pg-code>
              $grouping = list_random(['(',')'],['[',']']);
              $b = random(2,4,1);
              $a = random(2,100**(1/$b),1);
              Context("LimitedNumeric");
              $answer = Real((-$a)**$b);
            </pg-code>
            <statement>
              <p>
                <m><var name="$grouping->[0]"/> -<var name="$a"/> <var name="$grouping->[1]"/>^{<var name="$b"/>}</m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
      </exercisegroup>
      <exercisegroup cols="2">
        <introduction>
          <p>
            Use the order of operations to simplify the expression that has absolute value or implied grouping.
          </p>
        </introduction>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-aminusabsbminusc">
            <pg-code>
              ($a,$b,$c) = (2..9)[NchooseK(8,3)];
              Context("LimitedNumeric");
              $answer = Real($a-abs($b-$c));
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> - \abs{<var name="$b"/> - <var name="$c"/>}</m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-atimesabsbminusc">
            <pg-code>
              ($a,$b,$c) = (2..9)[NchooseK(8,3)];
              Context("LimitedNumeric");
              $answer = Real($a*abs($b-$c));
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> \cdot \abs{<var name="$b"/> - <var name="$c"/>}</m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-absaminusbtimesc">
            <pg-code>
              ($a,$b,$c) = (2..9)[NchooseK(8,3)];
              Context("LimitedNumeric");
              $answer = Real(abs($a-$b)*$c);
            </pg-code>
            <statement>
              <p>
                <m>\abs{<var name="$a"/> - <var name="$b"/>} \cdot <var name="$c"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-aabsbminusc">
            <pg-code>
              ($a,$b,$c) = (2..9)[NchooseK(8,3)];
              Context("LimitedNumeric");
              $answer = Real($a*abs($b-$c));
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> \abs{<var name="$b"/> - <var name="$c"/>}</m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-absaminusbc">
            <pg-code>
              ($a,$b,$c) = (2..9)[NchooseK(8,3)];
              Context("LimitedNumeric");
              $answer = Real(abs($a-$b)*$c);
            </pg-code>
            <statement>
              <p>
                <m>\abs{<var name="$a"/> - <var name="$b"/>} <var name="$c"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-adivabsbminusc">
            <pg-code>
              ($answer,$absbminusc) = (3..9)[NchooseK(7,2)];
              $a = $answer*$absbminusc;
              $c = random(1,9,1);
              $b = list_random($absbminusc,-$absbminusc) + $c;
              Context("LimitedNumeric");
              $answer = Real($a/abs($b-$c));
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/> \div \abs{<var name="$b"/> - <var name="$c"/>}</m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-absaminusbdivc">
            <pg-code>
              ($answer,$c) = (3..9)[NchooseK(7,2)];
              $absaminusb = $answer*$c;
              $b = random(1,9,1);
              $a = list_random($absaminusb,-$absaminusb) + $b;
              Context("LimitedNumeric");
              $answer = Real(abs($a-$b)/$c);
            </pg-code>
            <statement>
              <p>
                <m>\abs{<var name="$a"/> - <var name="$b"/>} \div <var name="$c"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-absaminusbtoc">
            <pg-code>
              $c = random(2,4,1);
              $absaminusb = random(2,100**(1/$c),1);
              $b = random(1,9,1);
              $a = list_random($absaminusb,-$absaminusb) + $b;
              Context("LimitedNumeric");
              $answer = Real(abs($a-$b)**$c);
            </pg-code>
            <statement>
              <p>
                <m>\abs{<var name="$a"/> - <var name="$b"/>}^{<var name="$c"/>} </m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-negabsaplusb">
            <pg-code>
              ($a,$b) = (2..9)[NchooseK(8,2)];
              Context("LimitedNumeric");
              $answer = Real(-abs($a+$b));
            </pg-code>
            <statement>
              <p>
                <m>-\abs{<var name="$a"/> + <var name="$b"/>}</m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-negabsaminusb">
            <pg-code>
              ($a,$b) = (2..9)[NchooseK(8,2)];
              Context("LimitedNumeric");
              $answer = Real(-abs($a-$b));
            </pg-code>
            <statement>
              <p>
                <m>-\abs{<var name="$a"/> - <var name="$b"/>}</m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-sqrtaplusbplusc">
            <pg-code>
              $n = random(1,10,1);
              $b = random(1,9,1);
              $a = $n**2 - $b;
              $c = ($n+1)**2 - $n**2;
              Context("LimitedNumeric");
              $answer = Real(sqrt($a+$b)+$c);
            </pg-code>
            <statement>
              <p>
                <m>\sqrt{<var name="$a"/>+<var name="$b"/>}+<var name="$c"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-aplussqrtbplusc">
            <pg-code>
              $n = random(1,10,1);
              ($a,$c) = (2..9)[NchooseK(8,2)];
              $b = $n**2 - $c;
              Context("LimitedNumeric");
              $answer = Real($a+sqrt($b+$c));
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/>+\sqrt{<var name="$b"/>+<var name="$c"/>}</m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-sqrtaminusbminusc">
            <pg-code>
              $n = random(1,10,1);
              $b = random(1,9,1);
              $a = $n**2 + $b;
              $c = $n**2 - ($n-1)**2;
              Context("LimitedNumeric");
              $answer = Real(sqrt($a-$b)-$c);
            </pg-code>
            <statement>
              <p>
                <m>\sqrt{<var name="$a"/>-<var name="$b"/>}-<var name="$c"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-aminussqrtbminusc">
            <pg-code>
              $n = random(1,10,1);
              ($a,$c) = (2..9)[NchooseK(8,2)];
              $b = $n**2 + $c;
              Context("LimitedNumeric");
              $answer = Real($a-sqrt($b-$c));
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/>-\sqrt{<var name="$b"/>-<var name="$c"/>}</m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-asqrtbplusc">
            <pg-code>
              $n = random(1,10,1);
              ($a,$c) = (2..9)[NchooseK(8,2)];
              $b = $n**2 - $c;
              Context("LimitedNumeric");
              $answer = Real($a*sqrt($b+$c));
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/>\sqrt{<var name="$b"/>+<var name="$c"/>}</m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-asqrtbminusc">
            <pg-code>
              $n = random(1,10,1);
              ($a,$c) = (2..9)[NchooseK(8,2)];
              $b = $n**2 + $c;
              Context("LimitedNumeric");
              $answer = Real($a*sqrt($b-$c));
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/>\sqrt{<var name="$b"/>-<var name="$c"/>}</m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-asqrtbtimesc">
            <pg-code>
              $bc = list_random([2,18],[3,12],[2,50],[5,20]);
              $i = list_random(0,1);
              $b = $bc->[$i];
              $c = $bc->[1-$i];
              $a = random(2,9,1);
              Context("LimitedNumeric");
              $answer = Real($a*sqrt($b*$c));
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/>\sqrt{<var name="$b"/>\cdot<var name="$c"/>}</m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-asqrtbdivc">
            <pg-code>
              $n = random(2,7,1);
              $c = random(2,100/$n**2,1);
              $b = $n**2*$c*random(2,200/$n**2/$c,1);
              $a = random(2,9,1);
              Context("LimitedNumeric");
              $answer = Real($a*sqrt($b/$c));
            </pg-code>
            <statement>
              <p>
                <m><var name="$a"/>\sqrt{<var name="$b"/>\div<var name="$c"/>}</m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-fractiongrouping">
            <pg-code>
              ($u,$v) = (1..4)[NchooseK(4,2)];
              ($p,$q) = (2..4)[NchooseK(3,2)];
              $frac[0] = $p*$q*$u*$v;
              $frac[1] = $p*$q;
              @op = ('+','-','*','/')[NchooseK(4,2)];
              $op[2] = list_random('+','-','*');
              $c = random(2,9,1);
              %latex = ('+'=>'+', '-'=>'-', '*'=>'\cdot ', '/'=>'\div ');
              Context("Numeric");
              for my $i (0,1) {
                if ($op[$i] eq '+') {
                  $b[$i] = random(2,9,1);
                  $a[$i] = $frac[$i] - $b[$i];
                }
                elsif ($op[$i] eq '-') {
                  $b[$i] = random(2,9,1);
                  $a[$i] = $frac[$i] + $b[$i];
                }
                elsif ($op[$i] eq '*') {
                  if ($i == 0) {
                    $b[$i] = $u*$p;
                    $a[$i] = $v*$q;
                  } else {
                    $b[$i] = $q;
                    $a[$i] = $p;
                  }
                }
                elsif ($op[$i] eq '/') {
                  $b[$i] = random(2,max(2,min(100/$frac[$i],9)),1);
                  $a[$i] = $frac[$i] * $b[$i];
                }
              }
              if (list_random(0,1)) {
                $answer = Real("$c $op[2] ($a[0] $op[0] $b[0]) / ($a[1] $op[1] $b[1])");
                $expression = "$c $latex{$op[2]} \dfrac{$a[0] $latex{$op[0]} $b[0]}{$a[1] $latex{$op[1]} $b[1]}";

              } else {
                $answer = Real("($a[0] $op[0] $b[0]) / ($a[1] $op[1] $b[1]) $op[2] $c");
                $expression = "\dfrac{$a[0] $latex{$op[0]} $b[0]}{$a[1] $latex{$op[1]} $b[1]} $latex{$op[2]} $c";
              }
              Context("LimitedNumeric");
              $answer = Real($answer);
            </pg-code>
            <statement>
              <p>
                <m><var name="$expression"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork copy="webwork-order-of-operations-fractiongrouping"/>
        </exercise>
        <exercise>
          <webwork copy="webwork-order-of-operations-fractiongrouping"/>
        </exercise>
        <exercise>
          <webwork copy="webwork-order-of-operations-fractiongrouping"/>
        </exercise>
        <exercise>
          <webwork xml:id="webwork-order-of-operations-exponentgrouping">
            <pg-code>
              $base = random(2,10,1);
              $exponent = random(1,log(101)/log($base),1);
              if ($exponent == 4 || $exponent == 6) {
                $op[0] = list_random('+','-','*','/');
              } else {
                $op[0] = list_random('+','-','/');
              }
              $op[1] = list_random('+','-','*');
              $c = random(2,9,1);
              %latex = ('+'=>'+', '-'=>'-', '*'=>'\cdot ', '/'=>'\div ');
              Context("Numeric");
              if ($op[0] eq '+') {
                $b = random(2,9,1);
                $a = $exponent - $b;
              }
              elsif ($op[0] eq '-') {
                $b = random(2,9,1);
                $a = $exponent + $b;
              }
              elsif ($op[0] eq '*') {
                $b = 2;
                $a = $exponent/2;
              }
              elsif ($op[$i] eq '/') {
                $b = random(2,9,1);
                $a = $exponent * $b;
              }
              if (list_random(0,1)) {
                $answer = Real("$c $op[1] $base^{$a $op[0] $b}");
                $expression = "$c $latex{$op[1]} $base^{$a $latex{$op[0]} $b}";

              } else {
                $answer = Real("$base^{$a $op[0] $b} $op[1] $c");
                $expression = "$base^{$a $latex{$op[0]} $b} $latex{$op[1]} $c";
              }
              Context("LimitedNumeric");
              $answer = Real($answer);
            </pg-code>
            <statement>
              <p>
                <m><var name="$expression"/></m>
              </p>
              <p>
                <var name="$answer" width="5"/>
              </p>
            </statement>
          </webwork>
        </exercise>
        <exercise>
          <webwork copy="webwork-order-of-operations-exponentgrouping"/>
        </exercise>
        <exercise>
          <webwork copy="webwork-order-of-operations-exponentgrouping"/>
        </exercise>
        <exercise>
          <webwork copy="webwork-order-of-operations-exponentgrouping"/>
        </exercise>
      </exercisegroup>

      <exercisegroup cols="2">
        <introduction>
          <p>
            Simplify the expression.
          </p>
        </introduction>
        <!-- multiple things going on -->
      </exercisegroup>

    </subexercises>
    <subexercises>
      <title>Challenge</title>
      <exercise>
      <!-- Kara's challenge problem -->
        <webwork xml:id="webwork-order-of-operations-challenge">
            <statement>
              <p>
                In this challenge, your job is to create expressions,
                using addition, subtraction, multiplication, and parentheses.
                You may use the numbers, <m>1, 2, 3</m>,
                and <m>4</m> in your expression,
                using each number only once.
                For example, you could make the expression:
                <m>1+2 \cdot 3 - 4</m>.
              </p>

              <p>
                <ol marker="a.">
                  <li>
                    <p>
                      The greatest value that it is possible to create under these conditions is <var name="36" width="10" />.
                    </p>
                  </li>

                  <li>
                    <p>
                      The least value that it is possible to create under these conditions is <var name="-23" width="10" />.
                    </p>
                  </li>
                </ol>
              </p>
            </statement>
            <solution>
              <p>
                <ol marker="a.">
                  <li>
                    <p>
                      The greatest value is <m>36</m>,
                      which comes from <m>(1+2) \cdot 3 \cdot 4</m>.
                    </p>
                  </li>

                  <li>
                    <p>
                      The least value is <m>-23</m>,
                      which comes from <m>1 - (2 \cdot 3 \cdot 4)</m>.
                    </p>
                  </li>
                </ol>
              </p>
            </solution>
        </webwork>
      </exercise>
    </subexercises>
  </exercises>
</section>

